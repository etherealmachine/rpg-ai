{"version":3,"sources":["webpack:///./src/design_system-DS.astroturf.css?0131","design_system-DS.astroturf.css","webpack:///./src/Zoom-classes.astroturf.css?92e9","Zoom-classes.astroturf.css","webpack:///./src/Description-classes.astroturf.css?6438","Description-classes.astroturf.css","webpack:///./src/DescriptionEditor-classes.astroturf.css?05e7","DescriptionEditor-classes.astroturf.css","webpack:///./src/LevelEditor-classes.astroturf.css?fe66","LevelEditor-classes.astroturf.css","webpack:///./src/Drawer-classes.astroturf.css?1680","Drawer-classes.astroturf.css","webpack:///./src/LevelSelector-classes.astroturf.css?fc5f","LevelSelector-classes.astroturf.css","webpack:///./src/Modal-classes.astroturf.css?f264","Modal-classes.astroturf.css","webpack:///./src/Menubar-classes.astroturf.css?513a","Menubar-classes.astroturf.css","webpack:///./src/HomeButton-classes.astroturf.css?e2cc","HomeButton-classes.astroturf.css","webpack:///./src/PrintLayout-classes.astroturf.css?93af","PrintLayout-classes.astroturf.css","webpack:///./src/Welcome-classes.astroturf.css?00ab","Welcome-classes.astroturf.css","webpack:///./src/Tooltip-classes.astroturf.css?c0b5","Tooltip-classes.astroturf.css","webpack:///./src/Toggle-classes.astroturf.css?e555","Toggle-classes.astroturf.css","webpack:///./src/App-classes.astroturf.css?879d","App-classes.astroturf.css","lib.ts","State.ts","design_system.tsx","Zoom.tsx","Canvas.tsx","Description.tsx","DescriptionEditor.tsx","FeatureEditor.tsx","LevelEditor.tsx","MapEditor.tsx","Drawer.tsx","LevelSelector.tsx","Modal.tsx","Menubar.tsx","HomeButton.tsx","PrintLayout.tsx","icons/custom_icons.ts","Welcome.tsx","Tooltip.tsx","Toggle.tsx","Toolbar.tsx","Persistence.ts","App.tsx","index.tsx"],"names":["content","module","i","options","transform","undefined","locals","exports","___CSS_LOADER_API_IMPORT___","push","dist","a","b","Math","sqrt","sqDist","lerp","d","from","to","lerp2","clamp","p","min","max","indexToColor","j","Error","bbox","points","minX","map","maxX","minY","maxY","sw","ne","w","h","isCCW","ring","signedArea","slice","length","forEach","point","x2","y2","toPolyBoolPoly","geoms","regions","geom","coordinates","inverted","closestPointToLine","ap","ab","distance","closestPointToPolygon","polygon","line","sort","detectDoorPlacement","features","fullWidth","closestFeature","flatMap","feature","geometries","geometry","type","closestPoint","Infinity","f","includes","coords","center","slope","vdy1","floor","vdx1","vdy2","ceil","vdx2","hdx1","hdy1","hdx2","hdy2","vfrom","vto","vdist","hfrom","hto","hdist","isNaN","computeDoorPlacement","centroid","twicearea","x","y","p1","p2","undoStack","redoStack","modify","state","propertyKey","descriptor","modifierFn","value","args","Array","arguments","this","setState","produce","newState","prev","JSON","stringify","maps","selection","mapIndex","bind","curr","undoable","splice","hasOwnProperty","notifyChange","State","tools","selected","group","disabled","subtype","scale","offset","TempleOfClangeddin","drawerOpen","drawerWidth","levelIndex","featureIndex","geometryIndex","ghostLevels","gridSteps","debug","showWelcome","levels","url","encodeURIComponent","document","createElement","setAttribute","name","body","appendChild","click","remove","mapName","description","pop","parse","stairs","properties","decoration","rect","ellipse","walls","deltaDrag","reverse","brush","door","doors","selectedFeature","geom1","find","geom2","mergedGeoms","merged","PolyBool","region","merge","filter","prevGeoms","concat","tool","Object","values","t","option","open","width","desc","level","assign","sourceIndex","destIndex","removed","Context","React","createContext","specialColors","CanvasRenderer","canvas","mode","mouse","mouseDown","drag","specialKeys","shift","alt","ctrl","space","polygonToolSelected","hover","size","fps","requestID","appState","ctx","bufferCanvas","bufferCtx","dirty","Date","onMouseDown","e","MouseEvent","button","start","canvasToTile","end","pointer","selectedFeatureIndex","hoverFeatureIndex","hoverGeometryIndex","shiftKey","handleGroup","setSelection","worldToTile","canvasToWorld","addDoor","onMouseUp","pos","handlePolygon","handleBrush","bounds","handleDrag","onMouseMove","event","target","getBoundingClientRect","touches","clientX","left","clientY","top","offsetX","offsetY","delta","newOffset","window","requestAnimationFrame","setOffset","onWheel","elementFromPoint","stopPropagation","preventDefault","deltaX","deltaY","onKeyDown","key","activeElement","handleDelete","undo","redo","style","cursor","onKeyUp","worldToCanvas","round","S","render","time","getTime","startTime","performance","now","resetTransform","clearScreen","currLevel","drawLevel","globalAlpha","entries","parseInt","save","translate","drawMousePos","drawPolygon","drawBrush","drawDrag","restore","renderFPS","getContext","alpha","height","addEventListener","passive","removeEventListener","text","font","m","measureText","actualBoundingBoxAscent","actualBoundingBoxDescent","fillText","toFixed","fillStyle","renderTextCenter","fillRect","clearRect","iT","getTransform","inverse","transformPoint","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","arc","PI","fill","drawGeometry","drawStairs","drawDecoration","box","drawEllipse","drawLine","fillColor","strokeColor","indexColor","drawDoor","pathPoints","drawPoints","pathEllipse","lineJoin","lineCap","globalCompositeOperation","drawNormalDoor","drawSecretDoor","l","abs","cx","actualBoundingBoxLeft","actualBoundingBoxRight","cy","sx","sign","sy","L","W","closePath","drawStatue","drawColumn","drawStalacmite","r","r2","theta","cos","sin","rng","seedrandom","currRadius","close","colorIndex","featureDrawOrder","geometryDrawOrder","featureType","geometryType","areaColor","selectable","g","tmp","drawFeatures","getImageData","data","range","reduce","extent","levelMid","getSelectedFeature","drawGrid","drawImage","Canvas","props","canvasRef","useRef","useContext","useState","renderer","setRenderer","useEffect","current","syncSize","parentElement","offsetWidth","offsetHeight","attachListeners","detachListeners","ref","Zoom","FeatureEditor","lastSelection","setLastSelection","tmpName","setTmpName","tmpDescription","setTmpDescription","color","DescriptionEditor","onNameChange","onDescriptionChange","onSave","setFeatureDescription","onUndo","onDelete","MapEditor","setMapDescription","MapSelector","statueIcon","prefix","iconName","icon","buttons","faMousePointer","tooltip","faSquare","faDoorClosed","faStrikethrough","faBrush","faVectorSquare","faDrawPolygon","faCircle","Toolbar","isOptionSelected","handleOptionClick","setToolOption","iconFor","faExclamationTriangle","className","DS","toolbar","position","spec","Tooltip","Fragment","onClick","setSelectedTool","optionName","optionSpec","Toggle","toggled","onToggle","setGridSteps","isObject","isArray","unfreeze","o","oo","v","String","property","useLocalStorageState","initial","fromLocalStorage","localStorage","getItem","inflate","objs","obj","isFrozen","setItem","Sentry","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","ReactDOM","StrictMode","App","getElementById"],"mappings":"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DATA,6CA+BA,gCACA,MACA,gDACA,4DACA,4BACA,sDACA,QA1BA,WACA,YACA,uBACA,0BAGA,iCAqBA,YAnBA,YACA,0CAmBA,UAjBA,YAEA,GADA,4CACA,WACA,uDACA,QACA,oBACA,wBAYA,mDACA,mDAEA,+CACA,2BACA,2BACA,gC,aCvFA,GAAgB,OA+DhB,cACA,+BACA,cACA,mCAWA,qDACA,sCACA,iHACA,4BACA,gEACA,6CACA,GAEA,8GACA,2BACA,gBACA,aACA,4BArBA,cACA,0CACA,aADA,IAEA,uCACA,yBADA,mBAEA,SAgBA,4BAGA,2GChGA,OAAgB,OAqChB,eACA,0FACA,oDACA,2EACA,oFAEA,aC1CA,OAAgB,OA0BhB,SAAS8Q,GAAYlC,GACrB,+BACA,oCACA,oCACA,6BACA,iEACA,wBACA,qBACA,0CACA,cAOA,cACA,+BACA,gBAFA,EAGA,2BAHA,mBAGA,EAHA,KAGA,EAHA,KAOA,iDAPA,EAQA,uBARA,mBAQA,EARA,KAQA,EARA,OAmBA,gCAnBA,mBAmBA,EAnBA,KAmBA,EAnBA,KAwBA,OAJA,uEACA,eACA,WAEA,oCACA,+CACA,wDACA,+DAvBA,YACA,qBAuBA,4BACA,yBACA,mCAFA,QAKA,6CACA,yBACA,2BAFA,QAKA,4BACA,yBACA,gCAFA,OAKA,4BACA,yBACA,8BAFA,QAKA,4BACA,yBACA,8BAFA,QAKA,4BACA,yBACA,sCAFA,SAKA,4BACA,yBACA,uCAFA,QAKA,sCACA,4BACA,yBACA,gCAFA,UAKA,4BACA,yBACA,+BAFA,UAMA,iDACA,wCACA,2BACA,gBACA,gBACA,8DAGA,iEACA,+BA3EA,YACA,gBACA,WACA,aACA,oBACA,qBACA,iBAEA,WC1DA,OAAgB,OA8BhB,cACA,+BACA,mDACA,iHClCA,OAAgB,OA+BhB,cACA,+BACA,+BACA,KAOA,OANA,gCACA,kCACA,GADA,IAEA,0EAGA,6CACA,4CACA,oCACA,yGACA,6CACA,+CAGA,6CACA,4DACA,+CACA,8CAEA,oCACA,yGACA,qEACA,0FACA,8HC5DO,IAwBMmC,GAA0C,CA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","file":"static/js/main.c0f520ac.chunk.js","sourcesContent":["\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./design_system-DS.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./design_system-DS.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./design_system-DS.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1T682EN3wGuui_M4H8-h4d {\\n    background: transparent;\\n    border: none;\\n    outline: none;\\n    margin: 4px;\\n    padding: 8px 12px;\\n    color: white;\\n    font-size: 18px;\\n    font-weight: 600;\\n    box-sizing: border-box;\\n    border-radius: 2px;\\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\\n  }\\n\\n  ._1T682EN3wGuui_M4H8-h4d:hover {\\n    background: #505050;\\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\\n  }\\n\\n  ._1T682EN3wGuui_M4H8-h4d:active {\\n    outline: none;\\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\\n  }\\n\\n  ._3y7SXyz4JOCnc5uHwMgV6G {\\n    background: transparent;\\n    border: none;\\n    outline: none;\\n    margin: 4px;\\n    color: white;\\n    font-size: 18px;\\n    font-weight: 600;\\n    box-sizing: border-box;\\n    border-radius: 2px;\\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\\n  }\\n\\n  ._3y7SXyz4JOCnc5uHwMgV6G:hover {\\n    background: #505050;\\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\\n  }\\n\\n  ._3y7SXyz4JOCnc5uHwMgV6G:active {\\n    outline: none;\\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\\n  }\\n\\n  ._23Y2hTXZx4yRztG6Og2hsX {\\n    background: #A20B25;\\n  }\\n\\n  ._23Y2hTXZx4yRztG6Og2hsX:hover {\\n    background: #a03e4e;\\n  }\\n\\n  ._3TM3EDP4hscy9_4eMYFQ4j {\\n    font-size: 18px;\\n    background: transparent;\\n    color: white;\\n    border: none;\\n    border-bottom: 1px solid white;\\n    padding: 4px;\\n    margin: 4px;\\n    margin-bottom: 1px;\\n  }\\n  \\n  ._3TM3EDP4hscy9_4eMYFQ4j:focus {\\n    outline: none;\\n    border-bottom: 2px solid white;\\n    margin-bottom: 0px;\\n  }\\n\\n  ._1QialzHq4mUm3mfxM9dFjo {\\n    display: flex;\\n    flex-direction: column;\\n    background: #000;\\n    border-radius: 12px;\\n    padding: 8px;\\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\\n    color: white;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo svg {\\n    color: white;\\n    font-size: 24px;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo .y38q2UbGKcnf8XF1TwQCQ svg {\\n    color: black;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button {\\n    background: black;\\n    width: 50px;\\n    height: 50px;\\n    border: 1px solid white;\\n    outline: none;\\n    margin: 4px;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button:hover {\\n    background: #505050;\\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button:active {\\n    outline: none;\\n    border: none;\\n    scale: 0.9;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button.y38q2UbGKcnf8XF1TwQCQ {\\n    background: #bbb;\\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button[disabled] {\\n    background: #444;\\n    box-shadow: none;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"button\": \"_1T682EN3wGuui_M4H8-h4d\",\n\t\"buttonSmall\": \"_3y7SXyz4JOCnc5uHwMgV6G\",\n\t\"danger\": \"_23Y2hTXZx4yRztG6Og2hsX\",\n\t\"input\": \"_3TM3EDP4hscy9_4eMYFQ4j\",\n\t\"toolbar\": \"_1QialzHq4mUm3mfxM9dFjo\",\n\t\"selected\": \"y38q2UbGKcnf8XF1TwQCQ\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Zoom-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Zoom-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Zoom-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1UqzVcjxvXSzZbvZKvXYKi button {\\n    background: black;\\n    width: 24px;\\n    height: 24px;\\n    border: 1px solid white;\\n    outline: none;\\n    margin: 4px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    color: white;\\n  }\\n  ._1UqzVcjxvXSzZbvZKvXYKi svg {\\n    color: white;\\n    font-size: 12px;\\n  }\\n  ._1UqzVcjxvXSzZbvZKvXYKi button:hover {\\n    background: #505050;\\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\\n  }\\n  ._1UqzVcjxvXSzZbvZKvXYKi button:active {\\n    outline: none;\\n    border: none;\\n    scale: 0.9;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"zoom\": \"_1UqzVcjxvXSzZbvZKvXYKi\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Description-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Description-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Description-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._3IlFEbyxwjKJ9Sy-1JAUwL {\\n    margin: 0;\\n    padding: 0 8px;\\n    color: white;\\n  }\\n  ._3IlFEbyxwjKJ9Sy-1JAUwL h1 {\\n    font-size: 24px;\\n    font-family: Helvetica serif;\\n    padding: 0 8px;\\n    margin: 0;\\n    color: white;\\n  }\\n  ._3IlFEbyxwjKJ9Sy-1JAUwL p {\\n    font-size: 18px;\\n    font-family: Helvetica serif;\\n    padding: 0;\\n    margin: 0;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"formattedText\": \"_3IlFEbyxwjKJ9Sy-1JAUwL\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./DescriptionEditor-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./DescriptionEditor-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./DescriptionEditor-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._3W5IvxPia75NSEZmFXoBmA {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n  ._3W5IvxPia75NSEZmFXoBmA textarea {\\n    height: 400px;\\n    outline: none;\\n    border: none;\\n  }\\n  ._3N02lA9zkh_pv4M7FdSKFQ {\\n    font-family: Helvetica serif;\\n    font-size: 24px;\\n    color: white;\\n    padding: 8px;\\n  }\\n  ._1QtaoYNAGXwdUqEuaQejp4 {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: flex-start;\\n    margin: 12px 24px;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"editor\": \"_3W5IvxPia75NSEZmFXoBmA\",\n\t\"name\": \"_3N02lA9zkh_pv4M7FdSKFQ\",\n\t\"actions\": \"_1QtaoYNAGXwdUqEuaQejp4\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./LevelEditor-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./LevelEditor-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./LevelEditor-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._3ZJnUkz9JITQGyOviOpcbX {\\n    font-family: Helvetica serif;\\n    font-size: 18px;\\n    color: white;\\n    padding: 8px;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"features\": \"_3ZJnUkz9JITQGyOviOpcbX\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Drawer-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Drawer-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Drawer-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._7wQ_KhraOD7XNV_7Gcnj4 {\\n    width: 0;\\n    margin: 8px 0;\\n    position: absolute;\\n    right: 0;\\n    top: 0;\\n    bottom: 0;\\n    background: #373737;\\n    box-sizing: border-box;\\n    transition: .2s ease-out;\\n  }\\n    ._7wQ_KhraOD7XNV_7Gcnj4._1MlyHLj10SQkIHXsiINIx1 {\\n      transition: .2s ease-out;\\n      z-index: 100;\\n    }\\n  ._2I5tLfqZmuI4hmhaiAXBzH {\\n    position: absolute;\\n    top: 0;\\n    left: -27px;\\n    background: #373737;\\n    color: white;\\n    outline: none;\\n    border: none;\\n    font-size: 30px;\\n    padding: 8px;\\n    border-radius: 4px 0 0 4px;\\n  }\\n  .NsuFqULDSfAB5HIY7HbUg {\\n    height: 97%;\\n    overflow: scroll;\\n    padding: 8px;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"drawer\": \"_7wQ_KhraOD7XNV_7Gcnj4\",\n\t\"open\": \"_1MlyHLj10SQkIHXsiINIx1\",\n\t\"toggleButton\": \"_2I5tLfqZmuI4hmhaiAXBzH\",\n\t\"editors\": \"NsuFqULDSfAB5HIY7HbUg\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./LevelSelector-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./LevelSelector-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./LevelSelector-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._38X7Ih6LgSulEuEtueMD2U {\\n    display: flex;\\n    flex-direction: column;\\n    position: absolute;\\n    bottom: 0;\\n    left: 0;\\n    background: #000;\\n    border-radius: 12px;\\n    margin-bottom: 50px;\\n    margin-left: 24px;\\n    padding: 8px;\\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\\n    color: white;\\n  }\\n  ._38X7Ih6LgSulEuEtueMD2U svg {\\n    color: white;\\n    font-size: 12px;\\n  }\\n  ._38X7Ih6LgSulEuEtueMD2U button {\\n    background: black;\\n    width: 24px;\\n    height: 24px;\\n    border: 1px solid white;\\n    outline: none;\\n    margin: 4px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    color: white;\\n  }\\n  ._38X7Ih6LgSulEuEtueMD2U button:hover {\\n    background: #505050;\\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\\n  }\\n  ._38X7Ih6LgSulEuEtueMD2U button:active {\\n    outline: none;\\n    border: none;\\n    scale: 0.9;\\n  }\\n  ._38X7Ih6LgSulEuEtueMD2U button.X3vmDKNXaSrZpzJYj5SqK {\\n    color: black;\\n    background: #bbb;\\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\\n  }\\n  ._38X7Ih6LgSulEuEtueMD2U h4 {\\n    margin: 0;\\n    padding: 0;\\n  }\\n  ._32AnUS1IZ28UbU4adMP6GT {\\n    display: flex;\\n    align-items: center;\\n  }\\n  button._2XSEgiWqLvufrbRqULO4Ng {\\n    outline: none;\\n    border: none;\\n  }\\n  ._2XSEgiWqLvufrbRqULO4Ng:hover {\\n    cursor: pointer;\\n    text-decoration: underline;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"levels\": \"_38X7Ih6LgSulEuEtueMD2U\",\n\t\"selected\": \"X3vmDKNXaSrZpzJYj5SqK\",\n\t\"level\": \"_32AnUS1IZ28UbU4adMP6GT\",\n\t\"link\": \"_2XSEgiWqLvufrbRqULO4Ng\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Modal-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Modal-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Modal-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1429OEOGcRhOAV0J3Gg-KT {\\n    position: fixed;\\n    z-index: 1000;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    height: 100%;\\n    overflow: auto;\\n    background-color: rgba(0, 0, 0, 0.4);\\n  }\\n\\n  ._1DN0JTMd6pHMuwsTOAvt2j {\\n    position: relative;\\n    background-color: #373737;\\n    color: #fff;\\n    margin: 64px auto;\\n    padding: 0 20px 20px 20px;\\n    border: 1px solid #888;\\n    border-radius: 8px;\\n    width: 60%;\\n  }\\n\\n  ._1DN0JTMd6pHMuwsTOAvt2j button {\\n    outline: none;\\n    border: none;\\n    background-color: transparent;\\n    color: #fff;\\n    font-size: 24px;\\n    position: absolute;\\n    top: 8px;\\n    right: 8px;\\n    text-decoration: none;\\n    cursor: pointer;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modal\": \"_1429OEOGcRhOAV0J3Gg-KT\",\n\t\"modalContent\": \"_1DN0JTMd6pHMuwsTOAvt2j\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Menubar-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Menubar-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Menubar-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._2aM8m-4Xx92dNWnaEGRNME {\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    background: #373737;\\n    padding: 2px;\\n    width: 100%;\\n  }\\n  ._3HEPmFe0KP_qc9LRO7uwIh {\\n    color: white;\\n    margin: 8px 24px 8px 24px;\\n  }\\n  .yr0iF51zaJ_HOYfzQrmAp {\\n    margin-left: auto;\\n    margin-right: 24px;\\n  }\\n  label {\\n    color: white;\\n  }\\n  ._2HSpHXCXB2uWq9tBHwycOe:hover {\\n    text-decoration: underline;\\n    cursor: pointer;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"menubar\": \"_2aM8m-4Xx92dNWnaEGRNME\",\n\t\"title\": \"_3HEPmFe0KP_qc9LRO7uwIh\",\n\t\"debugMenu\": \"yr0iF51zaJ_HOYfzQrmAp\",\n\t\"mapLink\": \"_2HSpHXCXB2uWq9tBHwycOe\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./HomeButton-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./HomeButton-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./HomeButton-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1bKtBCtBoCYJg7vkFGtY1S {\\n    display: flex;\\n    flex-direction: column;\\n    position: absolute;\\n    bottom: 0;\\n    right: 0;\\n    padding: 8px;\\n    z-index: 1;\\n  }\\n  ._1bKtBCtBoCYJg7vkFGtY1S svg {\\n    color: #505050;\\n    font-size: 24px;\\n  }\\n  ._1bKtBCtBoCYJg7vkFGtY1S button {\\n    background: transparent;\\n    outline: none;\\n    border: none; \\n    display: flex;\\n    margin: 2px;\\n    align-items: center;\\n    justify-content: center;\\n    width: 24px;\\n    height: 24px;\\n  }\\n  ._1bKtBCtBoCYJg7vkFGtY1S button:hover svg {\\n    color: #000;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"home\": \"_1bKtBCtBoCYJg7vkFGtY1S\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./PrintLayout-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./PrintLayout-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./PrintLayout-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._2LtiBs0QFy0T6xn0SS2W3x {\\n    display: flex;\\n    flex-direction: column;\\n    font-family: Helvetica serif;\\n  }\\n  ._6Z9YH7Qxp_AWrunyTXjc7 {\\n    width: 8in;\\n    height: 10.5in;\\n    display: flex;\\n    flex-direction: column;\\n    margin-left: auto;\\n    margin-right: auto;\\n    border-bottom: 1px solid black;\\n    padding: 0.25in;\\n  }\\n  @media print {\\n    ._6Z9YH7Qxp_AWrunyTXjc7 {\\n      border-bottom: none !important;\\n    }\\n  }\\n  ._16g_MaPE_LtUpqw4wDWuQu {\\n    width: 8in;\\n    display: flex;\\n    flex-direction: column;\\n    margin-left: auto;\\n    margin-right: auto;\\n    padding: 0.25in;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"print\": \"_2LtiBs0QFy0T6xn0SS2W3x\",\n\t\"page\": \"_6Z9YH7Qxp_AWrunyTXjc7\",\n\t\"pages\": \"_16g_MaPE_LtUpqw4wDWuQu\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Welcome-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Welcome-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Welcome-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._32RqLWb9TAlxHXLXW5Y7tH {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n  ._32RqLWb9TAlxHXLXW5Y7tH a {\\n    color: white;\\n  }\\n  ._32RqLWb9TAlxHXLXW5Y7tH li {\\n    padding: 4px;\\n  }\\n  ._21_Zg-ByTQDDzrT0uY_Ufj {\\n    font-size: 16px;\\n    margin-left: auto;\\n    margin-right: auto;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"welcomePage\": \"_32RqLWb9TAlxHXLXW5Y7tH\",\n\t\"footer\": \"_21_Zg-ByTQDDzrT0uY_Ufj\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Tooltip-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Tooltip-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Tooltip-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._28mF98z4gM6RA9OdY-YuEy {\\n    color: white;\\n    background: black;\\n    border-radius: 4px;\\n    padding: 8px;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"tooltip\": \"_28mF98z4gM6RA9OdY-YuEy\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Toggle-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Toggle-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Toggle-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1v-ohDNr7AFbOSKLT0CYxX {\\n    position: relative;\\n    display: inline-block;\\n    width: 100%;\\n    height: 34px;\\n  }\\n\\n  ._1v-ohDNr7AFbOSKLT0CYxX input {\\n    opacity: 0;\\n    width: 0;\\n    height: 0;\\n  }\\n\\n  ._2w1KenDtBt0Wyo3aJE-FRz {\\n    position: absolute;\\n    cursor: pointer;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: #ccc;\\n    -webkit-transition: .4s;\\n    transition: .4s;\\n    border-radius: 34px;\\n  }\\n\\n  ._2w1KenDtBt0Wyo3aJE-FRz:before {\\n    position: absolute;\\n    content: \\\"\\\";\\n    height: 26px;\\n    width: 26px;\\n    left: 4px;\\n    bottom: 4px;\\n    background-color: white;\\n    -webkit-transition: .4s;\\n    transition: .4s;\\n    border-radius: 50%;\\n  }\\n\\n  ._1v-ohDNr7AFbOSKLT0CYxX input:checked + ._2w1KenDtBt0Wyo3aJE-FRz {\\n    background-color: #2196F3;\\n  }\\n\\n  ._1v-ohDNr7AFbOSKLT0CYxX input:focus + ._2w1KenDtBt0Wyo3aJE-FRz {\\n    box-shadow: 0 0 1px #2196F3;\\n  }\\n\\n  ._1v-ohDNr7AFbOSKLT0CYxX input:checked + ._2w1KenDtBt0Wyo3aJE-FRz:before {\\n    -webkit-transform: translateX(26px);\\n    -ms-transform: translateX(26px);\\n    transform: translateX(26px);\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"toggle\": \"_1v-ohDNr7AFbOSKLT0CYxX\",\n\t\"slider\": \"_2w1KenDtBt0Wyo3aJE-FRz\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./App-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./App-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./App-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1K0xKFlE3XhuIq8I1FpjrW {\\n    width: 100vw;\\n    height: 100vh;\\n    position: relative;\\n    display: flex;\\n    flex-direction: column;\\n  }\\n  ._21qBYvi1wyLFQ2lvKpGD4N {\\n    width: 100%;\\n    height: 100%;\\n    position: relative;\\n    display: flex;\\n    flex-direction: column;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"app\": \"_1K0xKFlE3XhuIq8I1FpjrW\",\n\t\"canvasWrapper\": \"_21qBYvi1wyLFQ2lvKpGD4N\"\n};\nmodule.exports = exports;\n","import * as PolyBool from 'polybooljs';\n\nimport { Feature, Geometry } from './State';\n\nexport function line(x0: number, y0: number, x1: number, y1: number): { x: number, y: number }[] {\n  const dx = Math.abs(x1 - x0);\n  const dy = Math.abs(y1 - y0);\n  const sx = (x0 < x1) ? 1 : -1;\n  const sy = (y0 < y1) ? 1 : -1;\n  let err = dx - dy;\n  const points = [];\n  while (true) {\n    points.push({ x: x0, y: y0 });\n    if ((x0 === x1) && (y0 === y1)) break;\n    var e2 = 2 * err;\n    if (e2 > -dy) { err -= dy; x0 += sx; }\n    if (e2 < dx) { err += dx; y0 += sy; }\n  }\n  return points;\n}\n\nexport function sqDist(a: number[], b: number[]): number {\n  return (b[0] - a[0]) * (b[0] - a[0]) + (b[1] - a[1]) * (b[1] - a[1]);\n}\n\nexport function dist(a: number[], b: number[]): number {\n  return Math.sqrt(sqDist(a, b));\n}\n\nexport function area(points: number[][]) {\n  let a = 0;\n  for (let i = 0; i < points.length; i++) {\n    const curr = points[i];\n    const next = points[i + 1];\n    a += curr[0] * next[0] - curr[1] * next[1];\n  }\n  return Math.abs(a / 2);\n}\n\nexport function lerp(d: number, from: number, to: number): number {\n  return from + (to - from) * d;\n}\n\nexport function lerp2(d: number, from: number[], to: number[]): number[] {\n  return [lerp(d, from[0], to[0]), lerp(d, from[1], to[1])];\n}\n\nexport function clamp(p: number, min: number, max: number): number {\n  if (p < min) return min;\n  if (p > max) return max;\n  return p;\n}\n\nexport function rgbToHex(r: number, g: number, b: number): string {\n  if (r < 0 || r > 255 || g < 0 || g > 255 || b < 0 || b > 255) throw new Error('Invalid color component');\n  return ((r << 16) | (g << 8) | b).toString(16);\n}\n\nexport function colorToIndex(r: number, g: number, b: number): number[] {\n  return [r, g];\n}\n\nexport function indexToColor(i: number, j: number): string {\n  if (i < 0 || i >= 256) throw new Error('Index out of range');\n  if (j < 0 || j >= 256) throw new Error('Index out of range');\n  return `rgb(${i}, ${j}, 0)`;\n}\n\nexport function bbox(points: number[][]) {\n  const minX = Math.min(...points.map(p => p[0]));\n  const maxX = Math.max(...points.map(p => p[0]));\n  const minY = Math.min(...points.map(p => p[1]));\n  const maxY = Math.max(...points.map(p => p[1]));\n  return {\n    sw: [minX, maxY],\n    ne: [maxX, minY],\n    w: maxX - minX,\n    h: maxY - minY,\n  };\n}\n\nexport function isCCW(ring: number[][]): boolean {\n  let signedArea = 0\n  ring.slice(0, ring.length - 1).forEach((point, i) => {\n    const [x2, y2] = ring[i + 1];\n    signedArea += (point[0] * y2 - x2 * point[1]);\n  });\n  return signedArea < 0;\n}\n\nfunction toPolyBoolPoly(geoms: Geometry[]): PolyBool.Polygon {\n  return {\n    regions: geoms.map(geom => geom.coordinates),\n    inverted: false,\n  };\n}\n\nfunction fromPolyBoolPoly(points: number[][]): Geometry {\n  return {\n    type: 'polygon',\n    coordinates: points,\n  };\n}\n\nexport function merge(geoms: Geometry[], geom: Geometry): Geometry[] {\n  const poly = PolyBool.union(toPolyBoolPoly(geoms), toPolyBoolPoly([geom]));\n  const merged = poly.regions.map(region => fromPolyBoolPoly(region));\n  merged.sort((a, b) => {\n    if (a.type === 'polygon' && b.type !== 'polygon') return -1;\n    if (b.type === 'polygon' && a.type !== 'polygon') return 1;\n    if (a.type !== 'polygon' && b.type !== 'polygon') return 0;\n    if (isCCW(a.coordinates) && isCCW(b.coordinates)) return 0;\n    if (isCCW(a.coordinates) && !isCCW(b.coordinates)) return -1;\n    return 1;\n  });\n  merged.forEach(geom => {\n    if (geom.type === 'polygon' && geom.coordinates[0] !== geom.coordinates[geom.coordinates.length - 1]) {\n      geom.coordinates.push([geom.coordinates[0][0], geom.coordinates[0][1]]);\n    }\n  })\n  return merged;\n}\n\nexport function closestPointToLine(p: number[], a: number[], b: number[]): { point: number[], distance: number } {\n  const ap = [p[0] - a[0], p[1] - a[1]]; // Line segment AP\n  const ab = [b[0] - a[0], b[1] - a[1]]; // Line segment AB\n  const ab2 = ab[0] * ab[0] + ab[1] * ab[1]; // Square magnitude of AB, ||AB||^2\n  const ap_dot_ab = ap[0] * ab[0] + ap[1] * ab[1] // Dot product, AP∙AB\n  const d = clamp(ap_dot_ab / ab2, 0, 1); // Normalized distance from A to closest point\n  const point = [a[0] + ab[0] * d, a[1] + ab[1] * d];\n  return {\n    point: point,\n    distance: dist(point, p),\n  };\n}\n\ninterface ClosestPoint {\n  point: number[]\n  line: number[]\n  distance: number\n}\n\ninterface ClosestFeature {\n  feature: number\n  geometry: number\n  closestPoint: ClosestPoint\n}\n\nexport interface DoorPlacement extends ClosestFeature {\n  from: number[]\n  to: number[]\n}\n\nexport function closestPointToPolygon(point: number[], polygon: number[][]): ClosestPoint {\n  return polygon.map((a: number[], i: number) => {\n    return {\n      ...closestPointToLine(point, a, polygon[(i + 1) % polygon.length]),\n      line: [i, (i + 1) % polygon.length],\n    };\n  }).sort((a, b) => a.distance - b.distance)[0];\n}\n\nexport function detectDoorPlacement(point: number[], features: Feature[], fullWidth: boolean): DoorPlacement | undefined {\n  const closestFeature = features.flatMap((feature, i) => {\n    return feature.geometries.flatMap((geometry, j) => {\n      if (geometry.type === 'polygon') {\n        return {\n          feature: i,\n          geometry: j,\n          closestPoint: closestPointToPolygon(point, geometry.coordinates),\n        };\n      } else if (geometry.type === 'line') {\n        return {\n          feature: i,\n          geometry: j,\n          closestPoint: {\n            ...closestPointToLine(point, geometry.coordinates[0], geometry.coordinates[1]),\n            line: [0, 1],\n          },\n        };\n      }\n      return undefined;\n    });\n  }).sort((a, b) => {\n    if (a === undefined || b === undefined) return Infinity;\n    return a.closestPoint.distance - b.closestPoint.distance;\n  })[0];\n  if (!closestFeature) return undefined;\n  return computeDoorPlacement(closestFeature, features, fullWidth);\n}\n\nfunction computeDoorPlacement(f: ClosestFeature, features: Feature[], fullWidth: boolean): DoorPlacement | undefined {\n  const geom = features[f.feature].geometries[f.geometry];\n  if (!['polygon', 'line'].includes(geom.type)) return undefined;\n  const coords = geom.coordinates;\n  const from = coords[f.closestPoint.line[0]];\n  const to = coords[f.closestPoint.line[1]];\n\n  if (fullWidth) {\n    return { ...f, from: [...from], to: [...to] };\n  }\n\n  const center = f.closestPoint.point;\n  const slope = (to[1] - from[1]) / (to[0] - from[0]);\n\n  const vdy1 = (Math.floor(center[1]) - from[1]);\n  const vdx1 = vdy1 / slope;\n  const vdy2 = (Math.ceil(center[1]) - from[1]);\n  const vdx2 = vdy2 / slope;\n\n  const hdx1 = (Math.floor(center[0]) - from[0]);\n  const hdy1 = hdx1 * slope;\n  const hdx2 = (Math.ceil(center[0]) - from[0]);\n  const hdy2 = hdx2 * slope;\n\n  const vfrom = [from[0] + vdx1, from[1] + vdy1];\n  const vto = [from[0] + vdx2, from[1] + vdy2];\n  const vdist = dist(vfrom, vto);\n\n  const hfrom = [from[0] + hdx1, from[1] + hdy1];\n  const hto = [from[0] + hdx2, from[1] + hdy2];\n  const hdist = dist(hfrom, hto);\n\n  if ((isNaN(hdist) || vdist <= hdist) && vdist > 0) {\n    return {\n      ...f,\n      from: vfrom,\n      to: vto,\n    };\n  } else if ((isNaN(vdist) || hdist < vdist) && hdist > 0) {\n    return {\n      ...f,\n      from: hfrom,\n      to: hto,\n    };\n  }\n  return undefined;\n}\n\nexport function centroid(ring: number[][]): number[] {\n  let twicearea = 0;\n  let x = 0;\n  let y = 0;\n  for (let i = 0, j = ring.length - 1; i < ring.length; j = i++) {\n    const p1 = ring[i];\n    const p2 = ring[j];\n    const f = p1[0] * p2[1] - p2[0] * p1[1];\n    twicearea += f;\n    x += (p1[0] + p2[0]) * f;\n    y += (p1[1] + p2[1]) * f;\n  }\n  const f = twicearea * 3;\n  return [x / f, y / f];\n}","import React from 'react';\nimport { produce } from 'immer';\n\nimport { DoorPlacement, isCCW, merge } from './lib';\nimport TempleOfClangeddin from './examples/Temple of Clanggedin.json';\n\nlet undoStack = [] as string[];\nlet redoStack = [] as string[];\n\nfunction modify(options?: { undoable: boolean }) {\n  return function (\n    state: State,\n    propertyKey: string,\n    descriptor: PropertyDescriptor\n  ) {\n    const modifierFn = descriptor.value;\n    descriptor.value = function () {\n      const args = Array.from(arguments);\n      (this as any).setState(produce(this, (newState: State) => {\n        const prev = JSON.stringify(newState.maps[newState.selection.mapIndex]);\n        modifierFn.bind(newState)(...args);\n        const curr = JSON.stringify(newState.maps[newState.selection.mapIndex]);\n        if (options && options.undoable && (undoStack.length === 0 || undoStack[undoStack.length - 1] !== prev) && curr !== prev) {\n          undoStack.push(prev);\n          if (undoStack.length > 100) undoStack.splice(0, undoStack.length - 100);\n        }\n        if (newState.hasOwnProperty('notifyChange')) {\n          newState.notifyChange();\n        }\n      }));\n    };\n  };\n}\n\nconst initialTools = () => ({\n  'pointer': {\n    selected: true,\n    group: 0,\n    polygon: true,\n    disabled: false,\n  },\n  'walls': {\n    selected: false,\n    group: 1,\n    polygon: true,\n    disabled: false,\n  },\n  'stairs': {\n    selected: false,\n    group: 1,\n    polygon: false,\n    disabled: false,\n  },\n  'doors': {\n    selected: false,\n    group: 1,\n    polygon: false,\n    disabled: false,\n    subtype: 'normal' as DoorType,\n  },\n  'decoration': {\n    selected: false,\n    group: 1,\n    polygon: false,\n    disabled: false,\n    subtype: 'statue' as DecorationType,\n  },\n  'brush': {\n    selected: false,\n    group: 2,\n    polygon: true,\n    disabled: false,\n  },\n  'rect': {\n    selected: false,\n    group: 2,\n    polygon: true,\n    disabled: false,\n  },\n  'polygon': {\n    selected: false,\n    group: 2,\n    polygon: true,\n    disabled: false,\n  },\n  'ellipse': {\n    selected: false,\n    group: 2,\n    polygon: true,\n    disabled: false,\n  },\n});\n\nexport type ToolName = keyof ReturnType<typeof initialTools>;\n\nexport interface Selection {\n  mapIndex: number\n  levelIndex: number\n  featureIndex: number | undefined\n  geometryIndex: number | undefined\n  ghostLevels: { [key: string]: boolean }\n}\n\nexport class State {\n  tools = initialTools()\n  scale = 1\n  offset = [0, 0]\n  maps = [TempleOfClangeddin] as Map[]\n  drawerOpen = false\n  drawerWidth = 400\n  selection: Selection = {\n    mapIndex: 0,\n    levelIndex: 0,\n    featureIndex: undefined,\n    geometryIndex: undefined,\n    ghostLevels: {},\n  }\n  gridSteps: number = 1\n  debug = false\n  showWelcome = true\n  setState = (state: any) => { }\n  notifyChange = () => { }\n\n  getSelectedFeature(): { feature: Feature, geometry: Geometry } | undefined {\n    if (this.selection.featureIndex === undefined) return undefined;\n    if (this.selection.geometryIndex === undefined) return undefined;\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const feature = level.features[this.selection.featureIndex];\n    return {\n      feature: feature,\n      geometry: feature.geometries[this.selection.geometryIndex],\n    };\n  }\n\n  export() {\n    let url = 'data:text/json;charset=utf-8,';\n    const map = this.maps[this.selection.mapIndex];\n    url += encodeURIComponent(JSON.stringify(map));\n    const a = document.createElement('a');\n    a.setAttribute(\"href\", url);\n    a.setAttribute(\"download\", `${map.name || 'Untitled Map'}.json`);\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n  }\n\n  @modify()\n  save(mapName: string) {\n    this.maps[this.selection.mapIndex].name = mapName;\n    if (this.maps[this.maps.length - 1].name !== '' || this.maps[this.maps.length - 1].levels[0].features.length > 0) {\n      this.maps.push({ name: '', description: '', levels: [{ features: [] }] });\n    }\n  }\n\n  @modify()\n  undo() {\n    if (undoStack.length === 0) return;\n    const prev = undoStack.pop();\n    if (!prev) return;\n    redoStack.push(JSON.parse(JSON.stringify(this.maps[this.selection.mapIndex])));\n    if (redoStack.length > 10) redoStack.splice(0, undoStack.length - 10);\n    this.maps[this.selection.mapIndex] = JSON.parse(prev);\n  }\n\n  @modify()\n  redo() {\n    if (redoStack.length === 0) return;\n    const prev = redoStack.pop();\n    undoStack.push(JSON.parse(JSON.stringify(this.maps[this.selection.mapIndex])));\n    if (undoStack.length > 10) undoStack.splice(0, undoStack.length - 10);\n    if (prev) this.maps[this.selection.mapIndex] = JSON.parse(prev);\n  }\n\n  @modify()\n  toggleWelcome() {\n    this.showWelcome = !this.showWelcome;\n  }\n\n  @modify()\n  newMap() {\n    undoStack = [];\n    redoStack = [];\n    if (this.maps[this.maps.length - 1].name !== '' || this.maps[this.maps.length - 1].levels[0].features.length > 0) {\n      this.maps.push({ name: '', description: '', levels: [{ features: [] }] });\n    }\n    this.selection = {\n      mapIndex: this.maps.length - 1,\n      levelIndex: 0,\n      featureIndex: undefined,\n      geometryIndex: undefined,\n      ghostLevels: {},\n    };\n    this.scale = 1;\n    this.offset = [0, 0];\n  }\n\n  @modify({ undoable: true })\n  addLevel() {\n    this.maps[this.selection.mapIndex].levels.push({\n      features: []\n    });\n    this.selection.levelIndex = this.maps[this.selection.mapIndex].levels.length - 1;\n    this.selection.featureIndex = undefined;\n    this.selection.geometryIndex = undefined;\n  }\n\n  @modify()\n  selectLevel(i: number) {\n    this.selection.levelIndex = i;\n    this.selection.featureIndex = undefined;\n    this.selection.geometryIndex = undefined;\n  }\n\n  @modify({ undoable: true })\n  removeLevel(i: number) {\n    const levels = this.maps[this.selection.mapIndex].levels;\n    if (levels.length <= 1) return;\n    levels.splice(i, 1);\n    if (this.selection.levelIndex === levels.length) {\n      this.selection.levelIndex--;\n    }\n    this.selection.featureIndex = undefined;\n    this.selection.geometryIndex = undefined;\n  }\n\n  @modify()\n  setDebug(debug: boolean) {\n    this.debug = debug;\n  }\n\n  @modify()\n  setGridSteps(gridSteps: number) {\n    this.gridSteps = gridSteps;\n  }\n\n  @modify({ undoable: true })\n  handleDrag(from: number[], to: number[]) {\n    if (from[0] === to[0] && from[1] === to[1]) return;\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (this.tools.stairs.selected) {\n      features.push({\n        properties: {\n          type: 'other',\n        },\n        geometries: [{\n          type: 'stairs',\n          coordinates: [from, to],\n        }],\n      });\n    } else if (this.tools.decoration.selected) {\n      features.push({\n        properties: {\n          type: 'other',\n        },\n        geometries: [{\n          type: 'decoration',\n          coordinates: [from, to],\n          subtype: this.tools.decoration.subtype,\n        }],\n      });\n    } else if (this.tools.rect.selected) {\n      features.push({\n        geometries: [{\n          type: 'polygon',\n          coordinates: [\n            [from[0], from[1]],\n            [to[0], from[1]],\n            [to[0], to[1]],\n            [from[0], to[1]],\n            [from[0], from[1]]\n          ],\n        }],\n        properties: {\n          type: 'room',\n        },\n      });\n    } else if (this.tools.ellipse.selected) {\n      features.push({\n        geometries: [{\n          type: 'ellipse',\n          coordinates: [from, to],\n        }],\n        properties: {\n          type: 'room',\n        },\n      });\n    } else if (this.tools.walls.selected) {\n      features.push({\n        geometries: [{\n          type: 'line',\n          coordinates: [from, to],\n        }],\n        properties: {\n          type: 'other',\n        },\n      });\n    } else if (this.selection.featureIndex !== undefined) {\n      const selection = features[this.selection.featureIndex];\n      if (selection !== undefined) {\n        const deltaDrag = [to[0] - from[0], to[1] - from[1]];\n        selection.geometries.forEach(geometry => {\n          geometry.coordinates.forEach(p => {\n            p[0] += deltaDrag[0];\n            p[1] += deltaDrag[1];\n          });\n        });\n        return;\n      }\n    }\n  }\n\n  @modify({ undoable: true })\n  handlePolygon(points: number[][]) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (!isCCW(points)) {\n      points.reverse();\n    }\n    features.push({\n      geometries: [{\n        type: 'polygon',\n        coordinates: points,\n      }],\n      properties: {\n        type: this.tools.walls.selected ? 'room' : 'other',\n      },\n    });\n  }\n\n  @modify({ undoable: true })\n  handleBrush(points: number[][]) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (this.tools.walls.selected && this.tools.brush.selected) {\n      features.push({\n        geometries: [{\n          type: 'brush',\n          coordinates: points,\n        }],\n        properties: {\n          type: 'room',\n        },\n      });\n    }\n  }\n\n  @modify({ undoable: true })\n  handleDelete() {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (this.selection.featureIndex === undefined) return;\n    if (this.selection.geometryIndex === undefined) return;\n    const feature = features[this.selection.featureIndex];\n    if (this.selection.geometryIndex === 0 || feature.geometries.length === 1) {\n      features.splice(this.selection.featureIndex, 1);\n    } else {\n      feature.geometries.splice(this.selection.geometryIndex, 1);\n    }\n    this.selection.featureIndex = undefined;\n    this.selection.geometryIndex = undefined;\n  }\n\n  @modify({ undoable: true })\n  addDoor(door: DoorPlacement) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const feature = level.features[door.feature];\n    feature.geometries.push({\n      type: 'door',\n      coordinates: [door.from, door.to],\n      subtype: this.tools.doors.subtype,\n    });\n  }\n\n  @modify({ undoable: true })\n  handleGroup(featureIndex: number, geometryIndex: number) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (this.selection.featureIndex === undefined) return;\n    if (this.selection.geometryIndex === undefined) return;\n    const selectedFeature = features[this.selection.featureIndex];\n    if (this.selection.featureIndex === featureIndex) {\n      if (selectedFeature.geometries.length === 1) return;\n      const geom = selectedFeature.geometries[geometryIndex];\n      selectedFeature.geometries.splice(geometryIndex, 1);\n      features.push({\n        properties: {\n          type: ['polygon', 'ellipse'].includes(geom.type) ? 'room' : 'other',\n        },\n        geometries: [geom],\n      });\n    } else {\n      const geom1 = selectedFeature.geometries.find(geom => geom.type === 'polygon');\n      const geom2 = features[featureIndex].geometries[geometryIndex];\n      if (geom1 && geom2.type === 'polygon') {\n        const mergedGeoms = merge(selectedFeature.geometries.filter(geom => geom.type === 'polygon'), geom2);\n        const prevGeoms = selectedFeature.geometries.filter(geom => geom.type !== 'polygon');\n        selectedFeature.geometries = prevGeoms.concat(mergedGeoms);\n      } else {\n        selectedFeature.geometries = selectedFeature.geometries.concat(features[featureIndex].geometries);\n      }\n      features.splice(featureIndex, 1);\n      if (this.selection.featureIndex > featureIndex) this.selection.featureIndex--;\n    }\n  }\n\n  @modify()\n  setSelectedTool(name: ToolName) {\n    const tool = this.tools[name];\n    if (tool.selected) {\n      tool.selected = false;\n      return;\n    }\n    if (tool.group === 0) {\n      Object.values(this.tools).forEach(t => {\n        t.selected = false;\n      });\n      tool.selected = true;\n      return;\n    } else {\n      Object.values(this.tools).forEach(t => {\n        if (t.group === 0) t.selected = false;\n      });\n    }\n    Object.values(this.tools).forEach(t => {\n      if (t.group === tool.group) t.selected = false;\n    });\n    if (!tool.polygon) {\n      Object.values(this.tools).forEach(t => {\n        if (t.group === 2) {\n          t.selected = false;\n          t.disabled = true;\n        }\n      });\n    } else {\n      Object.values(this.tools).forEach(t => {\n        if (t.group === 2) {\n          t.disabled = false;\n        }\n      });\n    }\n    tool.selected = true;\n  }\n\n  @modify()\n  setToolOption(name: ToolName, option: string) {\n    const tool = this.tools[name];\n    (tool as any).subtype = option;\n  }\n\n  @modify()\n  setSelection(selection: Selection) {\n    if (selection.mapIndex !== this.selection.mapIndex) {\n      undoStack = [];\n      redoStack = [];\n    }\n    this.selection = selection;\n  }\n\n  @modify()\n  setOffset(offset: number[]) {\n    this.offset = offset;\n  }\n\n  @modify()\n  setZoom(scale: number, offset: number[]) {\n    this.scale = scale;\n    this.offset = offset;\n  }\n\n  @modify()\n  setDrawerOpen(open: boolean) {\n    this.drawerOpen = open;\n  }\n\n  @modify()\n  setDrawerWidth(width: number) {\n    this.drawerWidth = width;\n  }\n\n  @modify()\n  setMapDescription(desc: Description) {\n    this.maps[this.selection.mapIndex].name = desc.name;\n    this.maps[this.selection.mapIndex].description = desc.description;\n  }\n\n  @modify()\n  setLevelDescription(desc: Description) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    level.name = desc.name;\n    level.description = desc.description;\n  }\n\n  @modify()\n  setFeatureDescription(desc: Description | undefined) {\n    if (this.selection.featureIndex === undefined) return;\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const feature = level.features[this.selection.featureIndex];\n    Object.assign(feature.properties, desc);\n  }\n\n  @modify()\n  setFeatureOrder(sourceIndex: number, destIndex: number) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const [removed] = level.features.splice(sourceIndex, 1);\n    level.features.splice(destIndex, 0, removed);\n  }\n\n  @modify()\n  reset() {\n    Object.assign(this, new State());\n  }\n}\n\nexport interface Map extends Description {\n  levels: Level[]\n}\n\nexport type Geometry = Polygon | Ellipse | Line | Brush | Door | Stairs | Decoration\n\nexport interface Polygon {\n  type: 'polygon'\n  coordinates: number[][]\n}\n\nexport interface Ellipse {\n  type: 'ellipse'\n  coordinates: number[][]\n}\n\nexport interface Line {\n  type: 'line'\n  coordinates: number[][]\n}\n\nexport interface Brush {\n  type: 'brush'\n  coordinates: number[][]\n}\n\nexport type DoorType = 'normal' | 'secret'\n\nexport interface Door {\n  type: 'door'\n  coordinates: number[][]\n  subtype: DoorType\n}\n\nexport interface Stairs {\n  type: 'stairs'\n  coordinates: number[][]\n}\n\nexport type DecorationType = 'statue' | 'column' | 'stalacmite';\n\nexport interface Decoration {\n  type: 'decoration'\n  coordinates: number[][]\n  subtype: DecorationType\n}\n\nexport type FeatureType = 'room' | 'text' | 'other'\n\nexport interface FeatureProperties extends Description {\n  type: FeatureType\n}\n\nexport interface Feature {\n  geometries: Geometry[]\n  properties: FeatureProperties\n}\n\nexport interface Level extends Description {\n  features: Feature[]\n}\n\nexport interface Description {\n  name?: string\n  description?: string\n}\n\nexport const Context = React.createContext(new State());\n","import { css } from 'astroturf';\n\nexport const DS = css`\n  .button {\n    background: transparent;\n    border: none;\n    outline: none;\n    margin: 4px;\n    padding: 8px 12px;\n    color: white;\n    font-size: 18px;\n    font-weight: 600;\n    box-sizing: border-box;\n    border-radius: 2px;\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\n  }\n\n  .button:hover {\n    background: #505050;\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\n  }\n\n  .button:active {\n    outline: none;\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\n  }\n\n  .buttonSmall {\n    background: transparent;\n    border: none;\n    outline: none;\n    margin: 4px;\n    color: white;\n    font-size: 18px;\n    font-weight: 600;\n    box-sizing: border-box;\n    border-radius: 2px;\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\n  }\n\n  .buttonSmall:hover {\n    background: #505050;\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\n  }\n\n  .buttonSmall:active {\n    outline: none;\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\n  }\n\n  .danger {\n    background: #A20B25;\n  }\n\n  .danger:hover {\n    background: #a03e4e;\n  }\n\n  .input {\n    font-size: 18px;\n    background: transparent;\n    color: white;\n    border: none;\n    border-bottom: 1px solid white;\n    padding: 4px;\n    margin: 4px;\n    margin-bottom: 1px;\n  }\n  \n  .input:focus {\n    outline: none;\n    border-bottom: 2px solid white;\n    margin-bottom: 0px;\n  }\n\n  .toolbar {\n    display: flex;\n    flex-direction: column;\n    background: #000;\n    border-radius: 12px;\n    padding: 8px;\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\n    color: white;\n  }\n  .toolbar svg {\n    color: white;\n    font-size: 24px;\n  }\n  .toolbar .selected svg {\n    color: black;\n  }\n  .toolbar button {\n    background: black;\n    width: 50px;\n    height: 50px;\n    border: 1px solid white;\n    outline: none;\n    margin: 4px;\n  }\n  .toolbar button:hover {\n    background: #505050;\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\n  }\n  .toolbar button:active {\n    outline: none;\n    border: none;\n    scale: 0.9;\n  }\n  .toolbar button.selected {\n    background: #bbb;\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\n  }\n  .toolbar button[disabled] {\n    background: #444;\n    box-shadow: none;\n  }\n`;","import React, { useContext } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport classNames from 'classnames';\nimport { css } from 'astroturf';\nimport { faMinus, faPlus } from '@fortawesome/free-solid-svg-icons';\n\nimport { DS } from './design_system';\nimport { Context } from './State';\nimport { clamp } from './lib';\nimport { CanvasRenderer } from './Canvas';\n\nconst classes = css`\n  .zoom button {\n    background: black;\n    width: 24px;\n    height: 24px;\n    border: 1px solid white;\n    outline: none;\n    margin: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n  }\n  .zoom svg {\n    color: white;\n    font-size: 12px;\n  }\n  .zoom button:hover {\n    background: #505050;\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\n  }\n  .zoom button:active {\n    outline: none;\n    border: none;\n    scale: 0.9;\n  }\n`;\n\nexport default function Zoom(props: { renderer?: CanvasRenderer }) {\n  const state = useContext(Context);\n  const zoom = (mult: number) => () => {\n    const renderer = props.renderer;\n    if (!renderer) return;\n    const { scale, offset } = state;\n    const newScale = clamp(scale * mult, 0.2, 4);\n    const mid = [renderer.canvas.width / 2, renderer.canvas.height / 2];\n    const worldPos = renderer.canvasToWorld(mid);\n    const newWorldPos = [mid[0] / newScale - offset[0], mid[1] / newScale - offset[1]];\n    const newOffset = [\n      offset[0] - (worldPos[0] - newWorldPos[0]),\n      offset[1] - (worldPos[1] - newWorldPos[1])\n    ];\n    window.requestAnimationFrame(() => {\n      state.setZoom(newScale, newOffset);\n    });\n  }\n  return <div className={classNames(DS.toolbar, classes.zoom)} style={{ position: 'absolute', top: '50px', right: '50px' }}>\n    <button onClick={zoom(1.1)}><FontAwesomeIcon icon={faPlus}></FontAwesomeIcon></button>\n    <button onClick={zoom(0.9)}><FontAwesomeIcon icon={faMinus}></FontAwesomeIcon></button>\n  </div>;\n}","import React, { useContext, useEffect, useRef, useState } from 'react';\nimport seedrandom from 'seedrandom';\n\nimport {\n  bbox,\n  centroid,\n  colorToIndex,\n  detectDoorPlacement,\n  dist,\n  indexToColor,\n  isCCW,\n  lerp,\n  lerp2,\n} from './lib';\nimport { Context, DecorationType, DoorType, Geometry, Level, State } from './State';\nimport Zoom from './Zoom';\n\nconst backgroundColor = '#D9D2BF';\nconst floorColor = '#F1ECE0';\nconst wallColor = '#000';\nconst selectionFillColor = '#2f557466';\nconst selectionStrokeColor = '#2f5574';\nconst dragFillColor = '#2f557466';\nconst dragStrokeColor = '#2f5574';\nconst hoverFillColor = '#668dad66';\nconst hoverStrokeColor = '#668dad';\nconst pointColor = '#fff238';\nconst specialColors = [\n  selectionFillColor, selectionStrokeColor,\n  dragFillColor, dragStrokeColor,\n  hoverFillColor, hoverStrokeColor,\n];\n\nexport class CanvasRenderer {\n  mouse?: number[] = undefined\n  mouseDown: boolean = false\n  drag?: {\n    start: number[]\n    end: number[]\n  }\n  specialKeys = {\n    shift: false,\n    alt: false,\n    ctrl: false,\n    space: false,\n  }\n  points: number[][] = []\n  polygonToolSelected: boolean = false\n  hover?: {\n    featureIndex: number | undefined\n    geometryIndex: number | undefined\n  }\n  size: number = 30\n  fps: number = 0\n  requestID?: number\n  appState = new State()\n  canvas: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  bufferCanvas: HTMLCanvasElement\n  bufferCtx: CanvasRenderingContext2D\n  dirty: Date = new Date()\n  mode: 'edit' | 'print'\n  level?: number\n\n  constructor(canvas: HTMLCanvasElement, mode: 'edit' | 'print', level?: number) {\n    const ctx = canvas.getContext('2d', { alpha: true });\n    if (ctx === null) {\n      throw new Error('canvas has null rendering context');\n    }\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.requestID = requestAnimationFrame(this.render);\n\n    this.bufferCanvas = document.createElement('canvas');\n    this.bufferCanvas.width = this.canvas.width;\n    this.bufferCanvas.height = this.canvas.height;\n    const bufferCtx = this.bufferCanvas.getContext('2d', { alpha: true });\n    if (bufferCtx === null) {\n      throw new Error('canvas has null rendering context');\n    }\n    this.bufferCtx = bufferCtx;\n    this.mode = mode;\n    this.level = level;\n  }\n\n  attachListeners() {\n    if (this.mode === 'print') return;\n    this.canvas.addEventListener('touchstart', this.onMouseDown);\n    this.canvas.addEventListener('mousedown', this.onMouseDown);\n    this.canvas.addEventListener('mouseup', this.onMouseUp);\n    this.canvas.addEventListener('touchend', this.onMouseUp);\n    this.canvas.addEventListener('mousemove', this.onMouseMove);\n    this.canvas.addEventListener('touchmove', this.onMouseMove);\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n    window.addEventListener('wheel', this.onWheel, { passive: false });\n  }\n\n  detachListeners() {\n    if (this.mode === 'print') return;\n    this.canvas.removeEventListener('mousedown', this.onMouseDown);\n    this.canvas.removeEventListener('mouseup', this.onMouseUp);\n    this.canvas.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n    window.removeEventListener('wheel', this.onWheel);\n  }\n\n  onMouseDown = (e: MouseEvent | TouchEvent) => {\n    this.dirty = new Date();\n    this.mouseDown = true;\n    const { mouse } = this;\n    if (e instanceof MouseEvent && e.button === 2) return;\n    if (mouse) {\n      this.drag = {\n        start: this.canvasToTile(mouse),\n        end: this.canvasToTile(mouse),\n      };\n    }\n    if (this.appState.tools.pointer.selected) {\n      const selectedFeatureIndex = this.appState.selection.featureIndex;\n      const hoverFeatureIndex = this.hover?.featureIndex;\n      const hoverGeometryIndex = this.hover?.geometryIndex;\n      if (e.shiftKey && selectedFeatureIndex !== undefined && hoverFeatureIndex !== undefined && hoverGeometryIndex !== undefined) {\n        this.appState.handleGroup(hoverFeatureIndex, hoverGeometryIndex);\n      } else {\n        this.appState.setSelection({\n          ...this.appState.selection,\n          featureIndex: this.hover?.featureIndex,\n          geometryIndex: this.hover?.geometryIndex,\n        });\n      }\n    } else if (this.appState.tools.doors.selected && mouse) {\n      const door = detectDoorPlacement(\n        this.worldToTile(this.canvasToWorld(mouse), false),\n        this.appState.maps[this.appState.selection.mapIndex].levels[this.appState.selection.levelIndex].features,\n        e.shiftKey);\n      if (door) this.appState.addDoor(door);\n    }\n  }\n\n  onMouseUp = () => {\n    this.dirty = new Date();\n    this.mouseDown = false;\n    if (this.mouse && this.appState.tools.polygon.selected) {\n      const pos = this.canvasToTile(this.mouse);\n      if (this.points.length >= 1 && dist(this.points[0], pos) < 1) {\n        this.appState.handlePolygon(this.points);\n        this.points = [];\n      } else {\n        this.points.push(pos);\n      }\n    } else if (this.appState.tools.brush.selected) {\n      this.appState.handleBrush(this.points);\n      this.points = [];\n      this.drag = undefined;\n    } else if (this.drag) {\n      let [from, to] = [this.drag.start, this.drag.end];\n      if (\n        this.appState.tools.rect.selected ||\n        this.appState.tools.ellipse.selected) {\n        const bounds = bbox([from, to]);\n        from = bounds.sw;\n        to = bounds.ne;\n      }\n      this.appState.handleDrag(from, to);\n      this.drag = undefined;\n      this.points = [];\n    }\n  }\n\n  onMouseMove = (event: MouseEvent | TouchEvent) => {\n    this.dirty = new Date();\n    if ('touches' in event && event.target) {\n      const rect = (event.target as HTMLElement).getBoundingClientRect();\n      this.mouse = [event.touches[0].clientX - rect.left, event.touches[0].clientY - rect.top];\n    } else if ('offsetX' in event) {\n      this.mouse = [event.offsetX, event.offsetY];\n    }\n    if (this.mouse && this.mouseDown && this.drag) {\n      if (this.specialKeys.space) {\n        const end = this.canvasToWorld(this.mouse);\n        const delta = [(this.drag.start[0] * this.size) - end[0], (this.drag.start[1] * this.size) - end[1]];\n        let newOffset = this.appState.offset;\n        newOffset[0] -= delta[0];\n        newOffset[1] -= delta[1];\n        this.drag.start = this.canvasToTile(this.mouse);\n        this.drag.end = this.canvasToTile(this.mouse);\n        window.requestAnimationFrame(() => {\n          this.appState.setOffset(newOffset);\n        });\n      } else {\n        this.drag.end = this.canvasToTile(this.mouse);\n        if (this.appState.tools.brush.selected) {\n          this.points.push(this.worldToTile(this.canvasToWorld(this.mouse), false));\n        }\n      }\n    }\n  }\n\n  onWheel = (event: WheelEvent) => {\n    if (event.x === undefined || event.y === undefined || document.elementFromPoint(event.x, event.y) !== this.canvas) return;\n    event.stopPropagation();\n    event.preventDefault();\n    this.dirty = new Date();\n    const { mouse } = this;\n    const { scale, offset } = this.appState;\n    if (!mouse) return;\n    offset[0] -= event.deltaX * scale;\n    offset[1] -= event.deltaY * scale;\n    window.requestAnimationFrame(() => {\n      this.appState.setOffset(offset);\n    });\n  }\n\n  onKeyDown = (event: KeyboardEvent) => {\n    this.dirty = new Date();\n    if (event.key === 'Shift') this.specialKeys.shift = true;\n    if (event.key === 'Control') this.specialKeys.ctrl = true;\n    if (event.key === 'Alt') this.specialKeys.alt = true;\n    if (document.activeElement !== document.body) return;\n    const { appState } = this;\n    if (event.key === 'Backspace' || event.key === 'Delete') {\n      appState.handleDelete();\n    }\n    if (event.key === 'z' && this.specialKeys.ctrl) appState.undo();\n    if (event.key === 'y' && this.specialKeys.ctrl) appState.redo();\n    if (event.key === ' ') {\n      this.canvas.style.cursor = \"pointer\";\n      this.specialKeys.space = true;\n      event.preventDefault();\n    }\n  }\n\n  onKeyUp = (event: KeyboardEvent) => {\n    this.dirty = new Date();\n    if (event.key === 'Shift') this.specialKeys.shift = false;\n    if (event.key === 'Control') this.specialKeys.ctrl = false;\n    if (event.key === 'Alt') this.specialKeys.alt = false;\n    if (event.key === ' ') {\n      this.canvas.style.cursor = \"auto\";\n      this.specialKeys.space = false;\n    }\n  }\n\n  // canvas coordinates to world coordinates\n  canvasToWorld = (p: number[]): number[] => {\n    const { offset, scale } = this.appState;\n    return [p[0] / scale - offset[0], p[1] / scale - offset[1]];\n  }\n\n  // world coordinates to canvas coordinates\n  worldToCanvas = (p: number[]): number[] => {\n    const { offset, scale } = this.appState;\n    return [(p[0] + offset[0]) * scale, (p[1] + offset[1]) * scale];\n  }\n\n  // world coordinates to tile coordinates\n  worldToTile = (p: number[], round = true): number[] => {\n    if (round) {\n      const S = this.size / this.appState.gridSteps;\n      return [Math.round(p[0] / S) / this.appState.gridSteps, Math.round(p[1] / S) / this.appState.gridSteps];\n    }\n    return [p[0] / this.size, p[1] / this.size];\n  }\n\n  canvasToTile = (p: number[]) => {\n    return this.worldToTile(this.canvasToWorld(p));\n  }\n\n  renderTextCenter(text: string, font: string) {\n    this.ctx.font = font;\n    const m = this.ctx.measureText(text);\n    let h = m.actualBoundingBoxAscent + m.actualBoundingBoxDescent;\n    this.ctx.fillText(text, -m.width / 2, h);\n  }\n\n  renderFPS(time: number) {\n    const fps = this.fps.toFixed(0);\n    this.ctx.save();\n    this.ctx.translate(this.canvas.width - 48, 12);\n    this.ctx.fillStyle = '#000';\n    this.renderTextCenter(fps, \"18px Roboto Mono, monospace\");\n    this.ctx.restore();\n  }\n\n  clearScreen() {\n    const { canvas, ctx, bufferCanvas } = this;\n    if (this.mode === 'edit') {\n      ctx.fillStyle = backgroundColor;\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n    } else {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n    if (bufferCanvas.width !== canvas.width || bufferCanvas.height !== canvas.height) {\n      bufferCanvas.width = canvas.width;\n      bufferCanvas.height = canvas.height;\n    }\n  }\n\n  drawGrid() {\n    const { canvas, ctx } = this;\n    const iT = ctx.getTransform().inverse();\n    const min = iT.transformPoint({ x: 0, y: 0 });\n    const max = iT.transformPoint({ x: canvas.width, y: canvas.height });\n    ctx.lineWidth = 0.01;\n    ctx.strokeStyle = '#000';\n    for (let x = Math.floor(min.x); x <= max.x; x++) {\n      ctx.beginPath();\n      ctx.moveTo(x, min.y);\n      ctx.lineTo(x, max.y);\n      ctx.stroke();\n    }\n    for (let y = Math.floor(min.y); y <= max.y; y++) {\n      ctx.beginPath();\n      ctx.moveTo(min.x, y);\n      ctx.lineTo(max.x, y);\n      ctx.stroke();\n    }\n    if (this.appState.gridSteps !== 1 && this.mode === 'edit') {\n      ctx.lineWidth = 0.005;\n      ctx.strokeStyle = '#666666';\n      for (let x = Math.floor(min.x); x <= max.x; x += 1 / this.appState.gridSteps) {\n        ctx.beginPath();\n        ctx.moveTo(x, min.y);\n        ctx.lineTo(x, max.y);\n        ctx.stroke();\n      }\n      for (let y = Math.floor(min.y); y <= max.y; y += 1 / this.appState.gridSteps) {\n        ctx.beginPath();\n        ctx.moveTo(min.x, y);\n        ctx.lineTo(max.x, y);\n        ctx.stroke();\n      }\n    }\n  }\n\n  drawMousePos(mouse: number[]) {\n    const { ctx } = this;\n    ctx.save();\n    const p = this.worldToTile(this.canvasToWorld(mouse), true);\n    ctx.fillStyle = '#000';\n    ctx.beginPath();\n    ctx.arc(p[0], p[1], 0.1, 0, 2 * Math.PI);\n    ctx.fill();\n\n    if (this.appState.debug) {\n      const font = \"0.5px Roboto, sans-serif\";\n      ctx.translate(p[0], p[1] - 1);\n      this.renderTextCenter(`Mouse: ${mouse[0].toFixed(0)},${mouse[1].toFixed(0)}`, font);\n      ctx.translate(0, -0.5);\n      this.renderTextCenter(`Tile: ${p[0].toFixed(0)},${p[1].toFixed(0)}`, font);\n    }\n    ctx.restore();\n  }\n\n  drawDrag() {\n    const { drag, appState } = this;\n    if (!drag) return;\n    const { start, end } = drag;\n    if (dist(start, end) > 1 && appState.tools.rect.selected) {\n      this.drawGeometry(\n        { type: 'polygon', coordinates: [start, [start[0], end[1]], end, [end[0], start[1]]] },\n        dragFillColor, dragStrokeColor);\n    } else if (dist(start, end) > 1 && appState.tools.stairs.selected) {\n      this.drawStairs([start, end], dragFillColor, dragStrokeColor);\n    } else if (dist(start, end) > 1 && appState.tools.decoration.selected) {\n      this.drawDecoration(appState.tools.decoration.subtype, [start, end], dragFillColor, dragStrokeColor);\n    } else if (dist(start, end) > 1 && appState.tools.ellipse.selected) {\n      const box = bbox([start, end]);\n      this.drawEllipse([box.sw, box.ne], dragFillColor, dragStrokeColor);\n    } else {\n      this.drawLine([start, end], 0.1, dragStrokeColor);\n    }\n  }\n\n  drawGeometry(geometry: Geometry, fillColor?: string, strokeColor?: string, indexColor?: string) {\n    if (geometry.type === 'polygon') {\n      this.drawPolygon(geometry.coordinates, fillColor || indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'ellipse') {\n      this.drawEllipse(geometry.coordinates, fillColor || indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'line') {\n      this.drawLine(geometry.coordinates, indexColor !== undefined ? 0.5 : 0.1, strokeColor || indexColor);\n    } else if (geometry.type === 'brush') {\n      this.drawBrush(geometry.coordinates, fillColor || indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'door') {\n      this.drawDoor(geometry.subtype, geometry.coordinates, fillColor || indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'stairs') {\n      this.drawStairs(geometry.coordinates, indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'decoration') {\n      this.drawDecoration(geometry.subtype, geometry.coordinates, indexColor, strokeColor || indexColor);\n    }\n  }\n\n  drawPolygon(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    this.pathPoints(points, true);\n    if (fillColor) {\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n    if (fillColor && specialColors.includes(fillColor)) {\n      this.drawPoints(points);\n      const box = bbox(points);\n      ctx.fillStyle = '#000';\n      ctx.save();\n      ctx.translate(box.sw[0] + box.w / 2, box.ne[1] - 1);\n      this.renderTextCenter(`${box.w * 5}ft x ${box.h * 5}ft`, \"1px Roboto, sans-serif\");\n      ctx.restore();\n    }\n  }\n\n  drawEllipse(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    this.pathEllipse(points, true);\n    if (fillColor) {\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n    if (fillColor && specialColors.includes(fillColor)) {\n      const box = bbox(points);\n      this.drawPoints([box.sw, [box.sw[0], box.ne[1]], box.ne, [box.ne[0], box.sw[1]]]);\n      ctx.fillStyle = '#000';\n      ctx.save();\n      ctx.translate(box.sw[0] + box.w / 2, box.ne[1] - 1);\n      this.renderTextCenter(`${box.w * 5}ft x ${box.h * 5}ft`, \"1px Roboto, sans-serif\");\n      ctx.restore();\n    }\n  }\n\n  drawLine(points: number[][], width: number, strokeColor?: string) {\n    const { ctx } = this;\n    this.pathPoints(points);\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineWidth = width;\n      ctx.stroke();\n    }\n  }\n\n  drawBrush(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    this.pathPoints(points);\n    if (fillColor) {\n      ctx.strokeStyle = fillColor;\n      ctx.lineJoin = 'round';\n      ctx.lineCap = 'round';\n      ctx.lineWidth = 0.9;\n      ctx.stroke();\n    }\n    this.ctx.globalCompositeOperation = 'destination-over';\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineJoin = 'round';\n      ctx.lineCap = 'round';\n      ctx.lineWidth = 1.1;\n      ctx.stroke();\n    }\n    this.ctx.globalCompositeOperation = 'source-over';\n    if (fillColor && specialColors.includes(fillColor)) {\n      this.drawPoints(points, 0.1);\n    }\n  }\n\n  drawDoor(type: DoorType, points: number[][], fillColor?: string, strokeColor?: string) {\n    switch (type) {\n      case 'normal':\n        this.drawNormalDoor(points, fillColor, strokeColor);\n        break;\n      case 'secret':\n        this.drawSecretDoor(points, fillColor, strokeColor);\n        break;\n      default:\n        throw new Error(`unsupported door type ${type}`);\n    }\n  }\n\n  drawNormalDoor(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    const [from, to] = points;\n    const a = lerp2(0.1, from, to);\n    const b = lerp2(0.9, from, to);\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineCap = 'butt';\n      ctx.lineWidth = 0.1;\n      ctx.beginPath();\n      ctx.moveTo(from[0], from[1]);\n      ctx.lineTo(to[0], to[1]);\n      ctx.stroke();\n      ctx.lineWidth = 0.3;\n      ctx.beginPath();\n      ctx.moveTo(a[0], a[1]);\n      ctx.lineTo(b[0], b[1]);\n      ctx.stroke();\n    }\n  }\n\n  drawSecretDoor(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    const [from, to] = points;\n    if (strokeColor) {\n      const l = Math.max(Math.abs(from[0] - to[0]), Math.abs(from[1] - to[1]));\n      ctx.font = `${l}px Helvetica`;\n      const m = this.ctx.measureText('S');\n      let h = m.actualBoundingBoxAscent + m.actualBoundingBoxDescent;\n      let w = m.actualBoundingBoxLeft - m.actualBoundingBoxRight;\n      const [cx, cy] = [w / 2, h / 2];\n      ctx.save();\n      ctx.fillStyle = strokeColor;\n      ctx.fillText('S', from[0] + (to[0] - from[0]) / 2 + cx, from[1] + (to[1] - from[1]) / 2 + cy);\n      ctx.restore();\n    }\n  }\n\n  drawStairs(points: number[][], fillColor?: string, strokeColor?: string) {\n    if (!strokeColor) return;\n    const { ctx } = this;\n    const [from, to] = points;\n    const w = Math.abs(to[0] - from[0]);\n    const h = Math.abs(to[1] - from[1]);\n    const sx = Math.sign(to[0] - from[0]);\n    const sy = Math.sign(to[1] - from[1]);\n    const L = Math.max(w, h);\n    const W = Math.min(w, h);\n    ctx.strokeStyle = strokeColor;\n    ctx.lineWidth = 0.1;\n    ctx.lineCap = 'butt';\n    for (let i = 0; i < L; i += 0.5) {\n      const l = lerp(i / (L + .5), 0.1, W);\n      ctx.beginPath();\n      if (w > h) {\n        ctx.moveTo(from[0] + i * sx, Math.min(from[1], to[1]) + (W - l) / 2);\n        ctx.lineTo(from[0] + i * sx, Math.min(from[1], to[1]) + (W - l) / 2 + l);\n      } else {\n        ctx.moveTo(Math.min(from[0], to[0]) + (W - l) / 2, from[1] + i * sy);\n        ctx.lineTo(Math.min(from[0], to[0]) + (W - l) / 2 + l, from[1] + i * sy);\n      }\n      ctx.stroke();\n    }\n    ctx.lineWidth = 0.05;\n    ctx.beginPath();\n    if (w > h) {\n      ctx.moveTo(from[0], from[1]);\n      ctx.lineTo(to[0], from[1]);\n      ctx.lineTo(to[0], to[1]);\n      ctx.lineTo(from[0], to[1]);\n    } else {\n      ctx.moveTo(from[0], from[1]);\n      ctx.lineTo(from[0], to[1]);\n      ctx.lineTo(to[0], to[1]);\n      ctx.lineTo(to[0], from[1]);\n    }\n    ctx.stroke();\n    if (fillColor) {\n      ctx.closePath();\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    if (strokeColor && specialColors.includes(strokeColor)) {\n      this.drawPoints(points);\n    }\n  }\n\n  drawDecoration(type: DecorationType, points: number[][], fillColor?: string, strokeColor?: string) {\n    switch (type) {\n      case 'statue':\n        this.drawStatue(points, fillColor, strokeColor);\n        break;\n      case 'column':\n        this.drawColumn(points, fillColor, strokeColor);\n        break;\n      case 'stalacmite':\n        this.drawStalacmite(points, fillColor, strokeColor);\n        break;\n      default:\n        throw new Error(`unsupported decoration type ${type}`);\n    }\n  }\n\n  drawStatue(points: number[][], fillColor?: string, strokeColor?: string) {\n    if (!strokeColor) return;\n    const { ctx } = this;\n    const [from, to] = points;\n    const r = Math.max(Math.abs(to[0] - from[0]), Math.abs(to[1] - from[1])) / 2;\n    const [cx, cy] = [from[0] + r, from[1] + r];\n    ctx.strokeStyle = strokeColor;\n    ctx.lineWidth = 0.05;\n    ctx.beginPath();\n    ctx.ellipse(cx, cy, r, r, 0, 0, 2 * Math.PI);\n    ctx.stroke();\n    if (fillColor) {\n      ctx.closePath();\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    const r2 = r * 0.4;\n    ctx.beginPath();\n    let theta = -0.1 * Math.PI;\n    for (let i = 0; i < 10; i++) {\n      if (i === 0) {\n        ctx.moveTo(cx + r * Math.cos(theta), cy + r * Math.sin(theta));\n      } else {\n        ctx.lineTo(cx + r * Math.cos(theta), cy + r * Math.sin(theta));\n      }\n      theta += 0.2 * Math.PI;\n      ctx.lineTo(cx + r2 * Math.cos(theta), cy + r2 * Math.sin(theta));\n      theta += 0.2 * Math.PI;\n    }\n    ctx.closePath();\n    ctx.fillStyle = strokeColor;\n    ctx.fill();\n    if (strokeColor && specialColors.includes(strokeColor)) {\n      this.drawPoints(points);\n    }\n  }\n\n  drawColumn(points: number[][], fillColor?: string, strokeColor?: string) {\n    if (!strokeColor) return;\n    const { ctx } = this;\n    const [from, to] = points;\n    const r = Math.max(Math.abs(to[0] - from[0]), Math.abs(to[1] - from[1])) / 2;\n    const [cx, cy] = [from[0] + r, from[1] + r];\n    ctx.fillStyle = strokeColor;\n    ctx.lineWidth = 0.05;\n    ctx.beginPath();\n    ctx.ellipse(cx, cy, r, r, 0, 0, 2 * Math.PI);\n    ctx.fill();\n    if (strokeColor && specialColors.includes(strokeColor)) {\n      this.drawPoints(points);\n    }\n  }\n\n  drawStalacmite(points: number[][], fillColor?: string, strokeColor?: string) {\n    if (!strokeColor) return;\n    const { ctx } = this;\n    const [from, to] = points;\n    const rng = seedrandom(`(${from[0]},${from[1]}),(${to[0]},${to[1]})`);\n    const r = Math.max(Math.abs(to[0] - from[0]), Math.abs(to[1] - from[1])) / 2;\n    const [cx, cy] = [from[0] + r, from[1] + r];\n    ctx.strokeStyle = strokeColor;\n    ctx.lineWidth = 0.1;\n    ctx.beginPath();\n    let currRadius = r * Math.max(0.5, rng());\n    let theta = -0.1 * Math.PI;\n    for (let i = 0; i < 20; i++) {\n      if (i === 0) {\n        ctx.moveTo(cx + currRadius * Math.cos(theta), cy + currRadius * Math.sin(theta));\n      } else {\n        ctx.lineTo(cx + currRadius * Math.cos(theta), cy + currRadius * Math.sin(theta));\n      }\n      theta += rng() * 0.2 * Math.PI;\n      if (theta + 0.1 * Math.PI >= 2 * Math.PI) break;\n      if (rng() < 0.5) currRadius += rng() * 0.3;\n      else currRadius -= rng() * 0.3;\n      currRadius = Math.max(0, Math.min(r, currRadius));\n    }\n    ctx.closePath();\n    ctx.stroke();\n    if (fillColor) {\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    if (strokeColor && specialColors.includes(strokeColor)) {\n      this.drawPoints(points);\n    }\n  }\n\n  drawPoints(points: number[][], size: number = 0.25) {\n    const { ctx } = this;\n    ctx.fillStyle = pointColor;\n    ctx.strokeStyle = 'black';\n    ctx.lineWidth = 0.05;\n    for (let i = 0; i < points.length; i++) {\n      ctx.beginPath();\n      ctx.ellipse(points[i][0], points[i][1], size, size, 0, 0, 2 * Math.PI);\n      ctx.fill();\n      ctx.stroke();\n    }\n  }\n\n  pathPoints(points: number[][], close: boolean = false) {\n    const { ctx } = this;\n    ctx.beginPath();\n    ctx.moveTo(points[0][0], points[0][1]);\n    for (let i = 0; i < points.length; i++) {\n      ctx.lineTo(points[i][0], points[i][1]);\n    }\n    if (close) ctx.closePath();\n  }\n\n  pathEllipse(points: number[][], close: boolean = false) {\n    const { ctx } = this;\n    const [a, b] = points;\n    ctx.beginPath();\n    ctx.ellipse(a[0] + (b[0] - a[0]) / 2, a[1] + (b[1] - a[1]) / 2, (b[0] - a[0]) / 2, (a[1] - b[1]) / 2, 0, 0, 2 * Math.PI);\n    if (close) ctx.closePath();\n  }\n\n  drawFeatures(level: Level, colorIndex: boolean = false) {\n    const featureDrawOrder = ['room', 'other', 'text'];\n    const geometryDrawOrder = ['polygon', 'ellipse', 'line', 'brush', 'door', 'stairs', 'decoration'];\n    featureDrawOrder.forEach(featureType => {\n      geometryDrawOrder.forEach(geometryType => {\n        level.features.forEach((feature, i) => {\n          if (feature.properties.type !== featureType) return;\n          feature.geometries.forEach((geometry, j) => {\n            if (geometry.type !== geometryType) return;\n            if (!geometry.coordinates || geometry.coordinates.length === 0) return;\n            if (colorIndex) {\n              this.drawGeometry(geometry, undefined, undefined, indexToColor(i, j));\n            } else {\n              let areaColor = floorColor;\n              if (geometry.type === 'polygon' && !isCCW(geometry.coordinates)) {\n                areaColor = backgroundColor;\n              }\n              this.drawGeometry(geometry, areaColor, wallColor);\n            }\n          });\n        });\n      });\n    });\n    level.features.filter(feature => feature.properties.name).forEach((feature, i) => {\n      let center: number[];\n      const polygon = feature.geometries.find(geom => geom.type === 'polygon');\n      const ellipse = feature.geometries.find(geom => geom.type === 'ellipse');\n      const brush = feature.geometries.find(geom => geom.type === 'brush');\n      if (polygon) {\n        center = centroid(polygon.coordinates);\n      } else if (ellipse) {\n        center = [\n          ellipse.coordinates[0][0] + (ellipse.coordinates[1][0] - ellipse.coordinates[0][0]) / 2,\n          ellipse.coordinates[0][1] + (ellipse.coordinates[1][1] - ellipse.coordinates[0][1]) / 2,\n        ];\n      } else if (brush) {\n        center = brush.coordinates[Math.round(brush.coordinates.length / 2)];\n      } else {\n        return;\n      }\n      this.ctx.save();\n      this.ctx.translate(center[0], center[1] - 0.25);\n      this.ctx.fillStyle = '#000';\n      this.renderTextCenter(`${i + 1}`, '0.5px Helvetica');\n      this.ctx.restore();\n    });\n  }\n\n  drawLevel(level: Level, selectable: boolean) {\n    const { appState } = this;\n    const { width, height } = this.canvas;\n\n    const tmp = this.ctx;\n\n    this.ctx = this.bufferCtx;\n\n    if (selectable) {\n      // color-indexed mouse picking\n      this.ctx.resetTransform();\n      this.ctx.globalCompositeOperation = 'source-over';\n      this.ctx.fillStyle = \"#fff\";\n      this.ctx.fillRect(0, 0, width, height);\n      this.ctx.save();\n      this.ctx.scale(appState.scale, appState.scale);\n      this.ctx.translate(appState.offset[0], appState.offset[1]);\n      this.ctx.scale(this.size, this.size);\n      this.drawFeatures(level, true);\n      if (this.mouse) {\n        const p = this.ctx.getImageData(this.mouse[0], this.mouse[1], 1, 1).data;\n        const [featureIndex, geometryIndex] = colorToIndex(p[0], p[1], p[2]);\n        if (featureIndex === Infinity || featureIndex >= level.features.length || geometryIndex >= level.features[featureIndex].geometries.length) {\n          this.hover = undefined;\n        } else {\n          this.hover = { featureIndex, geometryIndex };\n        }\n      }\n      this.ctx.restore();\n    }\n\n    // setup transform and clear buffer\n    this.ctx.resetTransform();\n    this.ctx.clearRect(0, 0, width, height);\n    this.ctx.save();\n    if (this.mode === 'edit') {\n      this.ctx.scale(appState.scale, appState.scale);\n      this.ctx.translate(appState.offset[0], appState.offset[1]);\n      this.ctx.scale(this.size, this.size);\n    } else {\n      const range = level.features.reduce(([sw, ne], feature) => {\n        return feature.geometries.reduce(([sw, ne], geometry) => {\n          const minX = Math.min(...geometry.coordinates.map(p => p[0]));\n          const maxX = Math.max(...geometry.coordinates.map(p => p[0]));\n          const minY = Math.min(...geometry.coordinates.map(p => p[1]));\n          const maxY = Math.max(...geometry.coordinates.map(p => p[1]));\n          return [\n            [Math.min(sw[0], minX), Math.max(sw[1], maxY)],\n            [Math.max(ne[0], maxX), Math.min(ne[1], minY)],\n          ];\n        }, [sw, ne]);\n      }, [[Infinity, -Infinity], [-Infinity, Infinity]]);\n      const w = range[1][0] - range[0][0];\n      const h = range[0][1] - range[1][1];\n      const extent = Math.max(w, h);\n      const scale = Math.max(this.canvas.width - 20, this.canvas.height - 20) / extent;\n      const levelMid = [range[0][0] + w / 2, range[1][1] + h / 2];\n      this.ctx.scale(scale, scale);\n      this.ctx.translate(\n        ((this.canvas.width / 2) - (levelMid[0] * scale)) / scale,\n        ((this.canvas.height / 2) - (levelMid[1] * scale)) / scale);\n    }\n\n    this.drawFeatures(level);\n\n    if (selectable && appState.tools.pointer.selected) {\n      if (this.hover !== undefined && this.hover.featureIndex !== undefined) {\n        const hover = level.features[this.hover.featureIndex];\n        if (this.hover.geometryIndex !== undefined && hover !== undefined) {\n          this.drawGeometry(hover.geometries[this.hover.geometryIndex], hoverFillColor, hoverStrokeColor);\n        }\n      }\n      const selection = this.appState.getSelectedFeature();\n      if (selection) {\n        selection.feature.geometries.forEach(geometry => {\n          this.drawGeometry(\n            geometry,\n            geometry === selection.geometry ? selectionFillColor : hoverFillColor,\n            geometry === selection.geometry ? selectionStrokeColor : hoverFillColor);\n        });\n        if (this.drag && dist(this.drag.start, this.drag.end)) {\n          this.ctx.save();\n          const deltaDrag = [this.drag.end[0] - this.drag.start[0], this.drag.end[1] - this.drag.start[1]];\n          this.ctx.translate(deltaDrag[0], deltaDrag[1]);\n          selection.feature.geometries.forEach(geometry => {\n            this.drawGeometry(geometry, dragFillColor, dragStrokeColor);\n          });\n          this.ctx.restore();\n        }\n      }\n    }\n\n    this.ctx.globalCompositeOperation = 'source-over';\n    if (appState.tools.doors.selected && this.mouse) {\n      const door = detectDoorPlacement(\n        this.worldToTile(this.canvasToWorld(this.mouse), false),\n        level.features,\n        this.specialKeys.shift);\n      if (door) {\n        this.drawDoor(appState.tools.doors.subtype, [door.from, door.to], undefined, wallColor);\n      }\n    }\n\n    if (this.mode === 'edit') {\n      this.ctx.globalCompositeOperation = 'source-over';\n    } else {\n      this.ctx.globalCompositeOperation = 'source-atop';\n    }\n    this.drawGrid();\n\n    this.ctx.restore();\n\n    tmp.drawImage(this.bufferCanvas, 0, 0);\n\n    this.ctx = tmp;\n  }\n\n  render = (time: number) => {\n    if (new Date().getTime() - this.dirty.getTime() < 5000) {\n      const startTime = performance.now();\n      const { ctx, appState } = this;\n      const { tools } = appState;\n      if (this.polygonToolSelected && !appState.tools.polygon.selected) {\n        this.points = [];\n      }\n      this.polygonToolSelected = appState.tools.polygon.selected;\n\n      ctx.resetTransform();\n      this.bufferCtx.resetTransform();\n\n      this.clearScreen();\n\n      // http://jeroenhoek.nl/articles/svg-and-isometric-projection.html\n      // ctx.transform(0.866, 0.5, -0.866, 0.5, 0, 0);\n\n      const map = this.appState.maps[this.appState.selection.mapIndex];\n      const currLevel = this.level !== undefined ? map.levels[this.level] : map.levels[this.appState.selection.levelIndex];\n      this.drawLevel(currLevel, this.mode === 'edit');\n      if (this.mode === 'edit') {\n        ctx.globalAlpha = 0.2;\n        Object.entries(this.appState.selection.ghostLevels).forEach(([levelIndex, ghost]) => {\n          if (ghost) this.drawLevel(map.levels[parseInt(levelIndex)], false);\n        });\n        ctx.globalAlpha = 1;\n      }\n\n      if (this.mode === 'edit') {\n        ctx.save();\n\n        ctx.scale(appState.scale, appState.scale);\n        ctx.translate(appState.offset[0], appState.offset[1]);\n        ctx.scale(this.size, this.size);\n\n        if (this.mouse) {\n          this.drawMousePos(this.mouse);\n        }\n\n        if (this.points.length > 0 && tools.polygon.selected) {\n          this.drawPolygon(this.points, dragFillColor, dragStrokeColor);\n        } else if (this.points.length > 0 && tools.brush.selected) {\n          this.drawBrush(this.points, dragFillColor, dragStrokeColor);\n        } else if (this.drag) {\n          this.drawDrag();\n        }\n      }\n\n      ctx.restore();\n\n      const fps = performance.now() - startTime;\n      this.fps = (fps * 0.1) + this.fps * 0.9;\n      if (appState.debug) {\n        this.renderFPS(time);\n      }\n    }\n    this.requestID = requestAnimationFrame(this.render);\n  }\n}\n\nexport default function Canvas(props: { mode: 'edit' | 'print', level?: number }) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const appState = useContext(Context);\n  const [renderer, setRenderer] = useState<CanvasRenderer | undefined>();\n  useEffect(() => {\n    if (canvasRef.current === null) return;\n    const canvas = canvasRef.current;\n    const renderer: CanvasRenderer = new CanvasRenderer(canvas, props.mode, props.level);\n    const syncSize = () => {\n      canvas.width = canvas.parentElement?.offsetWidth || canvas.width;\n      canvas.height = canvas.parentElement?.offsetHeight || canvas.height;\n      renderer.dirty = new Date();\n    };\n    syncSize();\n    renderer.attachListeners();\n    window.addEventListener('resize', syncSize);\n    renderer.appState = appState;\n    renderer.mode = props.mode;\n    appState.notifyChange = () => {\n      renderer.dirty = new Date();\n    };\n    setRenderer(renderer);\n    return () => {\n      window.removeEventListener('resize', syncSize);\n      renderer.detachListeners();\n    }\n  }, [canvasRef, appState, props.mode, props.level]);\n  return <div style={{ height: \"100%\", width: \"100%\" }}>\n    <canvas ref={canvasRef} style={{ height: \"100%\", width: \"100%\" }} />\n    {props.mode === 'edit' && <Zoom renderer={renderer} />}\n  </div>;\n}\n","import React from 'react';\nimport { css } from 'astroturf';\nimport { sanitize } from 'dompurify';\nimport marked from 'marked';\n\nconst classes = css`\n  .formattedText {\n    margin: 0;\n    padding: 0 8px;\n    color: white;\n  }\n  .formattedText h1 {\n    font-size: 24px;\n    font-family: Helvetica serif;\n    padding: 0 8px;\n    margin: 0;\n    color: white;\n  }\n  .formattedText p {\n    font-size: 18px;\n    font-family: Helvetica serif;\n    padding: 0;\n    margin: 0;\n  }\n`;\n\nexport default function Description(props: { name: string, text: string }) {\n  return <div className={classes.formattedText}>\n    <h1>{props.name}</h1>\n    <div dangerouslySetInnerHTML={{ __html: sanitize(marked(props.text || '')) }} />\n  </div>;\n}","import React from 'react';\nimport { css } from 'astroturf';\nimport classNames from 'classnames';\n\nimport { DS } from './design_system';\nimport Description from './Description';\n\nconst classes = css`\n  .editor {\n    display: flex;\n    flex-direction: column;\n  }\n  .editor textarea {\n    height: 400px;\n    outline: none;\n    border: none;\n  }\n  .name {\n    font-family: Helvetica serif;\n    font-size: 24px;\n    color: white;\n    padding: 8px;\n  }\n  .actions {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin: 12px 24px;\n  }\n`;\n\ninterface Props {\n  name: string\n  description: string\n  onNameChange(name: string): void\n  onDescriptionChange(text: string): void\n  onSave(): void\n  onUndo(): void\n  onDelete?: () => void\n}\n\nexport default function DescriptionEditor(props: Props) {\n  const onNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    props.onNameChange(event.target.value);\n  };\n  const onTextChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    props.onDescriptionChange(event.target.value);\n  };\n  return <div className={classes.editor}>\n    <div style={{ display: 'flex', alignContent: 'center' }}>\n      <input className={DS.input} style={{ flexGrow: 1 }} value={props.name || ''} onChange={onNameChange} />\n    </div>\n    <textarea\n      value={props.description || ''}\n      onChange={onTextChange} />\n    <div className={classes.actions}>\n      {<button className={DS.button} onClick={props.onSave}>Save</button>}\n      {<button className={classNames(DS.button)} onClick={props.onUndo}>Undo</button>}\n      {props.onDelete && <button className={classNames(DS.button, DS.danger)} onClick={props.onDelete}>Delete</button>}\n    </div>\n    <Description name={props.name} text={props.description} />\n  </div>;\n}","import React, { useContext, useState } from 'react';\n\nimport DescriptionEditor from './DescriptionEditor';\nimport { Context } from './State';\n\nexport default function FeatureEditor() {\n  const appState = useContext(Context);\n  const selection = appState.getSelectedFeature();\n  const [lastSelection, setLastSelection] = useState(appState.selection);\n  const [tmpName, setTmpName] = useState<string | undefined>(undefined);\n  const [tmpDescription, setTmpDescription] = useState<string | undefined>(undefined);\n  const onSave = () => {\n    appState.setFeatureDescription({\n      name: tmpName === undefined ? selection?.feature.properties.name : tmpName,\n      description: tmpDescription === undefined ? selection?.feature.properties.description : tmpDescription\n    });\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  };\n  if (appState.selection.levelIndex !== lastSelection.levelIndex || appState.selection.featureIndex !== lastSelection.featureIndex) {\n    setLastSelection(appState.selection);\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  }\n  const onUndo = () => {\n    if (!selection) return;\n    if (selection.feature.properties.name) setTmpName(selection.feature.properties.name);\n    if (selection.feature.properties.description) setTmpDescription(selection.feature.properties.description);\n  };\n  const onDelete = () => {\n    appState.handleDelete();\n  }\n  let name = tmpName || '';\n  if (tmpName === undefined && selection?.feature.properties.name !== undefined) {\n    name = selection?.feature.properties.name;\n  }\n  let description = tmpDescription || '';\n  if (tmpDescription === undefined && selection?.feature.properties.description !== undefined) {\n    description = selection?.feature.properties.description;\n  }\n  return <div>\n    <h3 style={{ color: 'white' }}>Area</h3>\n    <DescriptionEditor\n      name={name}\n      description={description}\n      onNameChange={setTmpName}\n      onDescriptionChange={setTmpDescription}\n      onSave={onSave}\n      onUndo={onUndo}\n      onDelete={onDelete}\n    />\n  </div>;\n}","import React, { CSSProperties, useContext, useState } from 'react';\nimport { css } from 'astroturf';\nimport { DragDropContext, Droppable, Draggable, DropResult } from \"react-beautiful-dnd\";\n\nimport DescriptionEditor from './DescriptionEditor';\nimport { Context } from './State';\n\nconst classes = css`\n  .features {\n    font-family: Helvetica serif;\n    font-size: 18px;\n    color: white;\n    padding: 8px;\n  }\n`;\n\nconst getItemStyle = (isDragging: boolean, isSelected: boolean, draggableStyle: CSSProperties): CSSProperties => ({\n  userSelect: 'none',\n  padding: '4px',\n  margin: '0',\n  background: '#373737',\n  textDecoration: isSelected ? 'underline' : '',\n  ...draggableStyle\n});\n\nconst getListStyle = (isDraggingOver: boolean) => ({\n  background: '#373737',\n  padding: '4px',\n  width: '250px'\n});\n\nexport default function LevelEditor() {\n  const appState = useContext(Context);\n  const level = appState.maps[appState.selection.mapIndex].levels[appState.selection.levelIndex];\n  const [lastSelection, setLastSelection] = useState(appState.selection);\n  const [tmpName, setTmpName] = useState<string | undefined>(undefined);\n  const [tmpDescription, setTmpDescription] = useState<string | undefined>(undefined);\n  const onSave = () => {\n    appState.setLevelDescription({\n      name: tmpName === undefined ? level.name : tmpName,\n      description: tmpDescription === undefined ? level.description : tmpDescription\n    });\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  };\n  if (appState.selection.mapIndex !== lastSelection.mapIndex) {\n    setLastSelection(appState.selection);\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  }\n  const onUndo = () => {\n    setTmpName(level.name);\n    setTmpDescription(level.description);\n  };\n  const namedFeatures = level.features.map((feature, i) => ({ index: i, feature })).filter(f => f.feature.properties.name);\n  const onDragEnd = (result: DropResult) => {\n    if (!result.destination) {\n      return;\n    }\n    appState.setFeatureOrder(\n      namedFeatures[result.source.index].index,\n      namedFeatures[result.destination.index].index);\n  };\n  const onFeatureSelected = (i: number) => () => {\n    appState.setSelection({\n      ...appState.selection,\n      featureIndex: i,\n      geometryIndex: 0,\n    });\n  }\n  let name = tmpName || '';\n  if (tmpName === undefined) name = level.name || '';\n  let description = tmpDescription || '';\n  if (tmpDescription === undefined) description = level.description || '';\n  return <div>\n    <h3 style={{ color: 'white' }}>Level</h3>\n    <DescriptionEditor\n      name={name}\n      description={description}\n      onNameChange={setTmpName}\n      onDescriptionChange={setTmpDescription}\n      onSave={onSave}\n      onUndo={onUndo}\n    />\n    <div className={classes.features}>\n      <DragDropContext onDragEnd={onDragEnd}>\n        <Droppable droppableId=\"droppable\">\n          {(provided, snapshot) => (\n            <div\n              {...provided.droppableProps}\n              ref={provided.innerRef}\n              style={getListStyle(snapshot.isDraggingOver)}\n            >\n              {namedFeatures.map((f, i) => (\n                <Draggable key={i} draggableId={i.toString()} index={i}>\n                  {(provided, snapshot) => (\n                    <div\n                      ref={provided.innerRef}\n                      {...provided.draggableProps}\n                      {...provided.dragHandleProps}\n                      onClick={onFeatureSelected(f.index)}\n                      style={getItemStyle(\n                        snapshot.isDragging,\n                        appState.getSelectedFeature()?.feature === f.feature,\n                        provided.draggableProps.style || {}\n                      )}>\n                      {`${i + 1}. ${f.feature.properties.name}`}\n                    </div>\n                  )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n    </div>\n  </div>;\n}","import React, { useContext, useState } from 'react';\n\nimport DescriptionEditor from './DescriptionEditor';\nimport { Context } from './State';\n\nexport default function MapEditor() {\n  const appState = useContext(Context);\n  const map = appState.maps[appState.selection.mapIndex];\n  const [lastSelection, setLastSelection] = useState(appState.selection);\n  const [tmpName, setTmpName] = useState<string | undefined>(undefined);\n  const [tmpDescription, setTmpDescription] = useState<string | undefined>(undefined);\n  const onSave = () => {\n    appState.setMapDescription({\n      name: tmpName === undefined ? map.name : tmpName,\n      description: tmpDescription === undefined ? map.description : tmpDescription\n    });\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  };\n  if (appState.selection.mapIndex !== lastSelection.mapIndex) {\n    setLastSelection(appState.selection);\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  }\n  const onUndo = () => {\n    setTmpName(map.name);\n    setTmpDescription(map.description);\n  };\n  let name = tmpName || '';\n  if (tmpName === undefined) name = map.name || '';\n  let description = tmpDescription || '';\n  if (tmpDescription === undefined) description = map.description || '';\n  return <div>\n    <h3 style={{ color: 'white' }}>Map</h3>\n    <DescriptionEditor\n      name={name}\n      description={description}\n      onNameChange={setTmpName}\n      onDescriptionChange={setTmpDescription}\n      onSave={onSave}\n      onUndo={onUndo}\n    /></div>;\n}","import React, { useContext, useRef } from 'react';\nimport { css } from 'astroturf';\nimport classNames from 'classnames';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCaretLeft, faCaretRight } from '@fortawesome/free-solid-svg-icons';\n\nimport FeatureEditor from './FeatureEditor';\nimport LevelEditor from './LevelEditor';\nimport MapEditor from './MapEditor';\nimport { Context } from './State';\n\nconst classes = css`\n  .drawer {\n    width: 0;\n    margin: 8px 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background: #373737;\n    box-sizing: border-box;\n    transition: .2s ease-out;\n    &.open {\n      transition: .2s ease-out;\n      z-index: 100;\n    }\n  }\n  .toggleButton {\n    position: absolute;\n    top: 0;\n    left: -27px;\n    background: #373737;\n    color: white;\n    outline: none;\n    border: none;\n    font-size: 30px;\n    padding: 8px;\n    border-radius: 4px 0 0 4px;\n  }\n  .editors {\n    height: 97%;\n    overflow: scroll;\n    padding: 8px;\n  }\n`;\n\nexport default function Drawer() {\n  const appState = useContext(Context);\n  const selection = appState.getSelectedFeature();\n  const drawerRef = useRef<HTMLDivElement>(null);\n  const onMouseMove = (e: MouseEvent) => {\n    if (e.buttons !== 1) {\n      document.removeEventListener('mousemove', onMouseMove);\n      return;\n    }\n    if (!drawerRef.current) return;\n    const drag = drawerRef.current.dataset.drag;\n    if (drag) {\n      const width = parseInt(drawerRef.current.style.width.replace('px', ''));\n      drawerRef.current.style.width = `${width + (parseInt(drag) - e.screenX)}px`;\n    }\n    drawerRef.current.dataset.drag = e.screenX.toString();\n  }\n  const onClick = () => {\n    if (!drawerRef.current) return;\n    if (drawerRef.current.dataset.drag) {\n      drawerRef.current.dataset.drag = '';\n      return;\n    }\n    appState.setDrawerOpen(!appState.drawerOpen);\n  }\n  const onMouseDown = (e: React.MouseEvent) => {\n    document.addEventListener('mousemove', onMouseMove);\n  }\n  const onMouseUp = (e: React.MouseEvent) => {\n    document.removeEventListener('mousemove', onMouseMove);\n    if (!drawerRef.current) return;\n    const width = parseInt(drawerRef.current.style.width.replace('px', ''));\n    if (width > 100) {\n      appState.setDrawerWidth(width);\n      appState.setDrawerOpen(true);\n    }\n  }\n  return <div\n    ref={drawerRef}\n    className={classNames(classes.drawer, appState.drawerOpen && classes.open)}\n    style={{ width: appState.drawerOpen ? `${appState.drawerWidth}px` : 0 }}>\n    <button\n      className={classNames(classes.toggleButton, appState.drawerOpen && classes.open)}\n      onClick={onClick}\n      onMouseDown={onMouseDown}\n      onMouseUp={onMouseUp}>\n      {appState.drawerOpen && <FontAwesomeIcon icon={faCaretRight} />}\n      {!appState.drawerOpen && <FontAwesomeIcon icon={faCaretLeft} />}\n    </button>\n    <div className={classes.editors}>\n      <MapEditor />\n      <LevelEditor />\n      {selection && <FeatureEditor />}\n    </div>\n  </div>;\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { useContext } from 'react';\nimport { css } from 'astroturf';\nimport {\n  faPlus,\n  faMinus,\n} from '@fortawesome/free-solid-svg-icons'\n\nimport { Context } from './State';\nimport classNames from 'classnames';\n\nconst classes = css`\n  .levels {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    background: #000;\n    border-radius: 12px;\n    margin-bottom: 50px;\n    margin-left: 24px;\n    padding: 8px;\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\n    color: white;\n  }\n  .levels svg {\n    color: white;\n    font-size: 12px;\n  }\n  .levels button {\n    background: black;\n    width: 24px;\n    height: 24px;\n    border: 1px solid white;\n    outline: none;\n    margin: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n  }\n  .levels button:hover {\n    background: #505050;\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\n  }\n  .levels button:active {\n    outline: none;\n    border: none;\n    scale: 0.9;\n  }\n  .levels button.selected {\n    color: black;\n    background: #bbb;\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\n  }\n  .levels h4 {\n    margin: 0;\n    padding: 0;\n  }\n  .level {\n    display: flex;\n    align-items: center;\n  }\n  button.link {\n    outline: none;\n    border: none;\n  }\n  .link:hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`;\n\nexport default function Levels() {\n  const state = useContext(Context);\n  const isGhostLevel = (i: number) => {\n    return state.selection.ghostLevels[i];\n  };\n  const setGhostLevel = (i: number, newValue: boolean) => {\n    state.setSelection({\n      ...state.selection,\n      ghostLevels: {\n        ...state.selection.ghostLevels,\n        [i]: newValue,\n      }\n    });\n  };\n  return <div className={classes.levels}>\n    <h4>Levels</h4>\n    {state.maps[state.selection.mapIndex].levels.map((level, i) => <div key={i} className={classes.level}>\n      <button\n        className={classNames(classes.link, state.selection.levelIndex === i && classes.selected)}\n        onClick={() => state.selectLevel(i)}>\n        {i}\n      </button>\n      <button onClick={() => state.removeLevel(i)}><FontAwesomeIcon icon={faMinus} /></button>\n      <input\n        type=\"checkbox\"\n        checked={isGhostLevel(i)}\n        onChange={e => setGhostLevel(i, e.target.checked)}\n      />\n    </div>)}\n    <button onClick={() => state.addLevel()}><FontAwesomeIcon icon={faPlus} /></button>\n  </div>;\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React from 'react';\nimport { css } from 'astroturf';\nimport {\n  faTimes,\n} from '@fortawesome/free-solid-svg-icons'\n\nconst classes = css`\n  .modal {\n    position: fixed;\n    z-index: 1000;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background-color: rgba(0, 0, 0, 0.4);\n  }\n\n  .modalContent {\n    position: relative;\n    background-color: #373737;\n    color: #fff;\n    margin: 64px auto;\n    padding: 0 20px 20px 20px;\n    border: 1px solid #888;\n    border-radius: 8px;\n    width: 60%;\n  }\n\n  .modalContent button {\n    outline: none;\n    border: none;\n    background-color: transparent;\n    color: #fff;\n    font-size: 24px;\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    text-decoration: none;\n    cursor: pointer;\n  }\n`;\n\nexport default function Modal(props: React.PropsWithChildren<{ open: boolean, toggle: () => void }>) {\n  return <div className={classes.modal} style={{ display: props.open ? 'block' : 'none' }}>\n    <div className={classes.modalContent}>\n      <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n        <button onClick={props.toggle}><FontAwesomeIcon icon={faTimes} /></button>\n      </div>\n      {props.children}\n    </div>\n  </div>;\n}","import React, { useContext, useState } from 'react';\nimport { css } from 'astroturf';\nimport { useHistory } from \"react-router-dom\";\n\nimport Modal from './Modal';\nimport { DS } from './design_system';\nimport { Context } from './State';\n\nconst classes = css`\n  .menubar {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    background: #373737;\n    padding: 2px;\n    width: 100%;\n  }\n  .title {\n    color: white;\n    margin: 8px 24px 8px 24px;\n  }\n  .debugMenu {\n    margin-left: auto;\n    margin-right: 24px;\n  }\n  label {\n    color: white;\n  }\n  .mapLink:hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\n\nfunction MapSelector(props: { onSelect: (map: number) => void }) {\n  const appState = useContext(Context);\n  return <div>\n    <h2>Maps</h2>\n    <div>{\n      appState.maps.map((map, i) => <div key={i}>\n        <h4\n          className={classes.mapLink}\n          onClick={() => props.onSelect(i)}>\n          {map.name}\n        </h4>\n      </div>)\n    }</div>\n  </div>\n}\n\nexport default function Menubar() {\n  const appState = useContext(Context);\n  const history = useHistory();\n  const [tmpName, setTmpName] = useState<string | undefined>(undefined);\n  const updateTmpName = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setTmpName(event.target.value);\n  }\n  const name = tmpName === undefined ? appState.maps[appState.selection.mapIndex].name : tmpName;\n  const [showLoadModal, setShowLoadModal] = useState(false);\n  const selectMap = (i: number) => {\n    appState.setSelection({\n      mapIndex: i,\n      levelIndex: 0,\n      featureIndex: undefined,\n      geometryIndex: undefined,\n      ghostLevels: {},\n    });\n    setShowLoadModal(false);\n  }\n  const [lastSelection, setLastSelection] = useState(appState.selection);\n  if (appState.selection.mapIndex !== lastSelection.mapIndex || appState.selection.mapIndex !== lastSelection.mapIndex) {\n    setLastSelection(appState.selection);\n    setTmpName(undefined);\n  }\n  return <React.Fragment>\n    <div className={classes.menubar}>\n      <span className={classes.title}>RPG.ai</span>\n      <input className={DS.input} value={name} onChange={updateTmpName} />\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.save(name || ''); }}>\n        Save\n      </button>\n      {appState.maps.length > 1 && <button\n        className={DS.buttonSmall}\n        onClick={() => { setShowLoadModal(true); }}>\n        Load\n      </button>}\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.newMap(); }}>\n        New\n      </button>\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.undo(); }}>\n        Undo\n      </button>\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.redo(); }}>\n        Redo\n      </button>\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { history.push('/print'); }}>\n        Print\n      </button>\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.toggleWelcome(); }}>\n        Help\n      </button>\n      {appState.debug && <div>\n        <button\n          className={DS.buttonSmall}\n          onClick={() => { appState.export(); }}>\n          Export\n      </button>\n        <button\n          className={DS.buttonSmall}\n          onClick={() => { appState.reset(); }}>\n          Clear\n      </button>\n      </div>}\n      <div className={classes.debugMenu}>\n        <label>Debug</label>\n        <input\n          type=\"checkbox\"\n          checked={appState.debug}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) => appState.setDebug(event.target.checked)} />\n      </div>\n    </div>\n    {showLoadModal && <Modal open={showLoadModal} toggle={() => setShowLoadModal(!showLoadModal)}>\n      <MapSelector onSelect={selectMap} />\n    </Modal>}\n  </React.Fragment>;\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { useContext } from 'react';\nimport { css } from 'astroturf';\nimport {\n  faMapMarkerAlt,\n} from '@fortawesome/free-solid-svg-icons'\n\nimport { Context } from './State';\n\nconst classes = css`\n  .home {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    padding: 8px;\n    z-index: 1;\n  }\n  .home svg {\n    color: #505050;\n    font-size: 24px;\n  }\n  .home button {\n    background: transparent;\n    outline: none;\n    border: none; \n    display: flex;\n    margin: 2px;\n    align-items: center;\n    justify-content: center;\n    width: 24px;\n    height: 24px;\n  }\n  .home button:hover svg {\n    color: #000;\n  }\n`;\n\nexport default function HomeButton() {\n  const state = useContext(Context);\n  return <div className={classes.home}>\n    <button onClick={() => state.setZoom(1, [0, 0])}><FontAwesomeIcon icon={faMapMarkerAlt} /></button>\n  </div>;\n}","import React, { useContext } from 'react';\nimport { css } from 'astroturf';\nimport marked from 'marked';\nimport { sanitize } from 'dompurify';\n\nimport Canvas from './Canvas';\nimport { Context, Level } from './State';\n\nconst classes = css`\n  .print {\n    display: flex;\n    flex-direction: column;\n    font-family: Helvetica serif;\n  }\n  .page {\n    width: 8in;\n    height: 10.5in;\n    display: flex;\n    flex-direction: column;\n    margin-left: auto;\n    margin-right: auto;\n    border-bottom: 1px solid black;\n    padding: 0.25in;\n  }\n  @media print {\n    .page {\n      border-bottom: none !important;\n    }\n  }\n  .pages {\n    width: 8in;\n    display: flex;\n    flex-direction: column;\n    margin-left: auto;\n    margin-right: auto;\n    padding: 0.25in;\n  }\n`;\n\nexport default function PrintLayout() {\n  const appState = useContext(Context);\n  const map = appState.maps[appState.selection.mapIndex];\n  let levels: Level[] = [];\n  map.levels.forEach((level, i) => {\n    levels.push({\n      ...level,\n      features: level.features.filter(feature => feature.properties.name),\n    })\n  });\n  return <div className={classes.print}>\n    <div className={classes.page}>\n      <h2>{map.name}</h2>\n      <div dangerouslySetInnerHTML={{ __html: sanitize(marked(map.description || '')) }} />\n      <div style={{ flexGrow: 1 }}>\n        <Canvas mode=\"print\" level={0} />\n      </div>\n    </div>\n    <div className={classes.pages}>\n      {levels.map((level, i) => <div key={i}>\n        <div style={{ height: '5in' }}>\n          <Canvas mode=\"print\" level={i} />\n        </div>\n        <h2>{level.name}</h2>\n        <div dangerouslySetInnerHTML={{ __html: sanitize(marked(level.description || '')) }} />\n        {level.features.map((feature, j) => <div key={j}>\n          <h3>{`${i + 1}.${j + 1} ${feature.properties.name}`}</h3>\n          <div dangerouslySetInnerHTML={{ __html: sanitize(marked(feature.properties.description || '')) }} />\n        </div>)}\n      </div>)}\n    </div>\n  </div>;\n}","import {\n  IconDefinition,\n  IconLookup,\n  IconName\n} from '@fortawesome/fontawesome-svg-core';\n\nexport const textIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'text' as IconName,\n  icon: [\n    448,\n    512,\n    [],\n    'none',\n    'M432 32a16 16 0 0 1 16 16v96a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16v-32H264v304h40a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H144a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h40V112H64v32a16 16 0 0 1-16 16H16a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16z'\n  ]\n};\n\nexport const stairsIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'stairs' as IconName,\n  icon: [\n    100,\n    100,\n    [],\n    'none',\n    'M 88.894187,13.349653 H 75.858354 67.310207 v 8.548146 13.036436 H 54.274372 45.726226 v 8.548149 13.035835 H 32.689789 24.141641 v 8.548147 13.035835 H 2.557659 v 8.548146 h 30.13213 V 78.1022 65.066366 H 54.274372 V 56.518219 43.482384 H 75.858354 V 34.934235 21.897799 h 13.035833 8.548154 v -8.548146 z',\n  ]\n};\n\nexport const statueIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'statue' as IconName,\n  icon: [\n    100,\n    100,\n    [],\n    'none',\n    'M 50.000001,0.87620926 C 53.837858,11.917235 57.675715,22.958261 61.513572,33.999287 c 11.686603,0.238155 23.373206,0.47631 35.059809,0.714465 -9.314677,7.061883 -18.629353,14.123767 -27.94403,21.18565 3.38486,11.188214 6.76972,22.376428 10.15458,33.564642 C 69.189287,82.787502 59.594644,76.11096 50,69.434418 40.405356,76.110959 30.810711,82.787501 21.216067,89.464042 24.600928,78.275829 27.985788,67.087615 31.370649,55.899402 22.055973,48.837518 12.741296,41.775633 3.4266201,34.713749 15.113223,34.475595 26.799825,34.237441 38.486428,33.999287 42.324286,22.958261 46.162143,11.917235 50.000001,0.87620926 Z'\n  ]\n}\n\nexport const columnIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'column' as IconName,\n  icon: [\n    100,\n    100,\n    [],\n    'none',\n    'M 99.307838,50.000002 C 99.676865,71.680786 83.863735,92.30908 62.849037,97.645153 43.43672,103.02916 21.169043,95.169716 9.7285742,78.512925 -1.6384271,62.63998 -2.3896164,39.964144 8.336037,23.568937 18.693791,7.0444626 39.349174,-2.2666802 58.573467,1.4133904 77.242915,4.6178118 93.377617,19.344785 97.783979,37.839728 c 1.009833,3.969178 1.527479,8.064294 1.523859,12.160274 z'\n  ]\n}\n\nexport const stalacmiteIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'stalacmite' as IconName,\n  icon: [\n    100,\n    100,\n    [],\n    'none',\n    'm 74.415659,92.321351 c -4.943641,0.08102 -9.841762,-1.089484 -14.790343,-0.658213 -3.565886,-0.471723 -7.22558,0.729371 -9.905688,3.089052 -1.962324,1.335386 -5.447033,1.324308 -6.094083,1.821715 -3.85956,0.399841 -7.750871,0.28678 -11.573283,0.679078 -2.618647,-0.623551 -6.036085,-0.489443 -8.075905,-1.732656 1.155957,-3.724279 4.94719,-5.230686 7.705191,-7.514488 2.969895,-1.745463 3.119779,-6.066341 3.390628,-9.173885 0.977271,-3.506623 0.968227,-6.763139 0.834314,-10.383359 0.215923,-3.830242 -0.1664,-7.549928 0.655209,-11.170453 0.846053,-3.59887 2.294525,-6.963584 3.511139,-10.460921 0.866289,-3.295106 0.609567,-7.081046 1.683639,-10.061072 1.42479,-3.266581 3.711094,-6.049776 5.124971,-9.287309 1.837583,-3.091687 3.916701,-6.009869 3.773832,-9.893974 0.571828,-4.55039 1.017447,-9.2261117 1.445585,-13.7209267 3.030585,-2.95287215 6.303553,0.1796971 8.022745,2.5391129 3.780486,-0.6640017 2.841131,5.3726878 4.064949,7.7612308 0.861812,3.528943 1.440482,7.099871 1.327164,10.73674 -0.02487,3.466809 0.535472,6.773821 1.338634,10.143058 1.921669,3.216066 -0.39964,6.716109 0.466581,10.116214 -0.08226,4.045679 1.089512,8.062286 2.357768,11.873417 3.207109,1.44481 4.605866,4.867853 4.700711,8.604547 -0.214383,4.020444 0.705194,8.095625 -0.21518,12.020218 -0.141146,3.376494 0.09043,6.94965 1.137373,9.996727 1.650808,1.264756 0.198735,3.557255 -0.885951,4.676147 z',\n  ]\n}","import React from 'react';\nimport { css } from 'astroturf';\nimport { faCaretLeft, faDoorClosed, faSquare, faVectorSquare } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { statueIcon } from './icons/custom_icons';\n\nconst classes = css`\n  .welcomePage {\n    display: flex;\n    flex-direction: column;\n  }\n  .welcomePage a {\n    color: white;\n  }\n  .welcomePage li {\n    padding: 4px;\n  }\n  .footer {\n    font-size: 16px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n`;\n\nexport default function Welcome() {\n  return <div className={classes.welcomePage}>\n    <h2>Welcome to the RPG.ai Mapmaker</h2>\n    <h3>Quick Start</h3>\n    <ul>\n      <li>Use the scroll wheel or hold space to scroll around</li>\n      <li>Select the Wall tool (<FontAwesomeIcon icon={faSquare} />) to build walls</li>\n      <li>Select the Rect tool (<FontAwesomeIcon icon={faVectorSquare} />) for rectangular areas</li>\n      <li>Place Decorations (<FontAwesomeIcon icon={statueIcon} />) and Doors (<FontAwesomeIcon icon={faDoorClosed} />) </li>\n      <li>Select and Annotate your areas (checkout the Drawer <FontAwesomeIcon icon={faCaretLeft} /> on the right)</li>\n      <li>Click \"Print\" and print your map as a PDF</li>\n    </ul>\n    <h3>Support</h3>\n    <ul>\n      <li>File bugs at <a href=\"https://github.com/etherealmachine/rpg-ai/issues\">Github Issues</a></li>\n      <li>If you like the project, or want more features, support development on <a href=\"https://www.patreon.com/etherealmachine\">Patreon</a></li>\n    </ul>\n    <p className={classes.footer}>Developed by <a href=\"https://github.com/etherealmachine\">@etherealmachine</a>, Copyright 2020</p>\n  </div>;\n}","import React, { useEffect, useRef, useState } from 'react';\nimport { createPopper } from '@popperjs/core';\nimport { css } from 'astroturf';\n\nconst classes = css`\n  .tooltip {\n    color: white;\n    background: black;\n    border-radius: 4px;\n    padding: 8px;\n  }\n`;\n\nexport default function Tooltip(props: React.PropsWithChildren<{ tooltip: string }>) {\n  const parentRef = useRef<HTMLDivElement>(null);\n  const hoverRef = useRef<HTMLDivElement>(null);\n  const tooltipRef = useRef<HTMLSpanElement>(null);\n  const [shown, setShown] = useState(false);\n  const show = () => {\n    setShown(true);\n  };\n  const hide = () => {\n    setShown(false);\n  }\n  useEffect(() => {\n    if (parentRef.current && tooltipRef.current) {\n      createPopper(parentRef.current, tooltipRef.current, {\n        placement: 'right',\n        modifiers: [\n          {\n            name: 'offset',\n            options: {\n              offset: [0, 20],\n            },\n          },\n        ],\n      });\n    }\n    if (hoverRef.current) {\n      hoverRef.current.addEventListener('mouseenter', show);\n      hoverRef.current.addEventListener('mouseleave', hide);\n    }\n  }, [parentRef, tooltipRef]);\n  return <div ref={parentRef}>\n    <span\n      ref={tooltipRef}\n      style={shown ? {} : { visibility: 'hidden' }}\n      className={classes.tooltip}>\n      {props.tooltip}\n    </span>\n    <div ref={hoverRef}>\n      {props.children}\n    </div>\n  </div>;\n}","import React from 'react';\nimport { css } from 'astroturf';\n\nconst classes = css`\n  .toggle {\n    position: relative;\n    display: inline-block;\n    width: 100%;\n    height: 34px;\n  }\n\n  .toggle input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  .slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    -webkit-transition: .4s;\n    transition: .4s;\n    border-radius: 34px;\n  }\n\n  .slider:before {\n    position: absolute;\n    content: \"\";\n    height: 26px;\n    width: 26px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    -webkit-transition: .4s;\n    transition: .4s;\n    border-radius: 50%;\n  }\n\n  .toggle input:checked + .slider {\n    background-color: #2196F3;\n  }\n\n  .toggle input:focus + .slider {\n    box-shadow: 0 0 1px #2196F3;\n  }\n\n  .toggle input:checked + .slider:before {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }\n`;\n\nexport default function Toggle(props: { toggled: boolean, onToggle: () => void }) {\n  return <label className={classes.toggle}>\n    <input type=\"checkbox\" checked={props.toggled} onChange={props.onToggle} />\n    <span className={classes.slider}></span>\n  </label>;\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { useContext } from 'react';\nimport {\n  faMousePointer,\n  faVectorSquare,\n  faDrawPolygon,\n  IconDefinition,\n  faDoorClosed,\n  faSquare,\n  faBrush,\n  faStrikethrough,\n  faExclamationTriangle,\n} from '@fortawesome/free-solid-svg-icons'\n\nimport { DS } from './design_system';\nimport { Context, ToolName } from './State';\nimport Tooltip from './Tooltip';\nimport Toggle from './Toggle';\nimport { columnIcon, stairsIcon, stalacmiteIcon, statueIcon } from './icons/custom_icons';\nimport { faCircle } from '@fortawesome/free-regular-svg-icons';\n\ninterface Button {\n  icon?: IconDefinition\n  tooltip: string,\n  options?: { [key: string]: Button }\n}\n\nconst buttons: { [key in ToolName]: Button } = {\n  'pointer': { icon: faMousePointer, tooltip: 'Select' },\n  'walls': { icon: faSquare, tooltip: 'Walls' },\n  'stairs': { icon: stairsIcon, tooltip: 'Stairs' },\n  'doors': {\n    tooltip: 'Doors', options: {\n      'normal': { icon: faDoorClosed, tooltip: 'Normal Door' },\n      'secret': { icon: faStrikethrough, tooltip: 'Secret Door' },\n    }\n  },\n  'decoration': {\n    tooltip: 'Decorations', options: {\n      'statue': { icon: statueIcon, tooltip: 'Statue' },\n      'column': { icon: columnIcon, tooltip: 'Column' },\n      'stalacmite': { icon: stalacmiteIcon, tooltip: 'Stalacmite' },\n    }\n  },\n  'brush': { icon: faBrush, tooltip: 'Paint' },\n  'rect': { icon: faVectorSquare, tooltip: 'Rectangle' },\n  'polygon': { icon: faDrawPolygon, tooltip: 'Polygon' },\n  'ellipse': { icon: faCircle, tooltip: 'Circle/Ellipse' },\n};\n\nexport default function Toolbar() {\n  const state = useContext(Context);\n  const handleButtonClick = (tool: ToolName) => () => {\n    state.setSelectedTool(tool);\n  };\n  const toggleGridSteps = () => {\n    state.setGridSteps(state.gridSteps === 1 ? 2 : 1);\n  };\n  const isOptionSelected = (tool: ToolName, option: string) => {\n    if (state.tools[tool].hasOwnProperty('subtype')) {\n      return (state.tools[tool] as any).subtype === option;\n    }\n    return false;\n  };\n  const handleOptionClick = (tool: ToolName, option: string) => () => {\n    state.setToolOption(tool, option);\n  };\n  const iconFor = (tool: ToolName) => {\n    const button = buttons[tool];\n    if (button?.options) return button.options[(state.tools[tool] as any).subtype].icon || faExclamationTriangle;\n    return button?.icon || faExclamationTriangle;\n  }\n  return <div className={DS.toolbar} style={{ position: 'absolute', top: '50px', left: '24px' }}>\n    {Object.entries(state.tools).map(([name, spec]) => <Tooltip key={name} tooltip={buttons[name as ToolName]?.tooltip}>\n      <React.Fragment>\n        <button\n          className={spec.selected ? DS.selected : ''}\n          disabled={spec.disabled}\n          onClick={handleButtonClick(name as ToolName)}>\n          <FontAwesomeIcon icon={iconFor(name as ToolName)} />\n        </button>\n        {spec.selected && buttons[name as ToolName].options && <div className={DS.toolbar}>\n          {Object.entries(buttons[name as ToolName].options || {}).map(([optionName, optionSpec]) => <Tooltip key={optionName} tooltip={optionSpec.tooltip}>\n            <button className={isOptionSelected(name as ToolName, optionName) ? DS.selected : ''}\n              onClick={handleOptionClick(name as ToolName, optionName)}>\n              <FontAwesomeIcon icon={optionSpec.icon || faExclamationTriangle} />\n            </button>\n          </Tooltip>)}\n        </div>}\n      </React.Fragment>\n    </Tooltip>)}\n    <Toggle toggled={state.gridSteps === 2} onToggle={toggleGridSteps} />\n  </div>;\n}","import { Dispatch, SetStateAction, useState } from \"react\";\n\nfunction isObject(i: any) {\n  return (i && typeof i === 'object' && !Array.isArray(i));\n}\n\nfunction inflate(target: any, ...objs: any[]): any {\n  if (!objs.length) return target;\n  const obj = objs.shift();\n  if (isObject(target) && isObject(obj)) {\n    for (const key in obj) {\n      if (isObject(obj[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        inflate(target[key], obj[key]);\n      } else {\n        if (Object.isFrozen(target)) {\n          target = unfreeze(target);\n        }\n        Object.assign(target, { [key]: obj[key] });\n      }\n    }\n  }\n  return inflate(target, ...objs);\n}\n\nfunction unfreeze(o: any) {\n  let oo: any = undefined;\n  if (o instanceof Array) {\n    oo = []; const clone = (v: any) => { oo.push(v) };\n    o.forEach(clone);\n  } else if (o instanceof String) {\n    oo = o;\n  } else if (typeof o == 'object') {\n    oo = {};\n    for (var property in o) { oo[property] = o[property]; }\n  }\n  return oo;\n}\n\nexport function useLocalStorageState<T>(key: string, initial: T): [T, Dispatch<SetStateAction<T>>] {\n  const fromLocalStorage = window.localStorage.getItem(key);\n  if (fromLocalStorage !== null) inflate(initial, JSON.parse(fromLocalStorage));\n  const [state, setState] = useState<T>(initial);\n  return [state, (newState: any) => {\n    window.localStorage.setItem(key, JSON.stringify(newState));\n    setState(newState);\n  }];\n}","/*\n  RPG.ai brings Table Top Role Playing Games to the next level\n\n  RPG.ai lets you easily draw beautiful maps full of NPCs, object, and areas for players to explore.\n*/\nimport React, { useState } from 'react';\nimport { css } from 'astroturf';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport Canvas from './Canvas';\nimport Drawer from './Drawer';\nimport LevelSelector from './LevelSelector';\nimport Menubar from './Menubar';\nimport Modal from './Modal';\nimport HomeButton from './HomeButton';\nimport PrintLayout from './PrintLayout';\nimport Welcome from './Welcome';\nimport Toolbar from './Toolbar';\nimport { Context, State } from './State';\nimport { useLocalStorageState } from './Persistence';\n\nconst classes = css`\n  .app {\n    width: 100vw;\n    height: 100vh;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n  }\n  .canvasWrapper {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n  }\n`;\n\nexport default function App() {\n  const [i, setCount] = useState(0);\n  const [state, setState] = useLocalStorageState('AppState', new State());\n  state.setState = (newState: State) => {\n    setState(newState);\n    setCount(i + 1);\n  };\n  (window as any).app = state;\n  document.title = state.maps[state.selection.mapIndex].name || 'RPG.ai';\n  return <Router>\n    <Switch>\n      <Route path=\"/print\">\n        <div className={classes.app}>\n          <Context.Provider value={state}>\n            <PrintLayout />\n          </Context.Provider>\n        </div>\n      </Route>\n      <Route path=\"/\">\n        <div className={classes.app} style={{ overflow: 'hidden' }}>\n          <Context.Provider value={state}>\n            <Menubar />\n            <div className={classes.canvasWrapper}>\n              <Modal open={state.showWelcome} toggle={state.toggleWelcome.bind(state)}><Welcome /></Modal>\n              <Canvas mode='edit' />\n              <Drawer />\n              <Toolbar />\n              <LevelSelector />\n              <HomeButton />\n            </div>\n          </Context.Provider>\n        </div>\n      </Route>\n    </Switch>\n  </Router>;\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\n\nimport './index.css';\nimport App from './App';\n\nSentry.init({\n  dsn: \"https://d42a7c4cafcb47f5b298dbf6e44b1834@o486991.ingest.sentry.io/5545134\",\n  integrations: [\n    new Integrations.BrowserTracing(),\n  ],\n  tracesSampleRate: 1.0,\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}