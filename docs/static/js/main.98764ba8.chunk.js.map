{"version":3,"sources":["webpack:///./src/design_system-DS.astroturf.css?0131","design_system-DS.astroturf.css","webpack:///./src/Description-classes.astroturf.css?6438","Description-classes.astroturf.css","webpack:///./src/DescriptionEditor-classes.astroturf.css?05e7","DescriptionEditor-classes.astroturf.css","webpack:///./src/LevelEditor-classes.astroturf.css?fe66","LevelEditor-classes.astroturf.css","webpack:///./src/Drawer-classes.astroturf.css?1680","Drawer-classes.astroturf.css","webpack:///./src/Levels-classes.astroturf.css?0f19","Levels-classes.astroturf.css","webpack:///./src/Modal-classes.astroturf.css?f264","Modal-classes.astroturf.css","webpack:///./src/Menubar-classes.astroturf.css?513a","Menubar-classes.astroturf.css","webpack:///./src/Navigation-classes.astroturf.css?2903","Navigation-classes.astroturf.css","webpack:///./src/PrintLayout-classes.astroturf.css?93af","PrintLayout-classes.astroturf.css","webpack:///./src/Welcome-classes.astroturf.css?00ab","Welcome-classes.astroturf.css","webpack:///./src/Tooltip-classes.astroturf.css?c0b5","Tooltip-classes.astroturf.css","webpack:///./src/Toggle-classes.astroturf.css?e555","Toggle-classes.astroturf.css","webpack:///./src/App-classes.astroturf.css?879d","App-classes.astroturf.css","lib.ts","examples/TempleOfClangeddin.ts","State.ts","Canvas.tsx","design_system.tsx","Description.tsx","DescriptionEditor.tsx","FeatureEditor.tsx","LevelEditor.tsx","MapEditor.tsx","Drawer.tsx","Levels.tsx","Modal.tsx","Menubar.tsx","Navigation.tsx","PrintLayout.tsx","icons/custom_icons.ts","Welcome.tsx","Tooltip.tsx","Toggle.tsx","Toolbar.tsx","Persistence.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["content","module","i","options","transform","undefined","locals","exports","___CSS_LOADER_API_IMPORT___","push","dist","a","b","Math","sqrt","sqDist","lerp","d","from","to","lerp2","indexToColor","j","Error","bbox","points","minX","min","map","p","maxX","max","minY","maxY","sw","ne","w","h","isCCW","ring","signedArea","slice","length","forEach","point","x2","y2","toPolyBoolPoly","geoms","regions","geom","coordinates","inverted","closestPointToLine","ap","ab","clamp","distance","closestPointToPolygon","polygon","line","sort","detectDoorPlacement","features","fullWidth","closestFeature","flatMap","feature","geometries","geometry","type","closestPoint","Infinity","f","includes","coords","center","slope","vdy1","floor","vdx1","vdy2","ceil","vdx2","hdx1","hdy1","hdx2","hdy2","vfrom","vto","vdist","hfrom","hto","hdist","isNaN","computeDoorPlacement","centroid","twicearea","x","y","p1","p2","undoStack","redoStack","modify","state","propertyKey","descriptor","modifierFn","value","args","Array","arguments","this","setState","produce","newState","prev","JSON","stringify","maps","selection","mapIndex","bind","curr","undoable","splice","hasOwnProperty","notifyChange","State","tools","selected","group","disabled","subtype","scale","offset","TempleOfClangeddin","drawerOpen","drawerWidth","levelIndex","featureIndex","geometryIndex","gridSteps","debug","showWelcome","levels","mapName","name","description","pop","parse","stairs","properties","decoration","rect","ellipse","walls","deltaDrag","reverse","brush","door","doors","selectedFeature","geom1","find","geom2","mergedGeoms","merged","PolyBool","region","merge","filter","prevGeoms","concat","tool","Object","values","t","option","open","width","desc","level","assign","sourceIndex","destIndex","removed","Context","React","createContext","specialColors","CanvasRenderer","canvas","mode","mouse","mouseDown","drag","specialKeys","shift","alt","ctrl","space","polygonToolSelected","hover","size","fps","requestID","appState","ctx","bufferCanvas","bufferCtx","dirty","Date","onMouseDown","e","button","start","canvasToTile","end","pointer","selectedFeatureIndex","hoverFeatureIndex","hoverGeometryIndex","shiftKey","handleGroup","setSelection","worldToTile","canvasToWorld","addDoor","onMouseUp","pos","handlePolygon","handleBrush","bounds","handleDrag","onMouseMove","event","offsetX","offsetY","delta","newOffset","window","requestAnimationFrame","setOffset","onWheel","ev","document","elementFromPoint","stopPropagation","preventDefault","newScale","deltaY","mouseWorldPos","newMouseWorldPos","setZoom","onKeyDown","key","activeElement","body","S","handleDelete","undo","redo","style","cursor","onKeyUp","worldToCanvas","round","render","time","getTime","startTime","performance","now","resetTransform","clearScreen","drawLevels","save","translate","drawMousePos","drawPolygon","drawBrush","drawDrag","restore","renderFPS","getContext","alpha","createElement","height","addEventListener","passive","removeEventListener","text","font","m","measureText","actualBoundingBoxAscent","actualBoundingBoxDescent","fillText","toFixed","fillStyle","renderTextCenter","fillRect","clearRect","iT","getTransform","inverse","transformPoint","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","arc","PI","fill","drawGeometry","drawStairs","drawDecoration","box","drawEllipse","drawLine","fillColor","strokeColor","indexColor","drawDoor","pathPoints","drawPoints","pathEllipse","lineJoin","lineCap","globalCompositeOperation","drawNormalDoor","drawSecretDoor","l","abs","cx","actualBoundingBoxLeft","actualBoundingBoxRight","cy","sx","sign","sy","L","W","closePath","drawStatue","drawColumn","drawStalacmite","r","r2","theta","cos","sin","rng","seedrandom","currRadius","close","colorIndex","featureDrawOrder","geometryDrawOrder","featureType","geometryType","areaColor","g","tmp","drawFeatures","getImageData","data","getSelectedFeature","drawGrid","drawImage","Canvas","props","canvasRef","useRef","useContext","useEffect","current","renderer","syncSize","parentElement","offsetWidth","offsetHeight","attachListeners","detachListeners","ref","flex","FeatureEditor","useState","lastSelection","setLastSelection","tmpName","setTmpName","tmpDescription","setTmpDescription","color","DescriptionEditor","onNameChange","onDescriptionChange","onSave","setFeatureDescription","onUndo","onDelete","MapEditor","setMapDescription","MapSelector","statueIcon","prefix","iconName","icon","buttons","faMousePointer","tooltip","faSquare","faDoorClosed","faStrikethrough","faBrush","faVectorSquare","faDrawPolygon","faCircle","Toolbar","isOptionSelected","handleOptionClick","setToolOption","iconFor","faExclamationTriangle","className","DS","toolbar","position","top","left","entries","spec","Tooltip","Fragment","onClick","setSelectedTool","optionName","optionSpec","Toggle","toggled","onToggle","setGridSteps","isObject","isArray","unfreeze","o","oo","v","String","property","useLocalStorageState","initial","fromLocalStorage","localStorage","getItem","inflate","target","objs","obj","isFrozen","setItem","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","App","getElementById"],"mappings":"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gBACA,kBAIA,cACA,6BACA,MACA,uDACA,gEAEA,kDATA,6CA+BA,gCACA,MACA,gDACA,4DACA,4BACA,sDACA,QA1BA,WACA,YACA,uBACA,0BAGA,iCAqBA,YAnBA,YACA,0CAmBA,UAjBA,YAEA,GADA,4CACA,WACA,uDACA,QACA,oBACA,wBAYA,mDACA,mDAEA,+CACA,2BACA,2BACA,gCCvFA,OAAgB,MA8DhB,cACA,+BACA,qDACA,sCACA,iHACA,4BACA,gEACA,6CACA,GAEA,kHAEA,2GC9EA,OAAgB,MAqChB,eACA,0FACA,oDACA,2EACA,oFAEA,aC1CA,OAAgB,MA0BhB,SAASmQ,GAAYjC,GACrB,+BACA,oCACA,oCACA,6BACA,iEACA,wBACA,qBACA,0CACA,cAOA,cACA,+BACA,gBAFA,EAGA,2BAHA,mBAGA,EAHA,KAGA,EAHA,KAOA,iDAPA,EAQA,uBARA,mBAQA,EARA,KAQA,EARA,OAkBA,gCAlBA,mBAkBA,EAlBA,KAkBA,EAlBA,KAuBA,OAJA,uEACA,eACA,WAEA,oCACA,+CACA,wDACA,+DAtBA,YACA,qBAsBA,4BACA,yBACA,mCAFA,QAKA,6CACA,yBACA,2BAFA,QAKA,4BACA,yBACA,gCAFA,OAKA,4BACA,yBACA,8BAFA,QAKA,4BACA,yBACA,8BAFA,QAKA,4BACA,yBACA,sCAFA,SAKA,4BACA,yBACA,uCAFA,QAKA,SACA,4BACA,yBACA,+BAFA,SAKA,iDACA,wCACA,2BACA,gBACA,gBACA,8DAGA,iEACA,+BApEA,YACA,gBACA,WACA,aACA,oBACA,uBAEA,WCzDA,OAAgB,MA8BhB,cACA,+BACA,yDACA,iHClCA,OAAgB,MAkChB,cACA,+BACA,+BACA,KAOA,OANA,gCACA,kCACA,GADA,IAEA,0EAGA,6CACA,4CACA,oCACA,yGACA,qDACA,uCAGA,6CACA,4DACA,oCACA,yGACA,qEACA,0FACA,8HC5DO,IAwBMkC,GAA0C,CACrDC,OAAQ,MACRC,SAAU,SACVC,KAAM,CACJ,IACA,IACA,GACA,OACA,0mBChCJ,GAAgB,MAkBhB,cACA,0DACA,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","file":"static/js/main.98764ba8.chunk.js","sourcesContent":["\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./design_system-DS.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./design_system-DS.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./design_system-DS.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1T682EN3wGuui_M4H8-h4d {\\n    background: transparent;\\n    border: none;\\n    outline: none;\\n    margin: 4px;\\n    padding: 8px 12px;\\n    color: white;\\n    font-size: 18px;\\n    font-weight: 600;\\n    box-sizing: border-box;\\n    border-radius: 2px;\\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\\n  }\\n\\n  ._1T682EN3wGuui_M4H8-h4d:hover {\\n    background: #505050;\\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\\n  }\\n\\n  ._1T682EN3wGuui_M4H8-h4d:active {\\n    outline: none;\\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\\n  }\\n\\n  ._3y7SXyz4JOCnc5uHwMgV6G {\\n    background: transparent;\\n    border: none;\\n    outline: none;\\n    margin: 4px;\\n    color: white;\\n    font-size: 18px;\\n    font-weight: 600;\\n    box-sizing: border-box;\\n    border-radius: 2px;\\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\\n  }\\n\\n  ._3y7SXyz4JOCnc5uHwMgV6G:hover {\\n    background: #505050;\\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\\n  }\\n\\n  ._3y7SXyz4JOCnc5uHwMgV6G:active {\\n    outline: none;\\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\\n  }\\n\\n  ._23Y2hTXZx4yRztG6Og2hsX {\\n    background: #A20B25;\\n  }\\n\\n  ._23Y2hTXZx4yRztG6Og2hsX:hover {\\n    background: #a03e4e;\\n  }\\n\\n  ._3TM3EDP4hscy9_4eMYFQ4j {\\n    font-size: 18px;\\n    background: transparent;\\n    color: white;\\n    border: none;\\n    border-bottom: 1px solid white;\\n    padding: 4px;\\n    margin: 4px;\\n    margin-bottom: 1px;\\n  }\\n  \\n  ._3TM3EDP4hscy9_4eMYFQ4j:focus {\\n    outline: none;\\n    border-bottom: 2px solid white;\\n    margin-bottom: 0px;\\n  }\\n\\n  ._1QialzHq4mUm3mfxM9dFjo {\\n    display: flex;\\n    flex-direction: column;\\n    background: #000;\\n    border-radius: 12px;\\n    padding: 8px;\\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\\n    color: white;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo svg {\\n    color: white;\\n    font-size: 24px;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo .y38q2UbGKcnf8XF1TwQCQ svg {\\n    color: black;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button {\\n    background: black;\\n    width: 50px;\\n    height: 50px;\\n    border: 1px solid white;\\n    outline: none;\\n    margin: 4px;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button:hover {\\n    background: #505050;\\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button:active {\\n    outline: none;\\n    border: none;\\n    scale: 0.9;\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button.y38q2UbGKcnf8XF1TwQCQ {\\n    background: #bbb;\\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\\n  }\\n  ._1QialzHq4mUm3mfxM9dFjo button[disabled] {\\n    background: #444;\\n    box-shadow: none;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"button\": \"_1T682EN3wGuui_M4H8-h4d\",\n\t\"buttonSmall\": \"_3y7SXyz4JOCnc5uHwMgV6G\",\n\t\"danger\": \"_23Y2hTXZx4yRztG6Og2hsX\",\n\t\"input\": \"_3TM3EDP4hscy9_4eMYFQ4j\",\n\t\"toolbar\": \"_1QialzHq4mUm3mfxM9dFjo\",\n\t\"selected\": \"y38q2UbGKcnf8XF1TwQCQ\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Description-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Description-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Description-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._3IlFEbyxwjKJ9Sy-1JAUwL {\\n    margin: 0;\\n    padding: 0 8px;\\n    color: white;\\n  }\\n  ._3IlFEbyxwjKJ9Sy-1JAUwL h1 {\\n    font-size: 24px;\\n    font-family: Helvetica serif;\\n    padding: 0 8px;\\n    margin: 0;\\n    color: white;\\n  }\\n  ._3IlFEbyxwjKJ9Sy-1JAUwL p {\\n    font-size: 18px;\\n    font-family: Helvetica serif;\\n    padding: 0;\\n    margin: 0;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"formattedText\": \"_3IlFEbyxwjKJ9Sy-1JAUwL\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./DescriptionEditor-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./DescriptionEditor-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./DescriptionEditor-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._3W5IvxPia75NSEZmFXoBmA {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n  ._3W5IvxPia75NSEZmFXoBmA textarea {\\n    height: 400px;\\n    outline: none;\\n    border: none;\\n  }\\n  ._3N02lA9zkh_pv4M7FdSKFQ {\\n    font-family: Helvetica serif;\\n    font-size: 24px;\\n    color: white;\\n    padding: 8px;\\n  }\\n  ._1QtaoYNAGXwdUqEuaQejp4 {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: flex-start;\\n    margin: 12px 24px;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"editor\": \"_3W5IvxPia75NSEZmFXoBmA\",\n\t\"name\": \"_3N02lA9zkh_pv4M7FdSKFQ\",\n\t\"actions\": \"_1QtaoYNAGXwdUqEuaQejp4\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./LevelEditor-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./LevelEditor-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./LevelEditor-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._3ZJnUkz9JITQGyOviOpcbX {\\n    font-family: Helvetica serif;\\n    font-size: 18px;\\n    color: white;\\n    padding: 8px;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"features\": \"_3ZJnUkz9JITQGyOviOpcbX\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Drawer-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Drawer-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Drawer-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._7wQ_KhraOD7XNV_7Gcnj4 {\\n    width: 0;\\n    margin: 8px 0;\\n    position: absolute;\\n    right: 0;\\n    top: 0;\\n    bottom: 0;\\n    background: #373737;\\n    box-sizing: border-box;\\n    transition: .2s ease-out;\\n  }\\n    ._7wQ_KhraOD7XNV_7Gcnj4._1MlyHLj10SQkIHXsiINIx1 {\\n      transition: .2s ease-out;\\n      z-index: 100;\\n    }\\n  ._2I5tLfqZmuI4hmhaiAXBzH {\\n    position: absolute;\\n    top: 0;\\n    left: -27px;\\n    background: #373737;\\n    color: white;\\n    outline: none;\\n    border: none;\\n    font-size: 30px;\\n    padding: 8px;\\n    border-radius: 4px 0 0 4px;\\n  }\\n  .NsuFqULDSfAB5HIY7HbUg {\\n    height: 97%;\\n    overflow: scroll;\\n    padding: 8px;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"drawer\": \"_7wQ_KhraOD7XNV_7Gcnj4\",\n\t\"open\": \"_1MlyHLj10SQkIHXsiINIx1\",\n\t\"toggleButton\": \"_2I5tLfqZmuI4hmhaiAXBzH\",\n\t\"editors\": \"NsuFqULDSfAB5HIY7HbUg\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Levels-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Levels-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Levels-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._2x2e-jPpIYhjiWsM5fkwAx {\\n    display: flex;\\n    flex-direction: column;\\n    position: absolute;\\n    bottom: 0;\\n    left: 0;\\n    background: #000;\\n    border-radius: 12px;\\n    margin-bottom: 50px;\\n    margin-left: 24px;\\n    padding: 8px;\\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\\n    color: white;\\n  }\\n  ._2x2e-jPpIYhjiWsM5fkwAx svg {\\n    color: white;\\n    font-size: 12px;\\n  }\\n  ._2x2e-jPpIYhjiWsM5fkwAx button {\\n    background: black;\\n    width: 24px;\\n    height: 24px;\\n    border: 1px solid white;\\n    outline: none;\\n    margin: 4px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    color: white;\\n  }\\n  ._2x2e-jPpIYhjiWsM5fkwAx button:hover {\\n    background: #505050;\\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\\n  }\\n  ._2x2e-jPpIYhjiWsM5fkwAx button:active {\\n    outline: none;\\n    border: none;\\n    scale: 0.9;\\n  }\\n  ._2x2e-jPpIYhjiWsM5fkwAx button._2oMwTA60o5UHJx7gURY1yl {\\n    color: black;\\n    background: #bbb;\\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\\n  }\\n  ._2x2e-jPpIYhjiWsM5fkwAx h4 {\\n    margin: 0;\\n    padding: 0;\\n  }\\n  ._3haVcWyQK8oSqJVT3L0FvF {\\n    display: flex;\\n  }\\n  button.bsoNJThBW3vZOA6dHyCxf {\\n    outline: none;\\n    border: none;\\n  }\\n  .bsoNJThBW3vZOA6dHyCxf:hover {\\n    cursor: pointer;\\n    text-decoration: underline;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"levels\": \"_2x2e-jPpIYhjiWsM5fkwAx\",\n\t\"selected\": \"_2oMwTA60o5UHJx7gURY1yl\",\n\t\"level\": \"_3haVcWyQK8oSqJVT3L0FvF\",\n\t\"link\": \"bsoNJThBW3vZOA6dHyCxf\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Modal-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Modal-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Modal-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1429OEOGcRhOAV0J3Gg-KT {\\n    position: fixed;\\n    z-index: 1000;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    height: 100%;\\n    overflow: auto;\\n    background-color: rgba(0, 0, 0, 0.4);\\n  }\\n\\n  ._1DN0JTMd6pHMuwsTOAvt2j {\\n    position: relative;\\n    background-color: #373737;\\n    color: #fff;\\n    margin: 64px auto;\\n    padding: 0 20px 20px 20px;\\n    border: 1px solid #888;\\n    border-radius: 8px;\\n    width: 60%;\\n  }\\n\\n  ._1DN0JTMd6pHMuwsTOAvt2j button {\\n    outline: none;\\n    border: none;\\n    background-color: transparent;\\n    color: #fff;\\n    font-size: 24px;\\n    position: absolute;\\n    top: 8px;\\n    right: 8px;\\n    text-decoration: none;\\n    cursor: pointer;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"modal\": \"_1429OEOGcRhOAV0J3Gg-KT\",\n\t\"modalContent\": \"_1DN0JTMd6pHMuwsTOAvt2j\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Menubar-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Menubar-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Menubar-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._2aM8m-4Xx92dNWnaEGRNME {\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    background: #373737;\\n    padding: 2px;\\n    width: 100%;\\n  }\\n  ._3HEPmFe0KP_qc9LRO7uwIh {\\n    color: white;\\n    margin: 8px 24px 8px 24px;\\n  }\\n  .yr0iF51zaJ_HOYfzQrmAp {\\n    margin-left: auto;\\n    margin-right: 24px;\\n  }\\n  label {\\n    color: white;\\n  }\\n  ._2HSpHXCXB2uWq9tBHwycOe:hover {\\n    text-decoration: underline;\\n    cursor: pointer;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"menubar\": \"_2aM8m-4Xx92dNWnaEGRNME\",\n\t\"title\": \"_3HEPmFe0KP_qc9LRO7uwIh\",\n\t\"debugMenu\": \"yr0iF51zaJ_HOYfzQrmAp\",\n\t\"mapLink\": \"_2HSpHXCXB2uWq9tBHwycOe\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Navigation-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Navigation-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Navigation-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  .UROfDRStLvXXdYxVcscBC {\\n    display: flex;\\n    flex-direction: column;\\n    position: absolute;\\n    bottom: 0;\\n    right: 0;\\n    padding: 8px;\\n    z-index: 1;\\n  }\\n  .UROfDRStLvXXdYxVcscBC svg {\\n    color: #505050;\\n    font-size: 24px;\\n  }\\n  .UROfDRStLvXXdYxVcscBC button {\\n    background: transparent;\\n    outline: none;\\n    border: none; \\n    display: flex;\\n    margin: 2px;\\n    align-items: center;\\n    justify-content: center;\\n    width: 24px;\\n    height: 24px;\\n  }\\n  .UROfDRStLvXXdYxVcscBC button:hover svg {\\n    color: #000;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"navigation\": \"UROfDRStLvXXdYxVcscBC\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./PrintLayout-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./PrintLayout-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./PrintLayout-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._2LtiBs0QFy0T6xn0SS2W3x {\\n    display: flex;\\n    flex-direction: column;\\n    font-family: Helvetica serif;\\n  }\\n  ._6Z9YH7Qxp_AWrunyTXjc7 {\\n    width: 8in;\\n    height: 10.5in;\\n    display: flex;\\n    flex-direction: column;\\n    margin-left: auto;\\n    margin-right: auto;\\n    border-bottom: 1px solid black;\\n    padding: 0.25in;\\n  }\\n  @media print {\\n    ._6Z9YH7Qxp_AWrunyTXjc7 {\\n      border-bottom: none !important;\\n    }\\n  }\\n  ._16g_MaPE_LtUpqw4wDWuQu {\\n    width: 8in;\\n    display: flex;\\n    flex-direction: column;\\n    margin-left: auto;\\n    margin-right: auto;\\n    padding: 0.25in;\\n  }\\n  ._12Z43iiBP-u95gnxi3Kjod {\\n    flex-grow: 1;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"print\": \"_2LtiBs0QFy0T6xn0SS2W3x\",\n\t\"page\": \"_6Z9YH7Qxp_AWrunyTXjc7\",\n\t\"pages\": \"_16g_MaPE_LtUpqw4wDWuQu\",\n\t\"canvasWrapper\": \"_12Z43iiBP-u95gnxi3Kjod\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Welcome-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Welcome-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Welcome-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._32RqLWb9TAlxHXLXW5Y7tH {\\n    display: flex;\\n    flex-direction: column;\\n  }\\n  ._32RqLWb9TAlxHXLXW5Y7tH a {\\n    color: white;\\n  }\\n  ._32RqLWb9TAlxHXLXW5Y7tH li {\\n    padding: 4px;\\n  }\\n  ._21_Zg-ByTQDDzrT0uY_Ufj {\\n    font-size: 16px;\\n    margin-left: auto;\\n    margin-right: auto;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"welcomePage\": \"_32RqLWb9TAlxHXLXW5Y7tH\",\n\t\"footer\": \"_21_Zg-ByTQDDzrT0uY_Ufj\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Tooltip-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Tooltip-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Tooltip-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._28mF98z4gM6RA9OdY-YuEy {\\n    color: white;\\n    background: black;\\n    border-radius: 4px;\\n    padding: 8px;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"tooltip\": \"_28mF98z4gM6RA9OdY-YuEy\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./Toggle-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./Toggle-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./Toggle-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1v-ohDNr7AFbOSKLT0CYxX {\\n    position: relative;\\n    display: inline-block;\\n    width: 100%;\\n    height: 34px;\\n  }\\n\\n  ._1v-ohDNr7AFbOSKLT0CYxX input {\\n    opacity: 0;\\n    width: 0;\\n    height: 0;\\n  }\\n\\n  ._2w1KenDtBt0Wyo3aJE-FRz {\\n    position: absolute;\\n    cursor: pointer;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: #ccc;\\n    -webkit-transition: .4s;\\n    transition: .4s;\\n    border-radius: 34px;\\n  }\\n\\n  ._2w1KenDtBt0Wyo3aJE-FRz:before {\\n    position: absolute;\\n    content: \\\"\\\";\\n    height: 26px;\\n    width: 26px;\\n    left: 4px;\\n    bottom: 4px;\\n    background-color: white;\\n    -webkit-transition: .4s;\\n    transition: .4s;\\n    border-radius: 50%;\\n  }\\n\\n  ._1v-ohDNr7AFbOSKLT0CYxX input:checked + ._2w1KenDtBt0Wyo3aJE-FRz {\\n    background-color: #2196F3;\\n  }\\n\\n  ._1v-ohDNr7AFbOSKLT0CYxX input:focus + ._2w1KenDtBt0Wyo3aJE-FRz {\\n    box-shadow: 0 0 1px #2196F3;\\n  }\\n\\n  ._1v-ohDNr7AFbOSKLT0CYxX input:checked + ._2w1KenDtBt0Wyo3aJE-FRz:before {\\n    -webkit-transform: translateX(26px);\\n    -ms-transform: translateX(26px);\\n    transform: translateX(26px);\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"toggle\": \"_1v-ohDNr7AFbOSKLT0CYxX\",\n\t\"slider\": \"_2w1KenDtBt0Wyo3aJE-FRz\"\n};\nmodule.exports = exports;\n","\nvar content = require(\"!!../node_modules/astroturf/css-loader.js!./App-classes.astroturf.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/astroturf/css-loader.js!./App-classes.astroturf.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/astroturf/css-loader.js!./App-classes.astroturf.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/astroturf/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n  ._1K0xKFlE3XhuIq8I1FpjrW {\\n    width: 100vw;\\n    height: 100vh;\\n    position: relative;\\n    display: flex;\\n    flex-direction: column;\\n  }\\n  ._21qBYvi1wyLFQ2lvKpGD4N {\\n    width: 100%;\\n    height: 100%;\\n    position: relative;\\n    display: flex;\\n    flex-direction: column;\\n  }\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"app\": \"_1K0xKFlE3XhuIq8I1FpjrW\",\n\t\"canvasWrapper\": \"_21qBYvi1wyLFQ2lvKpGD4N\"\n};\nmodule.exports = exports;\n","import * as PolyBool from 'polybooljs';\n\nimport { Feature, Geometry } from './State';\n\nexport function line(x0: number, y0: number, x1: number, y1: number): { x: number, y: number }[] {\n  const dx = Math.abs(x1 - x0);\n  const dy = Math.abs(y1 - y0);\n  const sx = (x0 < x1) ? 1 : -1;\n  const sy = (y0 < y1) ? 1 : -1;\n  let err = dx - dy;\n  const points = [];\n  while (true) {\n    points.push({ x: x0, y: y0 });\n    if ((x0 === x1) && (y0 === y1)) break;\n    var e2 = 2 * err;\n    if (e2 > -dy) { err -= dy; x0 += sx; }\n    if (e2 < dx) { err += dx; y0 += sy; }\n  }\n  return points;\n}\n\nexport function sqDist(a: number[], b: number[]): number {\n  return (b[0] - a[0]) * (b[0] - a[0]) + (b[1] - a[1]) * (b[1] - a[1]);\n}\n\nexport function dist(a: number[], b: number[]): number {\n  return Math.sqrt(sqDist(a, b));\n}\n\nexport function area(points: number[][]) {\n  let a = 0;\n  for (let i = 0; i < points.length; i++) {\n    const curr = points[i];\n    const next = points[i + 1];\n    a += curr[0] * next[0] - curr[1] * next[1];\n  }\n  return Math.abs(a / 2);\n}\n\nexport function lerp(d: number, from: number, to: number): number {\n  return from + (to - from) * d;\n}\n\nexport function lerp2(d: number, from: number[], to: number[]): number[] {\n  return [lerp(d, from[0], to[0]), lerp(d, from[1], to[1])];\n}\n\nexport function clamp(p: number, min: number, max: number): number {\n  if (p < min) return min;\n  if (p > max) return max;\n  return p;\n}\n\nexport function rgbToHex(r: number, g: number, b: number): string {\n  if (r < 0 || r > 255 || g < 0 || g > 255 || b < 0 || b > 255) throw new Error('Invalid color component');\n  return ((r << 16) | (g << 8) | b).toString(16);\n}\n\nexport function colorToIndex(r: number, g: number, b: number): number[] {\n  return [r, g];\n}\n\nexport function indexToColor(i: number, j: number): string {\n  if (i < 0 || i >= 256) throw new Error('Index out of range');\n  if (j < 0 || j >= 256) throw new Error('Index out of range');\n  return `rgb(${i}, ${j}, 0)`;\n}\n\nexport function bbox(points: number[][]) {\n  const minX = Math.min(...points.map(p => p[0]));\n  const maxX = Math.max(...points.map(p => p[0]));\n  const minY = Math.min(...points.map(p => p[1]));\n  const maxY = Math.max(...points.map(p => p[1]));\n  return {\n    sw: [minX, maxY],\n    ne: [maxX, minY],\n    w: maxX - minX,\n    h: maxY - minY,\n  };\n}\n\nexport function isCCW(ring: number[][]): boolean {\n  let signedArea = 0\n  ring.slice(0, ring.length - 1).forEach((point, i) => {\n    const [x2, y2] = ring[i + 1];\n    signedArea += (point[0] * y2 - x2 * point[1]);\n  });\n  return signedArea < 0;\n}\n\nfunction toPolyBoolPoly(geoms: Geometry[]): PolyBool.Polygon {\n  return {\n    regions: geoms.map(geom => geom.coordinates),\n    inverted: false,\n  };\n}\n\nfunction fromPolyBoolPoly(points: number[][]): Geometry {\n  return {\n    type: 'polygon',\n    coordinates: points,\n  };\n}\n\nexport function merge(geoms: Geometry[], geom: Geometry): Geometry[] {\n  const poly = PolyBool.union(toPolyBoolPoly(geoms), toPolyBoolPoly([geom]));\n  const merged = poly.regions.map(region => fromPolyBoolPoly(region));\n  merged.sort((a, b) => {\n    if (a.type === 'polygon' && b.type !== 'polygon') return -1;\n    if (b.type === 'polygon' && a.type !== 'polygon') return 1;\n    if (a.type !== 'polygon' && b.type !== 'polygon') return 0;\n    if (isCCW(a.coordinates) && isCCW(b.coordinates)) return 0;\n    if (isCCW(a.coordinates) && !isCCW(b.coordinates)) return -1;\n    return 1;\n  });\n  merged.forEach(geom => {\n    if (geom.type === 'polygon' && geom.coordinates[0] !== geom.coordinates[geom.coordinates.length - 1]) {\n      geom.coordinates.push([geom.coordinates[0][0], geom.coordinates[0][1]]);\n    }\n  })\n  return merged;\n}\n\nexport function closestPointToLine(p: number[], a: number[], b: number[]): { point: number[], distance: number } {\n  const ap = [p[0] - a[0], p[1] - a[1]]; // Line segment AP\n  const ab = [b[0] - a[0], b[1] - a[1]]; // Line segment AB\n  const ab2 = ab[0] * ab[0] + ab[1] * ab[1]; // Square magnitude of AB, ||AB||^2\n  const ap_dot_ab = ap[0] * ab[0] + ap[1] * ab[1] // Dot product, APAB\n  const d = clamp(ap_dot_ab / ab2, 0, 1); // Normalized distance from A to closest point\n  const point = [a[0] + ab[0] * d, a[1] + ab[1] * d];\n  return {\n    point: point,\n    distance: dist(point, p),\n  };\n}\n\ninterface ClosestPoint {\n  point: number[]\n  line: number[]\n  distance: number\n}\n\ninterface ClosestFeature {\n  feature: number\n  geometry: number\n  closestPoint: ClosestPoint\n}\n\nexport interface DoorPlacement extends ClosestFeature {\n  from: number[]\n  to: number[]\n}\n\nexport function closestPointToPolygon(point: number[], polygon: number[][]): ClosestPoint {\n  return polygon.map((a: number[], i: number) => {\n    return {\n      ...closestPointToLine(point, a, polygon[(i + 1) % polygon.length]),\n      line: [i, (i + 1) % polygon.length],\n    };\n  }).sort((a, b) => a.distance - b.distance)[0];\n}\n\nexport function detectDoorPlacement(point: number[], features: Feature[], fullWidth: boolean): DoorPlacement | undefined {\n  const closestFeature = features.flatMap((feature, i) => {\n    return feature.geometries.flatMap((geometry, j) => {\n      if (geometry.type === 'polygon') {\n        return {\n          feature: i,\n          geometry: j,\n          closestPoint: closestPointToPolygon(point, geometry.coordinates),\n        };\n      } else if (geometry.type === 'line') {\n        return {\n          feature: i,\n          geometry: j,\n          closestPoint: {\n            ...closestPointToLine(point, geometry.coordinates[0], geometry.coordinates[1]),\n            line: [0, 1],\n          },\n        };\n      }\n      return undefined;\n    });\n  }).sort((a, b) => {\n    if (a === undefined || b === undefined) return Infinity;\n    return a.closestPoint.distance - b.closestPoint.distance;\n  })[0];\n  if (!closestFeature) return undefined;\n  return computeDoorPlacement(closestFeature, features, fullWidth);\n}\n\nfunction computeDoorPlacement(f: ClosestFeature, features: Feature[], fullWidth: boolean): DoorPlacement | undefined {\n  const geom = features[f.feature].geometries[f.geometry];\n  if (!['polygon', 'line'].includes(geom.type)) return undefined;\n  const coords = geom.coordinates;\n  const from = coords[f.closestPoint.line[0]];\n  const to = coords[f.closestPoint.line[1]];\n\n  if (fullWidth) {\n    return { ...f, from: [...from], to: [...to] };\n  }\n\n  const center = f.closestPoint.point;\n  const slope = (to[1] - from[1]) / (to[0] - from[0]);\n\n  const vdy1 = (Math.floor(center[1]) - from[1]);\n  const vdx1 = vdy1 / slope;\n  const vdy2 = (Math.ceil(center[1]) - from[1]);\n  const vdx2 = vdy2 / slope;\n\n  const hdx1 = (Math.floor(center[0]) - from[0]);\n  const hdy1 = hdx1 * slope;\n  const hdx2 = (Math.ceil(center[0]) - from[0]);\n  const hdy2 = hdx2 * slope;\n\n  const vfrom = [from[0] + vdx1, from[1] + vdy1];\n  const vto = [from[0] + vdx2, from[1] + vdy2];\n  const vdist = dist(vfrom, vto);\n\n  const hfrom = [from[0] + hdx1, from[1] + hdy1];\n  const hto = [from[0] + hdx2, from[1] + hdy2];\n  const hdist = dist(hfrom, hto);\n\n  if ((isNaN(hdist) || vdist <= hdist) && vdist > 0) {\n    return {\n      ...f,\n      from: vfrom,\n      to: vto,\n    };\n  } else if ((isNaN(vdist) || hdist < vdist) && hdist > 0) {\n    return {\n      ...f,\n      from: hfrom,\n      to: hto,\n    };\n  }\n  return undefined;\n}\n\nexport function centroid(ring: number[][]): number[] {\n  let twicearea = 0;\n  let x = 0;\n  let y = 0;\n  for (let i = 0, j = ring.length - 1; i < ring.length; j = i++) {\n    const p1 = ring[i];\n    const p2 = ring[j];\n    const f = p1[0] * p2[1] - p2[0] * p1[1];\n    twicearea += f;\n    x += (p1[0] + p2[0]) * f;\n    y += (p1[1] + p2[1]) * f;\n  }\n  const f = twicearea * 3;\n  return [x / f, y / f];\n}","export default { \"name\": \"Temple of Clanggedin\", \"description\": \"The Temple to Clanggedin Silverbeard, Father of Battle and the Lord of the Twin Axes, was occupied by a group of Shield Dwarves until recently. The Temple was dug into a nearby cliffside, set up as a forward operating base for dealing with the giants endemic to the mountains.\\n\\nRecently, the dwarves were ambushed. A clan of goblins allied with the giants to lure the dwarves out and take over the temple. The dwarves were nearly annihilated by the giants, with only a few making it back to town to report.\\n\\nSince then, the goblins have grown bolder, striking out from their safe base to raid caravans and the occasional farm. The villagers have had enough and convinced the local lord to offer a sizable reward to any adventurers brave enough to root the goblins out of the temple and reclaim it for the civilized world.\", \"levels\": [{ \"features\": [{ \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[34, 30], [34, 27.5], [31.5, 27.5], [31.5, 29.5], [31, 29.5], [31, 24], [30, 24], [30, 29.5], [29.5, 29.5], [29.5, 27.5], [27, 27.5], [27, 30], [29.5, 30], [30, 29.75], [30, 30], [31, 30], [31, 29.75], [31.5, 30], [34, 30]] }, { \"type\": \"door\", \"coordinates\": [[30, 24], [31, 24]], \"subtype\": \"normal\" }, { \"type\": \"door\", \"coordinates\": [[30, 30], [31, 30]], \"subtype\": \"normal\" }], \"properties\": { \"type\": \"room\", \"name\": \"Main Entrance\", \"description\": \"The entrance is flanked by two arrow slits leading to two small guard rooms. \\n\\nFour **goblins** guard this area, two on either side. They are arguing about dinner and playing dice and have disadvantage on perception checks to stealth past.\\n\\nIf alerted, they use the secret passages on either side to flee and notify the rest of the group.\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[30, 27], [30, 24], [27, 24], [27, 27], [28, 27], [28, 27.5], [29, 27.5], [29, 27], [30, 27]] }, { \"type\": \"polygon\", \"coordinates\": [[34, 27], [34, 24], [31, 24], [31, 27], [32, 27], [32, 27.5], [33, 27.5], [33, 27], [34, 27]] }, { \"type\": \"door\", \"coordinates\": [[28, 27.5], [29, 27.5]], \"subtype\": \"normal\" }, { \"type\": \"door\", \"coordinates\": [[32, 27.5], [33, 27.5]], \"subtype\": \"normal\" }, { \"type\": \"door\", \"coordinates\": [[31, 25], [31, 26]], \"subtype\": \"normal\" }, { \"type\": \"door\", \"coordinates\": [[30, 25], [30, 26]], \"subtype\": \"normal\" }], \"properties\": { \"type\": \"room\", \"name\": \"Entry Chambers\", \"description\": \"These chambers were used to host guests coming to the temple, as well as places for the guards to rest. Now they sit empty.\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[34, 24.5]] }], \"properties\": { \"type\": \"room\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[27, 29], [27, 28.5], [26.5, 28.5], [26.5, 25], [27, 25], [27, 24.5], [26.5, 24.5], [26.5, 24], [26, 24], [26, 29], [27, 29]] }], \"properties\": { \"type\": \"room\", \"name\": \"Secret Passage\", \"description\": \"These 2.5ft wide corridors are just big enough for a medium-sized creature to squeeze into. The door from the guard room is visible, but the other entrances are secret doors that require either a **Perception** check (DC 20) or a 10 minute **Investigation** (DC 10) to notice.\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[33.5, 21.5], [33.5, 20.5], [33, 20.5], [33, 17.5], [33.5, 17.5], [33.5, 16.5], [33, 16.5], [33, 14], [31, 14], [31, 13], [30, 13], [30, 14], [28, 14], [28, 16.5], [27.5, 16.5], [27.5, 17.5], [28, 17.5], [28, 20.5], [27.5, 20.5], [27.5, 21.5], [28, 21.5], [28, 24], [33, 24], [33, 21.5], [33.5, 21.5]] }, { \"type\": \"decoration\", \"coordinates\": [[28, 18.5], [29, 19.5]], \"subtype\": \"statue\" }, { \"type\": \"decoration\", \"coordinates\": [[28, 15], [29, 16]], \"subtype\": \"statue\" }, { \"type\": \"decoration\", \"coordinates\": [[32, 15], [32.5, 16]], \"subtype\": \"statue\" }, { \"type\": \"decoration\", \"coordinates\": [[32, 18.5], [32.5, 19.5]], \"subtype\": \"statue\" }, { \"type\": \"decoration\", \"coordinates\": [[28, 22], [29, 23]], \"subtype\": \"statue\" }, { \"type\": \"decoration\", \"coordinates\": [[32, 22], [33, 23]], \"subtype\": \"statue\" }, { \"type\": \"door\", \"coordinates\": [[30, 13], [31, 13]], \"subtype\": \"normal\" }], \"properties\": { \"type\": \"room\", \"name\": \"Main Hall\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[43, 24], [43, 19.5], [34, 19.5], [34, 20.5], [33.5, 20.5], [33.5, 21.5], [34, 21.5], [34, 24], [43, 24]] }, { \"type\": \"door\", \"coordinates\": [[33.5, 20.5], [33.5, 21.5]], \"subtype\": \"normal\" }], \"properties\": { \"type\": \"room\", \"name\": \"Armory\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[43, 19], [43, 14], [34, 14], [34, 16.5], [33.5, 16.5], [33.5, 17.5], [34, 17.5], [34, 19], [38, 19], [38, 19.5], [39, 19.5], [39, 19], [43, 19]] }, { \"type\": \"door\", \"coordinates\": [[33.5, 16.5], [33.5, 17.5]], \"subtype\": \"normal\" }, { \"type\": \"door\", \"coordinates\": [[38, 19.5], [39, 19.5]], \"subtype\": \"normal\" }], \"properties\": { \"type\": \"room\", \"name\": \"Barracks\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[27.5, 21.5], [27.5, 20.5], [27, 20.5], [27, 19], [22, 19], [22, 24], [27, 24], [27, 21.5], [27.5, 21.5]] }, { \"type\": \"door\", \"coordinates\": [[27.5, 21.5], [27.5, 20.5]], \"subtype\": \"normal\" }, { \"type\": \"door\", \"coordinates\": [[24, 19], [25, 19]], \"subtype\": \"normal\" }, { \"type\": \"door\", \"coordinates\": [[22, 22], [22, 23]], \"subtype\": \"normal\" }], \"properties\": { \"type\": \"room\", \"name\": \"Kitchen\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[34, 24.5]] }], \"properties\": { \"type\": \"room\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[27.5, 17.5], [27.5, 16.5], [27, 16.5], [27, 14], [19, 14], [19, 19], [27, 19], [27, 17.5], [27.5, 17.5]] }, { \"type\": \"door\", \"coordinates\": [[27.5, 17.5], [27.5, 16.5]], \"subtype\": \"normal\" }, { \"type\": \"door\", \"coordinates\": [[19, 19], [20, 19]], \"subtype\": \"normal\" }], \"properties\": { \"type\": \"room\", \"name\": \"Dining Hall\" } }, { \"properties\": { \"type\": \"room\", \"name\": \"Commode\" }, \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[19, 21], [22, 21], [22, 19], [19, 19], [19, 21]] }] }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[19, 24], [22, 24], [22, 21], [19, 21], [19, 24]] }], \"properties\": { \"type\": \"room\", \"name\": \"Pantry\" } }, { \"geometries\": [{ \"type\": \"ellipse\", \"coordinates\": [[26, 13], [35, 4]] }, { \"type\": \"decoration\", \"coordinates\": [[27, 8], [28, 9]], \"subtype\": \"column\" }, { \"type\": \"decoration\", \"coordinates\": [[29.5, 5], [31.5, 7]], \"subtype\": \"statue\" }, { \"type\": \"decoration\", \"coordinates\": [[33, 8], [34, 9]], \"subtype\": \"column\" }], \"properties\": { \"type\": \"room\", \"name\": \"Altar to Clanggedin\" } }, { \"properties\": { \"type\": \"room\", \"name\": \"\" }, \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[35, 29], [35, 24], [34.5, 24], [34.5, 24.5], [34, 24.5], [34, 25], [34.5, 25], [34.5, 28.5], [34, 28.5], [34, 29], [35, 29]] }] }, { \"geometries\": [{ \"type\": \"line\", \"coordinates\": [[34, 28.5], [34, 29]] }], \"properties\": { \"type\": \"other\" } }, { \"geometries\": [{ \"type\": \"line\", \"coordinates\": [[27, 28.5], [27, 29]] }], \"properties\": { \"type\": \"other\" } }, { \"geometries\": [{ \"type\": \"ellipse\", \"coordinates\": [[59, 14.5], [65.5, 11]] }, { \"type\": \"brush\", \"coordinates\": [[60.15345814224975, 11.371120556895779], [60.24354823233984, 11.281030466805687], [60.36366835245995, 11.220970406745629], [60.60390859270019, 11.070820256595479], [60.784088772880374, 10.980730166505388], [60.964268953060554, 10.8906400764153], [61.26456925336085, 10.800549986325212], [61.44474943354103, 10.77051995629518], [61.68498967378127, 10.77051995629518], [62.13544012423172, 10.800549986325212], [62.375680364471954, 10.800549986325212], [62.615920604712194, 10.860610046385268], [62.97628096507255, 10.92067010644533], [63.096401085192674, 10.950700136475358], [63.15646114525273, 10.980730166505388], [63.21652120531279, 11.01076019653542], [63.33664132543291, 11.100850286625509], [63.51682150561309, 11.190940376715597], [63.66697165576324, 11.220970406745629], [63.93724192603351, 11.281030466805687], [64.05736204615363, 11.311060496835719], [64.2375422263338, 11.341090526865747], [64.38769237648395, 11.371120556895779], [64.5378425266341, 11.401150586925807], [64.71802270681428, 11.461210646985867], [64.80811279690437, 11.491240677015897], [64.92823291702449, 11.521270707045925], [65.16847315726473, 11.551300737075957], [65.28859327738485, 11.611360797136017], [65.31862330741488, 11.671420857196075], [65.3486533374449, 11.701450887226105], [65.3486533374449, 11.731480917256135], [65.40871339750497, 11.851601037376254], [65.438743427535, 11.971721157496374], [65.49880348759505, 12.272021457796674], [65.52883351762509, 12.452201637976852], [65.52883351762509, 12.54229172806694], [65.52883351762509, 12.602351788127], [65.49880348759505, 12.662411848187059], [65.438743427535, 12.72247190824712], [65.438743427535, 12.78253196830718], [65.37868336747493, 12.84259202836724], [65.31862330741488, 12.902652088427299], [65.25856324735481, 13.02277220854742], [65.2285332173248, 13.112862298637507], [65.19850318729476, 13.232982418757627], [65.16847315726473, 13.353102538877748], [65.07838306717464, 13.443192628967836], [65.01832300711457, 13.533282719057926], [64.98829297708455, 13.563312749087954], [64.80811279690437, 13.683432869208076], [64.65796264675423, 13.803552989328194], [64.65796264675423, 13.803552989328194], [64.65796264675423, 13.833583019358224], [64.65796264675423, 13.833583019358224], [64.65796264675423, 13.863613049388254], [64.65796264675423, 13.893643079418284], [64.65796264675423, 13.953703139478343]] }, { \"type\": \"brush\", \"coordinates\": [[63.276581265372855, 14.374123559898761], [63.18649117528276, 14.404153589928791], [62.76607075486234, 14.464213649988851], [62.52583051462211, 14.464213649988851], [62.375680364471954, 14.464213649988851], [62.315620304411894, 14.464213649988851], [62.2255302143218, 14.464213649988851], [62.075380064171654, 14.464213649988851], [61.89519988399148, 14.494243680018881], [61.53483952363112, 14.52427371004891], [61.08438907318067, 14.58433377010897], [60.904208893000494, 14.614363800139], [60.784088772880374, 14.614363800139], [60.724028712820314, 14.58433377010897], [60.69399868279028, 14.554303740078941], [60.66396865276025, 14.52427371004891], [60.63393862273022, 14.494243680018881], [60.54384853264013, 14.434183619958821], [60.5138185026101, 14.404153589928791], [60.45375844255004, 14.344093529868731], [60.36366835245995, 14.284033469808671], [60.18348817227977, 14.193943379718583], [60.06336805215965, 14.133883319658521], [59.94324793203953, 14.103853289628493], [59.76306775185936, 14.013763199538403], [59.64294763173924, 13.953703139478343], [59.492797481589086, 13.893643079418284], [59.34264733143894, 13.833583019358224], [59.28258727137888, 13.773522959298164], [59.25255724134885, 13.743492929268136], [59.22252721131882, 13.713462899238104], [59.22252721131882, 13.683432869208076], [59.19249718128879, 13.623372809148014], [59.132437121228726, 13.533282719057926], [59.10240709119871, 13.443192628967836], [59.04234703113864, 13.263012448787658], [59.04234703113864, 13.172922358697567], [59.07237706116867, 13.052802238577447], [59.10240709119871, 12.932682118457329], [59.07237706116867, 12.84259202836724], [59.07237706116867, 12.78253196830718], [59.10240709119871, 12.69244187821709], [59.132437121228726, 12.602351788127], [59.16246715125876, 12.452201637976852], [59.19249718128879, 12.42217160794682], [59.22252721131882, 12.392141577916792], [59.22252721131882, 12.392141577916792]] }, { \"type\": \"decoration\", \"coordinates\": [[61, 11.5], [63.5, 12]], \"subtype\": \"column\" }], \"properties\": { \"type\": \"room\", \"name\": \"Cavernous Pit\", \"description\": \"The center of this cavern has large pit that descends into the darkness.\" } }, { \"geometries\": [{ \"type\": \"brush\", \"coordinates\": [[59.91038468782345, 11.992837343841897], [59.702051354490116, 11.873789724794278], [59.31514659258536, 11.75474210574666], [58.74967040210917, 11.635694486699041], [58.27347992591869, 11.516646867651422], [57.85681325925203, 11.457123058127614], [57.559194211632985, 11.42736115336571], [57.26157516401394, 11.42736115336571], [56.93419421163299, 11.42736115336571], [56.725860878299656, 11.457123058127614], [56.398479925918714, 11.486884962889519], [55.95205135449014, 11.576170677175233], [55.267527544966335, 11.75474210574666], [54.55324183068062, 11.992837343841897], [53.422289449728254, 12.260694486699037], [52.916337068775874, 12.320218296222846], [52.38062278306159, 12.320218296222846], [51.99371802115683, 12.320218296222846], [51.517527544966356, 12.29045639146094], [50.80324183068065, 12.29045639146094], [50.14847992591875, 12.29045639146094], [48.987765640204465, 12.201170677175229], [48.51157516401399, 12.141646867651419], [48.035384687823516, 12.08212305812761], [47.648479925918764, 12.052361153365705], [47.2913370687759, 12.052361153365705], [46.54728944972829, 12.0225992486038], [46.07109897353782, 12.0225992486038], [45.59490849734735, 11.992837343841897], [45.297289449728304, 11.963075439079992], [44.731813259252114, 11.903551629556182], [44.37467040210926, 11.844027820032373], [44.166337068775924, 11.81426591527047], [43.86871802115688, 11.784504010508563], [43.511575164014026, 11.784504010508563], [43.3032418306807, 11.784504010508563], [43.18419421163308, 11.784504010508563], [43.09490849734736, 11.784504010508563], [42.97586087829974, 11.784504010508563], [42.82705135449022, 11.784504010508563], [42.58895611639499, 11.81426591527047], [42.41038468782356, 11.844027820032373], [42.23181325925213, 11.873789724794278], [42.20205135449022, 11.903551629556182], [42.17228944972832, 11.903551629556182], [42.112765640204515, 11.933313534318087], [42.02347992591879, 11.992837343841897], [41.934194211633084, 12.052361153365705], [41.815146592585464, 12.111884962889516], [41.63657516401404, 12.171408772413322], [41.54728944972832, 12.230932581937132], [41.487765640204515, 12.260694486699037], [41.428241830680705, 12.320218296222846], [41.3687180211569, 12.379742105746656], [41.30919421163309, 12.439265915270465], [41.27943230687118, 12.498789724794275], [41.24967040210928, 12.558313534318083], [41.21990849734737, 12.588075439079988], [41.19014659258547, 12.677361153365702], [41.160384687823566, 12.73688496288951], [41.160384687823566, 12.766646867651415], [41.160384687823566, 12.826170677175224], [41.13062278306166, 12.855932581937129], [41.13062278306166, 12.915456391460937], [41.100860878299756, 12.974980200984747], [41.100860878299756, 13.034504010508556], [41.100860878299756, 13.034504010508556], [41.100860878299756, 13.034504010508556], [41.100860878299756, 13.064265915270461], [41.100860878299756, 13.064265915270461], [41.100860878299756, 13.064265915270461]] }], \"properties\": { \"type\": \"room\", \"name\": \"Backdoor\", \"description\": \"The secret door here is clearly visible from the cavern side, where rough rock walls turn into a smooth stone door. From the other side it requires a **Perception** check (DC 20) or a 30 minute **Investigation** check (DC 15). The goblins have yet to notice this chink in their armor.\" } }, { \"geometries\": [{ \"type\": \"brush\", \"coordinates\": [[67.97586087829959, 29.96902782003226], [67.97586087829959, 29.730932581937022], [67.97586087829959, 29.25474210574655], [67.97586087829959, 28.65950401050846], [67.94609897353769, 28.153551629556084], [67.73776564020436, 27.558313534317985], [67.58895611639483, 27.290456391460847], [67.44014659258531, 26.992837343841803], [67.26157516401388, 26.605932581937047], [67.05324183068055, 26.040456391460854], [66.39847992591864, 24.820218296222766], [65.98181325925198, 23.957123058127536], [65.77347992591865, 23.332123058127543], [65.65443230687103, 22.82617067717516], [65.65443230687103, 22.260694486698974], [65.65443230687103, 21.724980200984692], [65.59490849734722, 21.338075439079937], [65.50562278306151, 20.951170677175174], [65.35681325925198, 20.415456391460893], [64.94014659258532, 19.463075439079944], [64.731813259252, 18.957123058127568], [64.55324183068056, 18.510694486698995], [64.43419421163294, 18.034504010508524], [64.19609897353772, 17.14164686765139], [64.19609897353772, 16.63569448669901], [64.28538468782342, 16.278551629556155], [64.31514659258532, 16.099980200984728], [64.28538468782342, 16.070218296222823], [64.25562278306151, 15.98093258193711], [64.1663370687758, 15.832123058127587], [64.106813259252, 15.504742105746637], [64.13657516401389, 15.296408772413304], [64.19609897353772, 15.088075439079972], [64.19609897353772, 14.998789724794257], [64.19609897353772, 14.969027820032354], [64.19609897353772, 14.969027820032354], [64.22586087829961, 14.87974210574664], [64.22586087829961, 14.760694486699022], [64.1663370687758, 14.641646867651405], [64.106813259252, 14.463075439079976], [64.07705135449008, 14.373789724794262], [64.07705135449008, 14.373789724794262], [64.07705135449008, 14.344027820032357], [64.07705135449008, 14.344027820032357], [64.04728944972818, 14.284504010508549], [63.958003735442475, 14.224980200984739], [63.86871802115675, 14.16545639146093], [63.80919421163295, 14.135694486699027], [63.80919421163295, 14.135694486699027]] }], \"properties\": { \"type\": \"room\", \"name\": \"Side Entrance\", \"description\": \"Hidden behind some bushes to the East is the secret side entrance. Finding this entrance is either a **Perception** check (DC \" } }, { \"geometries\": [{ \"type\": \"brush\", \"coordinates\": [[66.51982450861607, 25.455204640979773], [66.48979447858603, 25.425174610949746], [66.36967435846593, 25.365114550889682], [66.0393440281356, 25.305054490829622], [65.70901369780526, 25.275024460799592], [65.46877345756504, 25.275024460799592], [65.19850318729476, 25.305054490829622], [65.07838306717464, 25.305054490829622], [64.8381428269344, 25.425174610949746], [64.11742210621368, 25.635384821159953], [63.69700168579326, 25.7855349713101], [63.24655123534282, 25.905655091430223], [62.28559027438187, 26.05580524158037], [61.95525994405154, 26.085835271610396], [61.65495964375123, 26.11586530164043], [61.47477946357106, 26.11586530164043], [61.20450919330079, 26.085835271610396], [60.84414883294043, 26.02577521155034], [60.57387856267017, 25.96571515149028], [60.33363832242993, 25.87562506140019], [60.09339808218969, 25.815565001340133], [59.79309778188939, 25.69544488122001], [59.67297766176927, 25.635384821159953], [59.552857541649146, 25.575324761099896], [59.43273742152903, 25.485234671009803], [59.28258727137888, 25.425174610949746], [59.04234703113864, 25.365114550889682], [58.89219688098849, 25.365114550889682], [58.65195664074825, 25.335084520859656], [58.41171640050801, 25.305054490829622], [58.17147616026777, 25.154904340679476], [57.93123592002754, 24.914664100439236], [57.420725409517026, 24.644393830168966], [57.27057525936688, 24.524273710048853], [57.150455139246766, 24.34409352986867], [57.03033501912664, 24.16391334968849], [56.94024492903655, 23.923673109448252], [56.82012480891644, 23.653402839177982], [56.51982450861613, 23.14289232866747], [56.309614298405926, 22.81256199833714], [55.9792839680756, 22.392141577916732], [55.28859327738491, 21.79154097731613], [54.718022706814345, 21.43118061695577], [53.87718186597351, 21.01076019653536], [53.60691159570324, 20.890640076415238], [53.51682150561315, 20.800549986325148], [53.51682150561315, 20.710459896235058], [53.48679147558312, 20.650399836174998], [53.366671355463005, 20.50024968602485], [53.33664132543297, 20.109859295634465], [53.33664132543297, 19.359108544883718], [53.24655123534288, 18.728477914253087], [53.21652120531285, 18.54829773407291], [53.21652120531285, 18.54829773407291]] }, { \"type\": \"brush\", \"coordinates\": [[56.91021489900652, 24.13388331965846], [56.70000468879631, 24.16391334968849], [56.51982450861613, 24.13388331965846], [56.21952420831584, 24.13388331965846], [55.79910378789542, 24.16391334968849], [55.64895363774527, 24.193943379718522], [55.46877345756509, 24.284033469808605], [55.28859327738491, 24.374123559898695], [54.898202886994525, 24.58433377010891], [54.62793261672425, 24.76451395028909], [54.297602286393925, 24.974724160499296], [53.72703171582336, 25.365114550889682], [53.366671355463005, 25.575324761099896], [52.79610078489244, 25.905655091430223], [52.465770454562104, 26.11586530164043], [51.9552599440516, 26.47622566200079], [51.684989673781324, 26.626375812150936], [51.294599283390944, 26.836586022361143], [51.02432901312067, 26.956706142481266], [50.54384853264019, 27.106856292631413], [50.27357826236993, 27.166916352691473], [49.943247932039604, 27.196946382721503], [49.67297766176933, 27.196946382721503], [49.49279748158915, 27.196946382721503], [49.462767451559124, 27.166916352691473], [49.462767451559124, 27.106856292631413], [49.462767451559124, 27.106856292631413]] }, { \"type\": \"brush\", \"coordinates\": [[55.6301848689765, 21.69169112746629], [55.769073757865385, 21.52502446079962], [56.13018486897649, 21.080580016355178], [56.4912959800876, 20.663913349688514], [56.68574042453205, 20.413913349688514], [57.074629313420935, 19.775024460799628], [57.18574042453204, 19.386135571910746], [57.26907375786538, 19.10835779413297], [57.324629313420935, 18.830580016355192], [57.324629313420935, 18.60835779413297], [57.352407091198714, 18.302802238577417], [57.40796264675427, 17.99724668302186], [57.54685153564315, 17.608357794132978], [57.71351820230982, 17.247246683021867], [57.852407091198714, 16.88613557191076], [58.130184868976485, 16.469468905244092], [58.32462931342093, 16.330580016355206], [58.46351820230982, 16.27502446079965], [58.51907375786537, 16.27502446079965], [58.57462931342093, 16.27502446079965], [58.60240709119871, 16.27502446079965], [58.60240709119871, 16.27502446079965], [58.60240709119871, 16.27502446079965]] }], \"properties\": { \"type\": \"room\", \"description\": \"A colony of **vampire bats** lives here. The bats sleep during the day and go out at night to hunt. Sneaking past the bats is possible (**Stealth** DC 10), but if awoken they attack.\", \"name\": \"Bat Country\" } }, { \"geometries\": [{ \"type\": \"polygon\", \"coordinates\": [[41, 14], [41.5, 14], [41.5, 13], [41, 13], [41, 14]] }], \"properties\": { \"type\": \"room\" } }, { \"geometries\": [{ \"type\": \"line\", \"coordinates\": [[41, 14], [41.5, 14]] }, { \"type\": \"door\", \"coordinates\": [[41, 14], [41.5, 14]], \"subtype\": \"secret\" }], \"properties\": { \"type\": \"other\" } }, { \"geometries\": [{ \"type\": \"line\", \"coordinates\": [[34.5, 24], [35, 24]] }, { \"type\": \"door\", \"coordinates\": [[34.5, 24], [35, 24]], \"subtype\": \"secret\" }], \"properties\": { \"type\": \"other\" } }, { \"geometries\": [{ \"type\": \"line\", \"coordinates\": [[34, 24.5], [34, 25]] }, { \"type\": \"door\", \"coordinates\": [[34, 24.5], [34, 25]], \"subtype\": \"secret\" }], \"properties\": { \"type\": \"other\" } }, { \"geometries\": [{ \"type\": \"line\", \"coordinates\": [[27, 24.5], [27, 25]] }, { \"type\": \"door\", \"coordinates\": [[27, 24.5], [27, 25]], \"subtype\": \"secret\" }], \"properties\": { \"type\": \"other\" } }, { \"geometries\": [{ \"type\": \"line\", \"coordinates\": [[26, 24], [26.5, 24]] }, { \"type\": \"door\", \"coordinates\": [[26, 24], [26.5, 24]], \"subtype\": \"secret\" }], \"properties\": { \"type\": \"other\" } }, { \"geometries\": [{ \"type\": \"line\", \"coordinates\": [[30, 5], [31, 5]] }, { \"type\": \"door\", \"coordinates\": [[30, 5], [31, 5]], \"subtype\": \"secret\" }], \"properties\": { \"type\": \"other\" } }, { \"geometries\": [{ \"type\": \"line\", \"coordinates\": [[67.5, 30.5], [68.5, 30.5]] }, { \"type\": \"door\", \"coordinates\": [[67.5, 30.5], [68.5, 30.5]], \"subtype\": \"secret\" }], \"properties\": { \"type\": \"other\" } }], \"name\": \"Main Level\", \"description\": \"\" }] }","import React from 'react';\nimport { produce } from 'immer';\n\nimport { DoorPlacement, isCCW, merge } from './lib';\nimport TempleOfClangeddin from './examples/TempleOfClangeddin';\n\nlet undoStack = [] as string[];\nlet redoStack = [] as string[];\n\nfunction modify(options?: { undoable: boolean }) {\n  return function (\n    state: State,\n    propertyKey: string,\n    descriptor: PropertyDescriptor\n  ) {\n    const modifierFn = descriptor.value;\n    descriptor.value = function () {\n      const args = Array.from(arguments);\n      (this as any).setState(produce(this, (newState: State) => {\n        const prev = JSON.stringify(newState.maps[newState.selection.mapIndex]);\n        modifierFn.bind(newState)(...args);\n        const curr = JSON.stringify(newState.maps[newState.selection.mapIndex]);\n        if (options && options.undoable && (undoStack.length === 0 || undoStack[undoStack.length - 1] !== prev) && curr !== prev) {\n          undoStack.push(prev);\n          if (undoStack.length > 100) undoStack.splice(0, undoStack.length - 100);\n        }\n        if (newState.hasOwnProperty('notifyChange')) {\n          newState.notifyChange();\n        }\n      }));\n    };\n  };\n}\n\nconst initialTools = () => ({\n  'pointer': {\n    selected: true,\n    group: 0,\n    polygon: true,\n    disabled: false,\n  },\n  'walls': {\n    selected: false,\n    group: 1,\n    polygon: true,\n    disabled: false,\n  },\n  'stairs': {\n    selected: false,\n    group: 1,\n    polygon: false,\n    disabled: false,\n  },\n  'doors': {\n    selected: false,\n    group: 1,\n    polygon: false,\n    disabled: false,\n    subtype: 'normal' as DoorType,\n  },\n  'decoration': {\n    selected: false,\n    group: 1,\n    polygon: false,\n    disabled: false,\n    subtype: 'statue' as DecorationType,\n  },\n  'brush': {\n    selected: false,\n    group: 2,\n    polygon: true,\n    disabled: false,\n  },\n  'rect': {\n    selected: false,\n    group: 2,\n    polygon: true,\n    disabled: false,\n  },\n  'polygon': {\n    selected: false,\n    group: 2,\n    polygon: true,\n    disabled: false,\n  },\n  'ellipse': {\n    selected: false,\n    group: 2,\n    polygon: true,\n    disabled: false,\n  },\n});\n\nexport type ToolName = keyof ReturnType<typeof initialTools>;\n\nexport class State {\n  tools = initialTools()\n  scale = 1\n  offset = [0, 0]\n  maps = [TempleOfClangeddin] as Map[]\n  drawerOpen = false\n  drawerWidth = 400\n  selection = {\n    mapIndex: 0 as number,\n    levelIndex: 0 as number,\n    featureIndex: undefined as number | undefined,\n    geometryIndex: undefined as number | undefined\n  }\n  gridSteps: number = 1\n  debug = false\n  showWelcome = true\n  setState = (state: any) => { }\n  notifyChange = () => { }\n\n  getSelectedFeature(): { feature: Feature, geometry: Geometry } | undefined {\n    if (this.selection.featureIndex === undefined) return undefined;\n    if (this.selection.geometryIndex === undefined) return undefined;\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const feature = level.features[this.selection.featureIndex];\n    return {\n      feature: feature,\n      geometry: feature.geometries[this.selection.geometryIndex],\n    };\n  }\n\n  @modify()\n  save(mapName: string) {\n    this.maps[this.selection.mapIndex].name = mapName;\n    if (this.maps[this.maps.length - 1].name !== '' || this.maps[this.maps.length - 1].levels[0].features.length > 0) {\n      this.maps.push({ name: '', description: '', levels: [{ features: [] }] });\n    }\n  }\n\n  @modify()\n  undo() {\n    if (undoStack.length === 0) return;\n    const prev = undoStack.pop();\n    if (!prev) return;\n    redoStack.push(JSON.parse(JSON.stringify(this.maps[this.selection.mapIndex])));\n    if (redoStack.length > 10) redoStack.splice(0, undoStack.length - 10);\n    this.maps[this.selection.mapIndex] = JSON.parse(prev);\n  }\n\n  @modify()\n  redo() {\n    if (redoStack.length === 0) return;\n    const prev = redoStack.pop();\n    undoStack.push(JSON.parse(JSON.stringify(this.maps[this.selection.mapIndex])));\n    if (undoStack.length > 10) undoStack.splice(0, undoStack.length - 10);\n    if (prev) this.maps[this.selection.mapIndex] = JSON.parse(prev);\n  }\n\n  @modify()\n  toggleWelcome() {\n    this.showWelcome = !this.showWelcome;\n  }\n\n  @modify()\n  newMap() {\n    undoStack = [];\n    redoStack = [];\n    if (this.maps[this.maps.length - 1].name !== '' || this.maps[this.maps.length - 1].levels[0].features.length > 0) {\n      this.maps.push({ name: '', description: '', levels: [{ features: [] }] });\n    }\n    this.selection = { mapIndex: this.maps.length - 1, levelIndex: 0, featureIndex: undefined, geometryIndex: undefined };\n    this.scale = 1;\n    this.offset = [0, 0];\n  }\n\n  @modify({ undoable: true })\n  addLevel() {\n    this.maps[this.selection.mapIndex].levels.push({\n      features: []\n    });\n    this.selection.levelIndex = this.maps[this.selection.mapIndex].levels.length - 1;\n    this.selection.featureIndex = undefined;\n    this.selection.geometryIndex = undefined;\n  }\n\n  @modify()\n  selectLevel(i: number) {\n    this.selection.levelIndex = i;\n    this.selection.featureIndex = undefined;\n    this.selection.geometryIndex = undefined;\n  }\n\n  @modify({ undoable: true })\n  removeLevel(i: number) {\n    const levels = this.maps[this.selection.mapIndex].levels;\n    if (levels.length <= 1) return;\n    levels.splice(i, 1);\n    if (this.selection.levelIndex === levels.length) {\n      this.selection.levelIndex--;\n    }\n    this.selection.featureIndex = undefined;\n    this.selection.geometryIndex = undefined;\n  }\n\n  @modify()\n  setDebug(debug: boolean) {\n    this.debug = debug;\n  }\n\n  @modify()\n  setGridSteps(gridSteps: number) {\n    this.gridSteps = gridSteps;\n  }\n\n  @modify({ undoable: true })\n  handleDrag(from: number[], to: number[]) {\n    if (from[0] === to[0] && from[1] === to[1]) return;\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (this.tools.stairs.selected) {\n      features.push({\n        properties: {\n          type: 'other',\n        },\n        geometries: [{\n          type: 'stairs',\n          coordinates: [from, to],\n        }],\n      });\n    } else if (this.tools.decoration.selected) {\n      features.push({\n        properties: {\n          type: 'other',\n        },\n        geometries: [{\n          type: 'decoration',\n          coordinates: [from, to],\n          subtype: this.tools.decoration.subtype,\n        }],\n      });\n    } else if (this.tools.rect.selected) {\n      features.push({\n        geometries: [{\n          type: 'polygon',\n          coordinates: [\n            [from[0], from[1]],\n            [to[0], from[1]],\n            [to[0], to[1]],\n            [from[0], to[1]],\n            [from[0], from[1]]\n          ],\n        }],\n        properties: {\n          type: 'room',\n        },\n      });\n    } else if (this.tools.ellipse.selected) {\n      features.push({\n        geometries: [{\n          type: 'ellipse',\n          coordinates: [from, to],\n        }],\n        properties: {\n          type: 'room',\n        },\n      });\n    } else if (this.tools.walls.selected) {\n      features.push({\n        geometries: [{\n          type: 'line',\n          coordinates: [from, to],\n        }],\n        properties: {\n          type: 'other',\n        },\n      });\n    } else if (this.selection.featureIndex !== undefined) {\n      const selection = features[this.selection.featureIndex];\n      if (selection !== undefined) {\n        const deltaDrag = [to[0] - from[0], to[1] - from[1]];\n        selection.geometries.forEach(geometry => {\n          geometry.coordinates.forEach(p => {\n            p[0] += deltaDrag[0];\n            p[1] += deltaDrag[1];\n          });\n        });\n        return;\n      }\n    }\n  }\n\n  @modify({ undoable: true })\n  handlePolygon(points: number[][]) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (!isCCW(points)) {\n      points.reverse();\n    }\n    features.push({\n      geometries: [{\n        type: 'polygon',\n        coordinates: points,\n      }],\n      properties: {\n        type: this.tools.walls.selected ? 'room' : 'other',\n      },\n    });\n  }\n\n  @modify({ undoable: true })\n  handleBrush(points: number[][]) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (this.tools.walls.selected && this.tools.brush.selected) {\n      features.push({\n        geometries: [{\n          type: 'brush',\n          coordinates: points,\n        }],\n        properties: {\n          type: 'room',\n        },\n      });\n    }\n  }\n\n  @modify({ undoable: true })\n  handleDelete() {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (this.selection.featureIndex === undefined) return;\n    if (this.selection.geometryIndex === undefined) return;\n    const feature = features[this.selection.featureIndex];\n    if (this.selection.geometryIndex === 0 || feature.geometries.length === 1) {\n      features.splice(this.selection.featureIndex, 1);\n    } else {\n      feature.geometries.splice(this.selection.geometryIndex, 1);\n    }\n    this.selection.featureIndex = undefined;\n    this.selection.geometryIndex = undefined;\n  }\n\n  @modify({ undoable: true })\n  addDoor(door: DoorPlacement) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const feature = level.features[door.feature];\n    feature.geometries.push({\n      type: 'door',\n      coordinates: [door.from, door.to],\n      subtype: this.tools.doors.subtype,\n    });\n  }\n\n  @modify({ undoable: true })\n  handleGroup(featureIndex: number, geometryIndex: number) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const features = level.features;\n    if (this.selection.featureIndex === undefined) return;\n    if (this.selection.geometryIndex === undefined) return;\n    const selectedFeature = features[this.selection.featureIndex];\n    if (this.selection.featureIndex === featureIndex) {\n      if (selectedFeature.geometries.length === 1) return;\n      const geom = selectedFeature.geometries[geometryIndex];\n      selectedFeature.geometries.splice(geometryIndex, 1);\n      features.push({\n        properties: {\n          type: ['polygon', 'ellipse'].includes(geom.type) ? 'room' : 'other',\n        },\n        geometries: [geom],\n      });\n    } else {\n      const geom1 = selectedFeature.geometries.find(geom => geom.type === 'polygon');\n      const geom2 = features[featureIndex].geometries[geometryIndex];\n      if (geom1 && geom2.type === 'polygon') {\n        const mergedGeoms = merge(selectedFeature.geometries.filter(geom => geom.type === 'polygon'), geom2);\n        const prevGeoms = selectedFeature.geometries.filter(geom => geom.type !== 'polygon');\n        selectedFeature.geometries = prevGeoms.concat(mergedGeoms);\n      } else {\n        selectedFeature.geometries = selectedFeature.geometries.concat(features[featureIndex].geometries);\n      }\n      features.splice(featureIndex, 1);\n      if (this.selection.featureIndex > featureIndex) this.selection.featureIndex--;\n    }\n  }\n\n  @modify()\n  setSelectedTool(name: ToolName) {\n    const tool = this.tools[name];\n    if (tool.selected) {\n      tool.selected = false;\n      return;\n    }\n    if (tool.group === 0) {\n      Object.values(this.tools).forEach(t => {\n        t.selected = false;\n      });\n      tool.selected = true;\n      return;\n    } else {\n      Object.values(this.tools).forEach(t => {\n        if (t.group === 0) t.selected = false;\n      });\n    }\n    Object.values(this.tools).forEach(t => {\n      if (t.group === tool.group) t.selected = false;\n    });\n    if (!tool.polygon) {\n      Object.values(this.tools).forEach(t => {\n        if (t.group === 2) {\n          t.selected = false;\n          t.disabled = true;\n        }\n      });\n    } else {\n      Object.values(this.tools).forEach(t => {\n        if (t.group === 2) {\n          t.disabled = false;\n        }\n      });\n    }\n    tool.selected = true;\n  }\n\n  @modify()\n  setToolOption(name: ToolName, option: string) {\n    const tool = this.tools[name];\n    (tool as any).subtype = option;\n  }\n\n  @modify()\n  setSelection(selection: { mapIndex: number, levelIndex: number, featureIndex: undefined | number, geometryIndex: undefined | number }) {\n    if (selection.mapIndex !== this.selection.mapIndex) {\n      undoStack = [];\n      redoStack = [];\n    }\n    this.selection = selection;\n  }\n\n  @modify()\n  setOffset(offset: number[]) {\n    this.offset = offset;\n  }\n\n  @modify()\n  setZoom(scale: number, offset: number[]) {\n    this.scale = scale;\n    this.offset = offset;\n  }\n\n  @modify()\n  setDrawerOpen(open: boolean) {\n    this.drawerOpen = open;\n  }\n\n  @modify()\n  setDrawerWidth(width: number) {\n    this.drawerWidth = width;\n  }\n\n  @modify()\n  setMapDescription(desc: Description) {\n    this.maps[this.selection.mapIndex].name = desc.name;\n    this.maps[this.selection.mapIndex].description = desc.description;\n  }\n\n  @modify()\n  setLevelDescription(desc: Description) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    level.name = desc.name;\n    level.description = desc.description;\n  }\n\n  @modify()\n  setFeatureDescription(desc: Description | undefined) {\n    if (this.selection.featureIndex === undefined) return;\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const feature = level.features[this.selection.featureIndex];\n    Object.assign(feature.properties, desc);\n  }\n\n  @modify()\n  setFeatureOrder(sourceIndex: number, destIndex: number) {\n    const level = this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];\n    const [removed] = level.features.splice(sourceIndex, 1);\n    level.features.splice(destIndex, 0, removed);\n  }\n\n  @modify()\n  reset() {\n    Object.assign(this, new State());\n  }\n}\n\nexport interface Map extends Description {\n  levels: Level[]\n}\n\nexport type Geometry = Polygon | Ellipse | Line | Brush | Door | Stairs | Decoration\n\nexport interface Polygon {\n  type: 'polygon'\n  coordinates: number[][]\n}\n\nexport interface Ellipse {\n  type: 'ellipse'\n  coordinates: number[][]\n}\n\nexport interface Line {\n  type: 'line'\n  coordinates: number[][]\n}\n\nexport interface Brush {\n  type: 'brush'\n  coordinates: number[][]\n}\n\nexport type DoorType = 'normal' | 'secret'\n\nexport interface Door {\n  type: 'door'\n  coordinates: number[][]\n  subtype: DoorType\n}\n\nexport interface Stairs {\n  type: 'stairs'\n  coordinates: number[][]\n}\n\nexport type DecorationType = 'statue' | 'column' | 'stalacmite';\n\nexport interface Decoration {\n  type: 'decoration'\n  coordinates: number[][]\n  subtype: DecorationType\n}\n\nexport type FeatureType = 'room' | 'text' | 'other'\n\nexport interface FeatureProperties extends Description {\n  type: FeatureType\n}\n\nexport interface Feature {\n  geometries: Geometry[]\n  properties: FeatureProperties\n}\n\nexport interface Level extends Description {\n  features: Feature[]\n}\n\nexport interface Description {\n  name?: string\n  description?: string\n}\n\nexport const Context = React.createContext(new State());\n","import React, { useContext, useEffect, useRef } from 'react';\nimport seedrandom from 'seedrandom';\n\nimport {\n  bbox,\n  centroid,\n  colorToIndex,\n  detectDoorPlacement,\n  dist,\n  indexToColor,\n  isCCW,\n  lerp,\n  lerp2,\n} from './lib';\nimport { Context, DecorationType, DoorType, Geometry, Level, State } from './State';\n\nconst backgroundColor = '#D9D2BF';\nconst floorColor = '#F1ECE0';\nconst wallColor = '#000';\nconst selectionFillColor = '#2f557466';\nconst selectionStrokeColor = '#2f5574';\nconst dragFillColor = '#2f557466';\nconst dragStrokeColor = '#2f5574';\nconst hoverFillColor = '#668dad66';\nconst hoverStrokeColor = '#668dad';\nconst pointColor = '#fff238';\nconst specialColors = [\n  selectionFillColor, selectionStrokeColor,\n  dragFillColor, dragStrokeColor,\n  hoverFillColor, hoverStrokeColor,\n];\n\nclass CanvasRenderer {\n  mouse?: number[] = undefined\n  mouseDown: boolean = false\n  drag?: {\n    start: number[]\n    end: number[]\n  }\n  specialKeys = {\n    shift: false,\n    alt: false,\n    ctrl: false,\n    space: false,\n  }\n  points: number[][] = []\n  polygonToolSelected: boolean = false\n  hover?: {\n    featureIndex: number | undefined\n    geometryIndex: number | undefined\n  }\n  size: number = 30\n  fps: number = 0\n  requestID?: number\n  appState = new State()\n  canvas: HTMLCanvasElement\n  ctx: CanvasRenderingContext2D\n  bufferCanvas: HTMLCanvasElement\n  bufferCtx: CanvasRenderingContext2D\n  dirty: Date = new Date()\n  mode: 'edit' | 'print'\n\n  constructor(canvas: HTMLCanvasElement, mode: 'edit' | 'print') {\n    const ctx = canvas.getContext('2d', { alpha: true });\n    if (ctx === null) {\n      throw new Error('canvas has null rendering context');\n    }\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.requestID = requestAnimationFrame(this.render);\n\n    this.bufferCanvas = document.createElement('canvas');\n    this.bufferCanvas.width = this.canvas.width;\n    this.bufferCanvas.height = this.canvas.height;\n    const bufferCtx = this.bufferCanvas.getContext('2d', { alpha: true });\n    if (bufferCtx === null) {\n      throw new Error('canvas has null rendering context');\n    }\n    this.bufferCtx = bufferCtx;\n    this.mode = mode;\n  }\n\n  attachListeners() {\n    this.canvas.addEventListener('mousedown', this.onMouseDown);\n    this.canvas.addEventListener('mouseup', this.onMouseUp);\n    this.canvas.addEventListener('mousemove', this.onMouseMove);\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n    window.addEventListener('scroll', this.onWheel, { passive: false });\n    window.addEventListener('touchmove', this.onWheel, { passive: false });\n    window.addEventListener('mousewheel', this.onWheel, { passive: false });\n  }\n\n  detachListeners() {\n    this.canvas.removeEventListener('mousedown', this.onMouseDown);\n    this.canvas.removeEventListener('mouseup', this.onMouseUp);\n    this.canvas.removeEventListener('mousemove', this.onMouseMove);\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n    window.removeEventListener('scroll', this.onWheel);\n    window.removeEventListener('touchmove', this.onWheel);\n    window.removeEventListener('mousewheel', this.onWheel);\n  }\n\n  onMouseDown = (e: MouseEvent) => {\n    this.dirty = new Date();\n    this.mouseDown = true;\n    const { mouse } = this;\n    if (e.button === 2) return;\n    if (mouse) {\n      this.drag = {\n        start: this.canvasToTile(mouse),\n        end: this.canvasToTile(mouse),\n      };\n    }\n    if (this.appState.tools.pointer.selected) {\n      const selectedFeatureIndex = this.appState.selection.featureIndex;\n      const hoverFeatureIndex = this.hover?.featureIndex;\n      const hoverGeometryIndex = this.hover?.geometryIndex;\n      if (e.shiftKey && selectedFeatureIndex !== undefined && hoverFeatureIndex !== undefined && hoverGeometryIndex !== undefined) {\n        this.appState.handleGroup(hoverFeatureIndex, hoverGeometryIndex);\n      } else {\n        this.appState.setSelection({\n          mapIndex: this.appState.selection.mapIndex,\n          levelIndex: this.appState.selection.levelIndex,\n          featureIndex: this.hover?.featureIndex,\n          geometryIndex: this.hover?.geometryIndex,\n        });\n      }\n    } else if (this.appState.tools.doors.selected && mouse) {\n      const door = detectDoorPlacement(\n        this.worldToTile(this.canvasToWorld(mouse), false),\n        this.appState.maps[this.appState.selection.mapIndex].levels[this.appState.selection.levelIndex].features,\n        e.shiftKey);\n      if (door) this.appState.addDoor(door);\n    }\n  }\n\n  onMouseUp = () => {\n    this.dirty = new Date();\n    this.mouseDown = false;\n    if (this.mouse && this.appState.tools.polygon.selected) {\n      const pos = this.canvasToTile(this.mouse);\n      if (this.points.length >= 1 && dist(this.points[0], pos) < 1) {\n        this.appState.handlePolygon(this.points);\n        this.points = [];\n      } else {\n        this.points.push(pos);\n      }\n    } else if (this.appState.tools.brush.selected) {\n      this.appState.handleBrush(this.points);\n      this.points = [];\n      this.drag = undefined;\n    } else if (this.drag) {\n      let [from, to] = [this.drag.start, this.drag.end];\n      if (\n        this.appState.tools.rect.selected ||\n        this.appState.tools.ellipse.selected) {\n        const bounds = bbox([from, to]);\n        from = bounds.sw;\n        to = bounds.ne;\n      }\n      this.appState.handleDrag(from, to);\n      this.drag = undefined;\n      this.points = [];\n    }\n  }\n\n  onMouseMove = (event: MouseEvent) => {\n    this.dirty = new Date();\n    this.mouse = [event.offsetX, event.offsetY];\n    if (this.mouse && this.mouseDown && this.drag) {\n      if (this.specialKeys.space) {\n        const end = this.canvasToWorld(this.mouse);\n        const delta = [(this.drag.start[0] * this.size) - end[0], (this.drag.start[1] * this.size) - end[1]];\n        let newOffset = this.appState.offset;\n        newOffset[0] -= delta[0];\n        newOffset[1] -= delta[1];\n        this.drag.start = this.canvasToTile(this.mouse);\n        this.drag.end = this.canvasToTile(this.mouse);\n        window.requestAnimationFrame(() => {\n          this.appState.setOffset(newOffset);\n        });\n      } else {\n        this.drag.end = this.canvasToTile(this.mouse);\n        if (this.appState.tools.brush.selected) {\n          this.points.push(this.worldToTile(this.canvasToWorld(this.mouse), false));\n        }\n      }\n    }\n  }\n\n  onWheel = (ev: WheelEvent | Event) => {\n    let event: WheelEvent | undefined;\n    if (ev.hasOwnProperty('x')) event = ev as WheelEvent;\n    else return;\n    if (event.x === undefined || event.y === undefined || document.elementFromPoint(event.x, event.y) !== this.canvas) return;\n    event.stopPropagation();\n    event.preventDefault();\n    this.dirty = new Date();\n    const { mouse } = this;\n    const { scale, offset } = this.appState;\n    if (!mouse) return;\n    const max = 4;\n    const min = 0.2;\n    const newScale = Math.max(Math.min(scale - event.deltaY / 100, max), min);\n    const mouseWorldPos = this.canvasToWorld(mouse);\n    const newMouseWorldPos = [mouse[0] / newScale - offset[0], mouse[1] / newScale - offset[1]];\n    const newOffset = [\n      offset[0] - (mouseWorldPos[0] - newMouseWorldPos[0]),\n      offset[1] - (mouseWorldPos[1] - newMouseWorldPos[1])\n    ];\n    window.requestAnimationFrame(() => {\n      this.appState.setZoom(newScale, newOffset);\n    });\n  }\n\n  onKeyDown = (event: KeyboardEvent) => {\n    this.dirty = new Date();\n    if (event.key === 'Shift') this.specialKeys.shift = true;\n    if (event.key === 'Control') this.specialKeys.ctrl = true;\n    if (event.key === 'Alt') this.specialKeys.alt = true;\n    if (document.activeElement !== document.body) return;\n    const { appState } = this;\n    const S = this.size * this.appState.scale;\n    let newOffset = appState.offset;\n    if (event.key === 'w') newOffset = [appState.offset[0], appState.offset[1] + S];\n    if (event.key === 'a') newOffset = [appState.offset[0] + S, appState.offset[1]];\n    if (event.key === 's') newOffset = [appState.offset[0], appState.offset[1] - S];\n    if (event.key === 'd') newOffset = [appState.offset[0] - S, appState.offset[1]];\n    if (newOffset !== appState.offset) {\n      appState.setOffset(newOffset);\n    }\n    if (event.key === 'Backspace' || event.key === 'Delete') {\n      appState.handleDelete();\n    }\n    if (event.key === 'z' && this.specialKeys.ctrl) appState.undo();\n    if (event.key === 'y' && this.specialKeys.ctrl) appState.redo();\n    if (event.key === ' ') {\n      this.canvas.style.cursor = \"pointer\";\n      this.specialKeys.space = true;\n      event.preventDefault();\n    }\n  }\n\n  onKeyUp = (event: KeyboardEvent) => {\n    this.dirty = new Date();\n    if (event.key === 'Shift') this.specialKeys.shift = false;\n    if (event.key === 'Control') this.specialKeys.ctrl = false;\n    if (event.key === 'Alt') this.specialKeys.alt = false;\n    if (event.key === ' ') {\n      this.canvas.style.cursor = \"auto\";\n      this.specialKeys.space = false;\n    }\n  }\n\n  // canvas coordinates to world coordinates\n  canvasToWorld = (p: number[]): number[] => {\n    const { offset, scale } = this.appState;\n    return [p[0] / scale - offset[0], p[1] / scale - offset[1]];\n  }\n\n  // world coordinates to canvas coordinates\n  worldToCanvas = (p: number[]): number[] => {\n    const { offset, scale } = this.appState;\n    return [(p[0] + offset[0]) * scale, (p[1] + offset[1]) * scale];\n  }\n\n  // world coordinates to tile coordinates\n  worldToTile = (p: number[], round = true): number[] => {\n    if (round) {\n      const S = this.size / this.appState.gridSteps;\n      return [Math.round(p[0] / S) / this.appState.gridSteps, Math.round(p[1] / S) / this.appState.gridSteps];\n    }\n    return [p[0] / this.size, p[1] / this.size];\n  }\n\n  canvasToTile = (p: number[]) => {\n    return this.worldToTile(this.canvasToWorld(p));\n  }\n\n  renderTextCenter(text: string, font: string) {\n    this.ctx.font = font;\n    const m = this.ctx.measureText(text);\n    let h = m.actualBoundingBoxAscent + m.actualBoundingBoxDescent;\n    this.ctx.fillText(text, -m.width / 2, h);\n  }\n\n  renderFPS(time: number) {\n    const fps = this.fps.toFixed(0);\n    this.ctx.save();\n    this.ctx.translate(this.canvas.width - 48, 12);\n    this.ctx.fillStyle = '#000';\n    this.renderTextCenter(fps, \"18px Roboto Mono, monospace\");\n    this.ctx.restore();\n  }\n\n  clearScreen() {\n    const { canvas, ctx, bufferCanvas } = this;\n    if (this.mode === 'edit') {\n      ctx.fillStyle = backgroundColor;\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n    } else {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n    if (bufferCanvas.width !== canvas.width || bufferCanvas.height !== canvas.height) {\n      bufferCanvas.width = canvas.width;\n      bufferCanvas.height = canvas.height;\n    }\n  }\n\n  drawGrid() {\n    const { canvas, ctx } = this;\n    const iT = ctx.getTransform().inverse();\n    const min = iT.transformPoint({ x: 0, y: 0 });\n    const max = iT.transformPoint({ x: canvas.width, y: canvas.height });\n    ctx.lineWidth = 0.01;\n    ctx.strokeStyle = '#000';\n    for (let x = Math.floor(min.x); x <= max.x; x++) {\n      ctx.beginPath();\n      ctx.moveTo(x, min.y);\n      ctx.lineTo(x, max.y);\n      ctx.stroke();\n    }\n    for (let y = Math.floor(min.y); y <= max.y; y++) {\n      ctx.beginPath();\n      ctx.moveTo(min.x, y);\n      ctx.lineTo(max.x, y);\n      ctx.stroke();\n    }\n    if (this.appState.gridSteps !== 1 && this.mode === 'edit') {\n      ctx.lineWidth = 0.005;\n      ctx.strokeStyle = '#666666';\n      for (let x = Math.floor(min.x); x <= max.x; x += 1 / this.appState.gridSteps) {\n        ctx.beginPath();\n        ctx.moveTo(x, min.y);\n        ctx.lineTo(x, max.y);\n        ctx.stroke();\n      }\n      for (let y = Math.floor(min.y); y <= max.y; y += 1 / this.appState.gridSteps) {\n        ctx.beginPath();\n        ctx.moveTo(min.x, y);\n        ctx.lineTo(max.x, y);\n        ctx.stroke();\n      }\n    }\n  }\n\n  drawMousePos(mouse: number[]) {\n    const { ctx } = this;\n    ctx.save();\n    const p = this.worldToTile(this.canvasToWorld(mouse), true);\n    ctx.fillStyle = '#000';\n    ctx.beginPath();\n    ctx.arc(p[0], p[1], 0.1, 0, 2 * Math.PI);\n    ctx.fill();\n\n    if (this.appState.debug) {\n      const font = \"0.5px Roboto, sans-serif\";\n      ctx.translate(p[0], p[1] - 1);\n      this.renderTextCenter(`Mouse: ${mouse[0].toFixed(0)},${mouse[1].toFixed(0)}`, font);\n      ctx.translate(0, -0.5);\n      this.renderTextCenter(`Tile: ${p[0].toFixed(0)},${p[1].toFixed(0)}`, font);\n    }\n    ctx.restore();\n  }\n\n  drawDrag() {\n    const { drag, appState } = this;\n    if (!drag) return;\n    const { start, end } = drag;\n    if (dist(start, end) > 1 && appState.tools.rect.selected) {\n      this.drawGeometry(\n        { type: 'polygon', coordinates: [start, [start[0], end[1]], end, [end[0], start[1]]] },\n        dragFillColor, dragStrokeColor);\n    } else if (dist(start, end) > 1 && appState.tools.stairs.selected) {\n      this.drawStairs([start, end], dragFillColor, dragStrokeColor);\n    } else if (dist(start, end) > 1 && appState.tools.decoration.selected) {\n      this.drawDecoration(appState.tools.decoration.subtype, [start, end], dragFillColor, dragStrokeColor);\n    } else if (dist(start, end) > 1 && appState.tools.ellipse.selected) {\n      const box = bbox([start, end]);\n      this.drawEllipse([box.sw, box.ne], dragFillColor, dragStrokeColor);\n    } else {\n      this.drawLine([start, end], 0.1, dragStrokeColor);\n    }\n  }\n\n  drawGeometry(geometry: Geometry, fillColor?: string, strokeColor?: string, indexColor?: string) {\n    if (geometry.type === 'polygon') {\n      this.drawPolygon(geometry.coordinates, fillColor || indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'ellipse') {\n      this.drawEllipse(geometry.coordinates, fillColor || indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'line') {\n      this.drawLine(geometry.coordinates, indexColor !== undefined ? 0.5 : 0.1, strokeColor || indexColor);\n    } else if (geometry.type === 'brush') {\n      this.drawBrush(geometry.coordinates, fillColor || indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'door') {\n      this.drawDoor(geometry.subtype, geometry.coordinates, fillColor || indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'stairs') {\n      this.drawStairs(geometry.coordinates, indexColor, strokeColor || indexColor);\n    } else if (geometry.type === 'decoration') {\n      this.drawDecoration(geometry.subtype, geometry.coordinates, indexColor, strokeColor || indexColor);\n    }\n  }\n\n  drawPolygon(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    this.pathPoints(points, true);\n    if (fillColor) {\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n    if (fillColor && specialColors.includes(fillColor)) {\n      this.drawPoints(points);\n      const box = bbox(points);\n      ctx.fillStyle = '#000';\n      ctx.save();\n      ctx.translate(box.sw[0] + box.w / 2, box.ne[1] - 1);\n      this.renderTextCenter(`${box.w * 5}ft x ${box.h * 5}ft`, \"1px Roboto, sans-serif\");\n      ctx.restore();\n    }\n  }\n\n  drawEllipse(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    this.pathEllipse(points, true);\n    if (fillColor) {\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineWidth = 0.1;\n      ctx.stroke();\n    }\n    if (fillColor && specialColors.includes(fillColor)) {\n      const box = bbox(points);\n      this.drawPoints([box.sw, [box.sw[0], box.ne[1]], box.ne, [box.ne[0], box.sw[1]]]);\n      ctx.fillStyle = '#000';\n      ctx.save();\n      ctx.translate(box.sw[0] + box.w / 2, box.ne[1] - 1);\n      this.renderTextCenter(`${box.w * 5}ft x ${box.h * 5}ft`, \"1px Roboto, sans-serif\");\n      ctx.restore();\n    }\n  }\n\n  drawLine(points: number[][], width: number, strokeColor?: string) {\n    const { ctx } = this;\n    this.pathPoints(points);\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineWidth = width;\n      ctx.stroke();\n    }\n  }\n\n  drawBrush(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    this.pathPoints(points);\n    if (fillColor) {\n      ctx.strokeStyle = fillColor;\n      ctx.lineJoin = 'round';\n      ctx.lineCap = 'round';\n      ctx.lineWidth = 0.9;\n      ctx.stroke();\n    }\n    this.ctx.globalCompositeOperation = 'destination-over';\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineJoin = 'round';\n      ctx.lineCap = 'round';\n      ctx.lineWidth = 1.1;\n      ctx.stroke();\n    }\n    this.ctx.globalCompositeOperation = 'source-over';\n    if (fillColor && specialColors.includes(fillColor)) {\n      this.drawPoints(points, 0.1);\n    }\n  }\n\n  drawDoor(type: DoorType, points: number[][], fillColor?: string, strokeColor?: string) {\n    switch (type) {\n      case 'normal':\n        this.drawNormalDoor(points, fillColor, strokeColor);\n        break;\n      case 'secret':\n        this.drawSecretDoor(points, fillColor, strokeColor);\n        break;\n      default:\n        throw new Error(`unsupported door type ${type}`);\n    }\n  }\n\n  drawNormalDoor(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    const [from, to] = points;\n    const a = lerp2(0.1, from, to);\n    const b = lerp2(0.9, from, to);\n    if (strokeColor) {\n      ctx.strokeStyle = strokeColor;\n      ctx.lineCap = 'butt';\n      ctx.lineWidth = 0.1;\n      ctx.beginPath();\n      ctx.moveTo(from[0], from[1]);\n      ctx.lineTo(to[0], to[1]);\n      ctx.stroke();\n      ctx.lineWidth = 0.3;\n      ctx.beginPath();\n      ctx.moveTo(a[0], a[1]);\n      ctx.lineTo(b[0], b[1]);\n      ctx.stroke();\n    }\n  }\n\n  drawSecretDoor(points: number[][], fillColor?: string, strokeColor?: string) {\n    const { ctx } = this;\n    const [from, to] = points;\n    if (strokeColor) {\n      const l = Math.max(Math.abs(from[0] - to[0]), Math.abs(from[1] - to[1]));\n      ctx.font = `${l}px Helvetica`;\n      const m = this.ctx.measureText('S');\n      let h = m.actualBoundingBoxAscent + m.actualBoundingBoxDescent;\n      let w = m.actualBoundingBoxLeft - m.actualBoundingBoxRight;\n      const [cx, cy] = [w / 2, h / 2];\n      ctx.save();\n      ctx.fillStyle = strokeColor;\n      ctx.fillText('S', from[0] + (to[0] - from[0]) / 2 + cx, from[1] + (to[1] - from[1]) / 2 + cy);\n      ctx.restore();\n    }\n  }\n\n  drawStairs(points: number[][], fillColor?: string, strokeColor?: string) {\n    if (!strokeColor) return;\n    const { ctx } = this;\n    const [from, to] = points;\n    const w = Math.abs(to[0] - from[0]);\n    const h = Math.abs(to[1] - from[1]);\n    const sx = Math.sign(to[0] - from[0]);\n    const sy = Math.sign(to[1] - from[1]);\n    const L = Math.max(w, h);\n    const W = Math.min(w, h);\n    ctx.strokeStyle = strokeColor;\n    ctx.lineWidth = 0.1;\n    ctx.lineCap = 'butt';\n    for (let i = 0; i < L; i += 0.5) {\n      const l = lerp(i / (L + .5), 0.1, W);\n      ctx.beginPath();\n      if (w > h) {\n        ctx.moveTo(from[0] + i * sx, Math.min(from[1], to[1]) + (W - l) / 2);\n        ctx.lineTo(from[0] + i * sx, Math.min(from[1], to[1]) + (W - l) / 2 + l);\n      } else {\n        ctx.moveTo(Math.min(from[0], to[0]) + (W - l) / 2, from[1] + i * sy);\n        ctx.lineTo(Math.min(from[0], to[0]) + (W - l) / 2 + l, from[1] + i * sy);\n      }\n      ctx.stroke();\n    }\n    ctx.lineWidth = 0.05;\n    ctx.beginPath();\n    if (w > h) {\n      ctx.moveTo(from[0], from[1]);\n      ctx.lineTo(to[0], from[1]);\n      ctx.lineTo(to[0], to[1]);\n      ctx.lineTo(from[0], to[1]);\n    } else {\n      ctx.moveTo(from[0], from[1]);\n      ctx.lineTo(from[0], to[1]);\n      ctx.lineTo(to[0], to[1]);\n      ctx.lineTo(to[0], from[1]);\n    }\n    ctx.stroke();\n    if (fillColor) {\n      ctx.closePath();\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    if (strokeColor && specialColors.includes(strokeColor)) {\n      this.drawPoints(points);\n    }\n  }\n\n  drawDecoration(type: DecorationType, points: number[][], fillColor?: string, strokeColor?: string) {\n    switch (type) {\n      case 'statue':\n        this.drawStatue(points, fillColor, strokeColor);\n        break;\n      case 'column':\n        this.drawColumn(points, fillColor, strokeColor);\n        break;\n      case 'stalacmite':\n        this.drawStalacmite(points, fillColor, strokeColor);\n        break;\n      default:\n        throw new Error(`unsupported decoration type ${type}`);\n    }\n  }\n\n  drawStatue(points: number[][], fillColor?: string, strokeColor?: string) {\n    if (!strokeColor) return;\n    const { ctx } = this;\n    const [from, to] = points;\n    const r = Math.max(Math.abs(to[0] - from[0]), Math.abs(to[1] - from[1])) / 2;\n    const [cx, cy] = [from[0] + r, from[1] + r];\n    ctx.strokeStyle = strokeColor;\n    ctx.lineWidth = 0.05;\n    ctx.beginPath();\n    ctx.ellipse(cx, cy, r, r, 0, 0, 2 * Math.PI);\n    ctx.stroke();\n    if (fillColor) {\n      ctx.closePath();\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    const r2 = r * 0.4;\n    ctx.beginPath();\n    let theta = -0.1 * Math.PI;\n    for (let i = 0; i < 10; i++) {\n      if (i === 0) {\n        ctx.moveTo(cx + r * Math.cos(theta), cy + r * Math.sin(theta));\n      } else {\n        ctx.lineTo(cx + r * Math.cos(theta), cy + r * Math.sin(theta));\n      }\n      theta += 0.2 * Math.PI;\n      ctx.lineTo(cx + r2 * Math.cos(theta), cy + r2 * Math.sin(theta));\n      theta += 0.2 * Math.PI;\n    }\n    ctx.closePath();\n    ctx.fillStyle = strokeColor;\n    ctx.fill();\n    if (strokeColor && specialColors.includes(strokeColor)) {\n      this.drawPoints(points);\n    }\n  }\n\n  drawColumn(points: number[][], fillColor?: string, strokeColor?: string) {\n    if (!strokeColor) return;\n    const { ctx } = this;\n    const [from, to] = points;\n    const r = Math.max(Math.abs(to[0] - from[0]), Math.abs(to[1] - from[1])) / 2;\n    const [cx, cy] = [from[0] + r, from[1] + r];\n    ctx.fillStyle = strokeColor;\n    ctx.lineWidth = 0.05;\n    ctx.beginPath();\n    ctx.ellipse(cx, cy, r, r, 0, 0, 2 * Math.PI);\n    ctx.fill();\n    if (strokeColor && specialColors.includes(strokeColor)) {\n      this.drawPoints(points);\n    }\n  }\n\n  drawStalacmite(points: number[][], fillColor?: string, strokeColor?: string) {\n    if (!strokeColor) return;\n    const { ctx } = this;\n    const [from, to] = points;\n    const rng = seedrandom(`(${from[0]},${from[1]}),(${to[0]},${to[1]})`);\n    const r = Math.max(Math.abs(to[0] - from[0]), Math.abs(to[1] - from[1])) / 2;\n    const [cx, cy] = [from[0] + r, from[1] + r];\n    ctx.strokeStyle = strokeColor;\n    ctx.lineWidth = 0.1;\n    ctx.beginPath();\n    let currRadius = r * Math.max(0.5, rng());\n    let theta = -0.1 * Math.PI;\n    for (let i = 0; i < 20; i++) {\n      if (i === 0) {\n        ctx.moveTo(cx + currRadius * Math.cos(theta), cy + currRadius * Math.sin(theta));\n      } else {\n        ctx.lineTo(cx + currRadius * Math.cos(theta), cy + currRadius * Math.sin(theta));\n      }\n      theta += rng() * 0.2 * Math.PI;\n      if (theta + 0.1 * Math.PI >= 2 * Math.PI) break;\n      if (rng() < 0.5) currRadius += rng() * 0.3;\n      else currRadius -= rng() * 0.3;\n      currRadius = Math.max(0, Math.min(r, currRadius));\n    }\n    ctx.closePath();\n    ctx.stroke();\n    if (fillColor) {\n      ctx.fillStyle = fillColor;\n      ctx.fill();\n    }\n    if (strokeColor && specialColors.includes(strokeColor)) {\n      this.drawPoints(points);\n    }\n  }\n\n  drawPoints(points: number[][], size: number = 0.25) {\n    const { ctx } = this;\n    ctx.fillStyle = pointColor;\n    ctx.strokeStyle = 'black';\n    ctx.lineWidth = 0.05;\n    for (let i = 0; i < points.length; i++) {\n      ctx.beginPath();\n      ctx.ellipse(points[i][0], points[i][1], size, size, 0, 0, 2 * Math.PI);\n      ctx.fill();\n      ctx.stroke();\n    }\n  }\n\n  pathPoints(points: number[][], close: boolean = false) {\n    const { ctx } = this;\n    ctx.beginPath();\n    ctx.moveTo(points[0][0], points[0][1]);\n    for (let i = 0; i < points.length; i++) {\n      ctx.lineTo(points[i][0], points[i][1]);\n    }\n    if (close) ctx.closePath();\n  }\n\n  pathEllipse(points: number[][], close: boolean = false) {\n    const { ctx } = this;\n    const [a, b] = points;\n    ctx.beginPath();\n    ctx.ellipse(a[0] + (b[0] - a[0]) / 2, a[1] + (b[1] - a[1]) / 2, (b[0] - a[0]) / 2, (a[1] - b[1]) / 2, 0, 0, 2 * Math.PI);\n    if (close) ctx.closePath();\n  }\n\n  drawFeatures(level: Level, colorIndex: boolean = false) {\n    const featureDrawOrder = ['room', 'other', 'text'];\n    const geometryDrawOrder = ['polygon', 'ellipse', 'line', 'brush', 'door', 'stairs', 'decoration'];\n    featureDrawOrder.forEach(featureType => {\n      geometryDrawOrder.forEach(geometryType => {\n        level.features.forEach((feature, i) => {\n          if (feature.properties.type !== featureType) return;\n          feature.geometries.forEach((geometry, j) => {\n            if (geometry.type !== geometryType) return;\n            if (colorIndex) {\n              this.drawGeometry(geometry, undefined, undefined, indexToColor(i, j));\n            } else {\n              let areaColor = floorColor;\n              if (geometry.type === 'polygon' && !isCCW(geometry.coordinates)) {\n                areaColor = backgroundColor;\n              }\n              this.drawGeometry(geometry, areaColor, wallColor);\n            }\n          });\n        });\n      });\n    });\n    level.features.filter(feature => feature.properties.name).forEach((feature, i) => {\n      let center: number[];\n      const polygon = feature.geometries.find(geom => geom.type === 'polygon');\n      const ellipse = feature.geometries.find(geom => geom.type === 'ellipse');\n      const brush = feature.geometries.find(geom => geom.type === 'brush');\n      if (polygon) {\n        center = centroid(polygon.coordinates);\n      } else if (ellipse) {\n        center = [\n          ellipse.coordinates[0][0] + (ellipse.coordinates[1][0] - ellipse.coordinates[0][0]) / 2,\n          ellipse.coordinates[0][1] + (ellipse.coordinates[1][1] - ellipse.coordinates[0][1]) / 2,\n        ];\n      } else if (brush) {\n        center = brush.coordinates[Math.round(brush.coordinates.length / 2)];\n      } else {\n        return;\n      }\n      this.ctx.save();\n      this.ctx.translate(center[0], center[1] - 0.25);\n      this.ctx.fillStyle = '#000';\n      this.renderTextCenter(`${i + 1}`, '0.5px Helvetica');\n      this.ctx.restore();\n    });\n  }\n\n  drawLevels() {\n    const { appState } = this;\n    const { width, height } = this.canvas;\n\n    const tmp = this.ctx;\n    const level = this.appState.maps[this.appState.selection.mapIndex].levels[this.appState.selection.levelIndex];\n\n    this.ctx = this.bufferCtx;\n\n    if (this.mode === 'edit') {\n      // color-indexed mouse picking\n      this.ctx.resetTransform();\n      this.ctx.globalCompositeOperation = 'source-over';\n      this.ctx.fillStyle = \"#fff\";\n      this.ctx.fillRect(0, 0, width, height);\n      this.ctx.save();\n      this.ctx.scale(appState.scale, appState.scale);\n      this.ctx.translate(appState.offset[0], appState.offset[1]);\n      this.ctx.scale(this.size, this.size);\n      this.drawFeatures(level, true);\n      if (this.mouse) {\n        const p = this.ctx.getImageData(this.mouse[0], this.mouse[1], 1, 1).data;\n        const [featureIndex, geometryIndex] = colorToIndex(p[0], p[1], p[2]);\n        if (featureIndex === Infinity || featureIndex >= level.features.length || geometryIndex >= level.features[featureIndex].geometries.length) {\n          this.hover = undefined;\n        } else {\n          this.hover = { featureIndex, geometryIndex };\n        }\n      }\n      this.ctx.restore();\n    }\n\n    // setup transform and clear buffer\n    this.ctx.resetTransform();\n    this.ctx.clearRect(0, 0, width, height);\n    this.ctx.save();\n    this.ctx.scale(appState.scale, appState.scale);\n    this.ctx.translate(appState.offset[0], appState.offset[1]);\n    this.ctx.scale(this.size, this.size);\n\n    this.drawFeatures(level);\n\n    if (appState.tools.pointer.selected) {\n      if (this.hover !== undefined && this.hover.featureIndex !== undefined) {\n        const hover = level.features[this.hover.featureIndex];\n        if (this.hover.geometryIndex !== undefined && hover !== undefined) {\n          this.drawGeometry(hover.geometries[this.hover.geometryIndex], hoverFillColor, hoverStrokeColor);\n        }\n      }\n      const selection = this.appState.getSelectedFeature();\n      if (selection) {\n        selection.feature.geometries.forEach(geometry => {\n          this.drawGeometry(\n            geometry,\n            geometry === selection.geometry ? selectionFillColor : hoverFillColor,\n            geometry === selection.geometry ? selectionStrokeColor : hoverFillColor);\n        });\n        if (this.drag && dist(this.drag.start, this.drag.end)) {\n          this.ctx.save();\n          const deltaDrag = [this.drag.end[0] - this.drag.start[0], this.drag.end[1] - this.drag.start[1]];\n          this.ctx.translate(deltaDrag[0], deltaDrag[1]);\n          selection.feature.geometries.forEach(geometry => {\n            this.drawGeometry(geometry, dragFillColor, dragStrokeColor);\n          });\n          this.ctx.restore();\n        }\n      }\n    }\n\n    this.ctx.globalCompositeOperation = 'source-over';\n    if (appState.tools.doors.selected && this.mouse) {\n      const door = detectDoorPlacement(\n        this.worldToTile(this.canvasToWorld(this.mouse), false),\n        level.features,\n        this.specialKeys.shift);\n      if (door) {\n        this.drawDoor(appState.tools.doors.subtype, [door.from, door.to], undefined, wallColor);\n      }\n    }\n\n    if (this.mode === 'edit') {\n      this.ctx.globalCompositeOperation = 'source-over';\n    } else {\n      this.ctx.globalCompositeOperation = 'source-atop';\n    }\n    this.drawGrid();\n\n    this.ctx.restore();\n\n    tmp.drawImage(this.bufferCanvas, 0, 0);\n\n    this.ctx = tmp;\n  }\n\n  render = (time: number) => {\n    if (new Date().getTime() - this.dirty.getTime() < 5000) {\n      const startTime = performance.now();\n      const { ctx, appState } = this;\n      const { tools } = appState;\n      if (this.polygonToolSelected && !appState.tools.polygon.selected) {\n        this.points = [];\n      }\n      this.polygonToolSelected = appState.tools.polygon.selected;\n\n      ctx.resetTransform();\n      this.bufferCtx.resetTransform();\n\n      this.clearScreen();\n\n      // http://jeroenhoek.nl/articles/svg-and-isometric-projection.html\n      // ctx.transform(0.866, 0.5, -0.866, 0.5, 0, 0);\n\n      this.drawLevels();\n\n      ctx.save();\n\n      ctx.scale(appState.scale, appState.scale);\n      ctx.translate(appState.offset[0], appState.offset[1]);\n      ctx.scale(this.size, this.size);\n\n      if (this.mode === 'edit') {\n        if (this.mouse) {\n          this.drawMousePos(this.mouse);\n        }\n\n        if (this.points.length > 0 && tools.polygon.selected) {\n          this.drawPolygon(this.points, dragFillColor, dragStrokeColor);\n        } else if (this.points.length > 0 && tools.brush.selected) {\n          this.drawBrush(this.points, dragFillColor, dragStrokeColor);\n        } else if (this.drag) {\n          this.drawDrag();\n        }\n      }\n\n      ctx.restore();\n\n      const fps = performance.now() - startTime;\n      this.fps = (fps * 0.1) + this.fps * 0.9;\n      if (appState.debug) {\n        this.renderFPS(time);\n      }\n    }\n    this.requestID = requestAnimationFrame(this.render);\n  }\n}\n\nexport default function Canvas(props: { mode: 'edit' | 'print' }) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const appState = useContext(Context);\n  useEffect(() => {\n    if (canvasRef.current === null) return;\n    const canvas = canvasRef.current;\n    const renderer: CanvasRenderer = new CanvasRenderer(canvas, props.mode);\n    const syncSize = () => {\n      canvas.width = canvas.parentElement?.offsetWidth || canvas.width;\n      canvas.height = canvas.parentElement?.offsetHeight || canvas.height;\n      renderer.dirty = new Date();\n    };\n    syncSize();\n    renderer.attachListeners();\n    window.addEventListener('resize', syncSize);\n    renderer.appState = appState;\n    renderer.mode = props.mode;\n    appState.notifyChange = () => {\n      renderer.dirty = new Date();\n    };\n    return () => {\n      window.removeEventListener('resize', syncSize);\n      renderer.detachListeners();\n    }\n  }, [canvasRef, appState, props.mode]);\n  return <canvas ref={canvasRef} style={{ flex: '1 1 auto' }} />;\n}\n","import { css } from 'astroturf';\n\nexport const DS = css`\n  .button {\n    background: transparent;\n    border: none;\n    outline: none;\n    margin: 4px;\n    padding: 8px 12px;\n    color: white;\n    font-size: 18px;\n    font-weight: 600;\n    box-sizing: border-box;\n    border-radius: 2px;\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\n  }\n\n  .button:hover {\n    background: #505050;\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\n  }\n\n  .button:active {\n    outline: none;\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\n  }\n\n  .buttonSmall {\n    background: transparent;\n    border: none;\n    outline: none;\n    margin: 4px;\n    color: white;\n    font-size: 18px;\n    font-weight: 600;\n    box-sizing: border-box;\n    border-radius: 2px;\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\n  }\n\n  .buttonSmall:hover {\n    background: #505050;\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\n  }\n\n  .buttonSmall:active {\n    outline: none;\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\n  }\n\n  .danger {\n    background: #A20B25;\n  }\n\n  .danger:hover {\n    background: #a03e4e;\n  }\n\n  .input {\n    font-size: 18px;\n    background: transparent;\n    color: white;\n    border: none;\n    border-bottom: 1px solid white;\n    padding: 4px;\n    margin: 4px;\n    margin-bottom: 1px;\n  }\n  \n  .input:focus {\n    outline: none;\n    border-bottom: 2px solid white;\n    margin-bottom: 0px;\n  }\n\n  .toolbar {\n    display: flex;\n    flex-direction: column;\n    background: #000;\n    border-radius: 12px;\n    padding: 8px;\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\n    color: white;\n  }\n  .toolbar svg {\n    color: white;\n    font-size: 24px;\n  }\n  .toolbar .selected svg {\n    color: black;\n  }\n  .toolbar button {\n    background: black;\n    width: 50px;\n    height: 50px;\n    border: 1px solid white;\n    outline: none;\n    margin: 4px;\n  }\n  .toolbar button:hover {\n    background: #505050;\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\n  }\n  .toolbar button:active {\n    outline: none;\n    border: none;\n    scale: 0.9;\n  }\n  .toolbar button.selected {\n    background: #bbb;\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\n  }\n  .toolbar button[disabled] {\n    background: #444;\n    box-shadow: none;\n  }\n`;","import React from 'react';\nimport { css } from 'astroturf';\nimport { sanitize } from 'dompurify';\nimport marked from 'marked';\n\nconst classes = css`\n  .formattedText {\n    margin: 0;\n    padding: 0 8px;\n    color: white;\n  }\n  .formattedText h1 {\n    font-size: 24px;\n    font-family: Helvetica serif;\n    padding: 0 8px;\n    margin: 0;\n    color: white;\n  }\n  .formattedText p {\n    font-size: 18px;\n    font-family: Helvetica serif;\n    padding: 0;\n    margin: 0;\n  }\n`;\n\nexport default function Description(props: { name: string, text: string }) {\n  return <div className={classes.formattedText}>\n    <h1>{props.name}</h1>\n    <div dangerouslySetInnerHTML={{ __html: sanitize(marked(props.text || '')) }} />\n  </div>;\n}","import React from 'react';\nimport { css } from 'astroturf';\nimport classNames from 'classnames';\n\nimport { DS } from './design_system';\nimport Description from './Description';\n\nconst classes = css`\n  .editor {\n    display: flex;\n    flex-direction: column;\n  }\n  .editor textarea {\n    height: 400px;\n    outline: none;\n    border: none;\n  }\n  .name {\n    font-family: Helvetica serif;\n    font-size: 24px;\n    color: white;\n    padding: 8px;\n  }\n  .actions {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin: 12px 24px;\n  }\n`;\n\ninterface Props {\n  name: string\n  description: string\n  onNameChange(name: string): void\n  onDescriptionChange(text: string): void\n  onSave(): void\n  onUndo(): void\n  onDelete?: () => void\n}\n\nexport default function DescriptionEditor(props: Props) {\n  const onNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    props.onNameChange(event.target.value);\n  };\n  const onTextChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    props.onDescriptionChange(event.target.value);\n  };\n  return <div className={classes.editor}>\n    <div style={{ display: 'flex', alignContent: 'center' }}>\n      <input className={DS.input} style={{ flexGrow: 1 }} value={props.name || ''} onChange={onNameChange} />\n    </div>\n    <textarea\n      value={props.description || ''}\n      onChange={onTextChange} />\n    <div className={classes.actions}>\n      {<button className={DS.button} onClick={props.onSave}>Save</button>}\n      {<button className={classNames(DS.button)} onClick={props.onUndo}>Undo</button>}\n      {props.onDelete && <button className={classNames(DS.button, DS.danger)} onClick={props.onDelete}>Delete</button>}\n    </div>\n    <Description name={props.name} text={props.description} />\n  </div>;\n}","import React, { useContext, useState } from 'react';\n\nimport DescriptionEditor from './DescriptionEditor';\nimport { Context } from './State';\n\nexport default function FeatureEditor() {\n  const appState = useContext(Context);\n  const selection = appState.getSelectedFeature();\n  const [lastSelection, setLastSelection] = useState(appState.selection);\n  const [tmpName, setTmpName] = useState<string | undefined>(undefined);\n  const [tmpDescription, setTmpDescription] = useState<string | undefined>(undefined);\n  const onSave = () => {\n    appState.setFeatureDescription({\n      name: tmpName === undefined ? selection?.feature.properties.name : tmpName,\n      description: tmpDescription === undefined ? selection?.feature.properties.description : tmpDescription\n    });\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  };\n  if (appState.selection.levelIndex !== lastSelection.levelIndex || appState.selection.featureIndex !== lastSelection.featureIndex) {\n    setLastSelection(appState.selection);\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  }\n  const onUndo = () => {\n    if (!selection) return;\n    if (selection.feature.properties.name) setTmpName(selection.feature.properties.name);\n    if (selection.feature.properties.description) setTmpDescription(selection.feature.properties.description);\n  };\n  const onDelete = () => {\n    appState.handleDelete();\n  }\n  let name = tmpName || '';\n  if (tmpName === undefined && selection?.feature.properties.name !== undefined) {\n    name = selection?.feature.properties.name;\n  }\n  let description = tmpDescription || '';\n  if (tmpDescription === undefined && selection?.feature.properties.description !== undefined) {\n    description = selection?.feature.properties.description;\n  }\n  return <div>\n    <h3 style={{ color: 'white' }}>Area</h3>\n    <DescriptionEditor\n      name={name}\n      description={description}\n      onNameChange={setTmpName}\n      onDescriptionChange={setTmpDescription}\n      onSave={onSave}\n      onUndo={onUndo}\n      onDelete={onDelete}\n    />\n  </div>;\n}","import React, { CSSProperties, useContext, useState } from 'react';\nimport { css } from 'astroturf';\nimport { DragDropContext, Droppable, Draggable, DropResult } from \"react-beautiful-dnd\";\n\nimport DescriptionEditor from './DescriptionEditor';\nimport { Context } from './State';\n\nconst classes = css`\n  .features {\n    font-family: Helvetica serif;\n    font-size: 18px;\n    color: white;\n    padding: 8px;\n  }\n`;\n\nconst getItemStyle = (isDragging: boolean, isSelected: boolean, draggableStyle: CSSProperties): CSSProperties => ({\n  userSelect: 'none',\n  padding: '4px',\n  margin: '0',\n  background: '#373737',\n  textDecoration: isSelected ? 'underline' : '',\n  ...draggableStyle\n});\n\nconst getListStyle = (isDraggingOver: boolean) => ({\n  background: '#373737',\n  padding: '4px',\n  width: '250px'\n});\n\nexport default function LevelEditor() {\n  const appState = useContext(Context);\n  const level = appState.maps[appState.selection.mapIndex].levels[appState.selection.levelIndex];\n  const [lastSelection, setLastSelection] = useState(appState.selection);\n  const [tmpName, setTmpName] = useState<string | undefined>(undefined);\n  const [tmpDescription, setTmpDescription] = useState<string | undefined>(undefined);\n  const onSave = () => {\n    appState.setLevelDescription({\n      name: tmpName === undefined ? level.name : tmpName,\n      description: tmpDescription === undefined ? level.description : tmpDescription\n    });\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  };\n  if (appState.selection.mapIndex !== lastSelection.mapIndex) {\n    setLastSelection(appState.selection);\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  }\n  const onUndo = () => {\n    setTmpName(level.name);\n    setTmpDescription(level.description);\n  };\n  const namedFeatures = level.features.map((feature, i) => ({ index: i, feature })).filter(f => f.feature.properties.name);\n  const onDragEnd = (result: DropResult) => {\n    if (!result.destination) {\n      return;\n    }\n    appState.setFeatureOrder(\n      namedFeatures[result.source.index].index,\n      namedFeatures[result.destination.index].index);\n  };\n  const onFeatureSelected = (i: number) => () => {\n    appState.setSelection({\n      ...appState.selection,\n      featureIndex: i,\n      geometryIndex: 0,\n    });\n  }\n  let name = tmpName || '';\n  if (tmpName === undefined) name = level.name || '';\n  let description = tmpDescription || '';\n  if (tmpDescription === undefined) description = level.description || '';\n  return <div>\n    <h3 style={{ color: 'white' }}>Level</h3>\n    <DescriptionEditor\n      name={name}\n      description={description}\n      onNameChange={setTmpName}\n      onDescriptionChange={setTmpDescription}\n      onSave={onSave}\n      onUndo={onUndo}\n    />\n    <div className={classes.features}>\n      <DragDropContext onDragEnd={onDragEnd}>\n        <Droppable droppableId=\"droppable\">\n          {(provided, snapshot) => (\n            <div\n              {...provided.droppableProps}\n              ref={provided.innerRef}\n              style={getListStyle(snapshot.isDraggingOver)}\n            >\n              {namedFeatures.map((f, i) => (\n                <Draggable key={i} draggableId={i.toString()} index={i}>\n                  {(provided, snapshot) => (\n                    <div\n                      ref={provided.innerRef}\n                      {...provided.draggableProps}\n                      {...provided.dragHandleProps}\n                      onClick={onFeatureSelected(f.index)}\n                      style={getItemStyle(\n                        snapshot.isDragging,\n                        appState.getSelectedFeature()?.feature === f.feature,\n                        provided.draggableProps.style || {}\n                      )}>\n                      {`${i + 1}. ${f.feature.properties.name}`}\n                    </div>\n                  )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n    </div>\n  </div>;\n}","import React, { useContext, useState } from 'react';\n\nimport DescriptionEditor from './DescriptionEditor';\nimport { Context } from './State';\n\nexport default function MapEditor() {\n  const appState = useContext(Context);\n  const map = appState.maps[appState.selection.mapIndex];\n  const [lastSelection, setLastSelection] = useState(appState.selection);\n  const [tmpName, setTmpName] = useState<string | undefined>(undefined);\n  const [tmpDescription, setTmpDescription] = useState<string | undefined>(undefined);\n  const onSave = () => {\n    appState.setMapDescription({\n      name: tmpName === undefined ? map.name : tmpName,\n      description: tmpDescription === undefined ? map.description : tmpDescription\n    });\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  };\n  if (appState.selection.mapIndex !== lastSelection.mapIndex) {\n    setLastSelection(appState.selection);\n    setTmpName(undefined);\n    setTmpDescription(undefined);\n  }\n  const onUndo = () => {\n    setTmpName(map.name);\n    setTmpDescription(map.description);\n  };\n  let name = tmpName || '';\n  if (tmpName === undefined) name = map.name || '';\n  let description = tmpDescription || '';\n  if (tmpDescription === undefined) description = map.description || '';\n  return <div>\n    <h3 style={{ color: 'white' }}>Map</h3>\n    <DescriptionEditor\n      name={name}\n      description={description}\n      onNameChange={setTmpName}\n      onDescriptionChange={setTmpDescription}\n      onSave={onSave}\n      onUndo={onUndo}\n    /></div>;\n}","import React, { useContext, useRef } from 'react';\nimport { css } from 'astroturf';\nimport classNames from 'classnames';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCaretLeft, faCaretRight } from '@fortawesome/free-solid-svg-icons';\n\nimport FeatureEditor from './FeatureEditor';\nimport LevelEditor from './LevelEditor';\nimport MapEditor from './MapEditor';\nimport { Context } from './State';\n\nconst classes = css`\n  .drawer {\n    width: 0;\n    margin: 8px 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background: #373737;\n    box-sizing: border-box;\n    transition: .2s ease-out;\n    &.open {\n      transition: .2s ease-out;\n      z-index: 100;\n    }\n  }\n  .toggleButton {\n    position: absolute;\n    top: 0;\n    left: -27px;\n    background: #373737;\n    color: white;\n    outline: none;\n    border: none;\n    font-size: 30px;\n    padding: 8px;\n    border-radius: 4px 0 0 4px;\n  }\n  .editors {\n    height: 97%;\n    overflow: scroll;\n    padding: 8px;\n  }\n`;\n\nexport default function Drawer() {\n  const appState = useContext(Context);\n  const selection = appState.getSelectedFeature();\n  const drawerRef = useRef<HTMLDivElement>(null);\n  const onMouseMove = (e: MouseEvent) => {\n    if (e.buttons !== 1) {\n      document.removeEventListener('mousemove', onMouseMove);\n      return;\n    }\n    if (!drawerRef.current) return;\n    const drag = drawerRef.current.dataset.drag;\n    if (drag) {\n      const width = parseInt(drawerRef.current.style.width.replace('px', ''));\n      drawerRef.current.style.width = `${width + (parseInt(drag) - e.screenX)}px`;\n    }\n    drawerRef.current.dataset.drag = e.screenX.toString();\n  }\n  const onClick = () => {\n    if (!drawerRef.current) return;\n    if (drawerRef.current.dataset.drag) {\n      drawerRef.current.dataset.drag = '';\n      return;\n    }\n    appState.setDrawerOpen(!appState.drawerOpen);\n  }\n  const onMouseDown = (e: React.MouseEvent) => {\n    document.addEventListener('mousemove', onMouseMove);\n  }\n  const onMouseUp = (e: React.MouseEvent) => {\n    document.removeEventListener('mousemove', onMouseMove);\n    if (!drawerRef.current) return;\n    const width = parseInt(drawerRef.current.style.width.replace('px', ''));\n    if (width > 100) {\n      appState.setDrawerWidth(width);\n      appState.setDrawerOpen(true);\n    }\n  }\n  return <div\n    ref={drawerRef}\n    className={classNames(classes.drawer, appState.drawerOpen && classes.open)}\n    style={{ width: appState.drawerOpen ? `${appState.drawerWidth}px` : 0 }}>\n    <button\n      className={classNames(classes.toggleButton, appState.drawerOpen && classes.open)}\n      onClick={onClick}\n      onMouseDown={onMouseDown}\n      onMouseUp={onMouseUp}>\n      {appState.drawerOpen && <FontAwesomeIcon icon={faCaretRight} />}\n      {!appState.drawerOpen && <FontAwesomeIcon icon={faCaretLeft} />}\n    </button>\n    <div className={classes.editors}>\n      <MapEditor />\n      <LevelEditor />\n      {selection && <FeatureEditor />}\n    </div>\n  </div>;\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { useContext } from 'react';\nimport { css } from 'astroturf';\nimport {\n  faPlus,\n  faMinus,\n} from '@fortawesome/free-solid-svg-icons'\n\nimport { Context } from './State';\nimport classNames from 'classnames';\n\nconst classes = css`\n  .levels {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    background: #000;\n    border-radius: 12px;\n    margin-bottom: 50px;\n    margin-left: 24px;\n    padding: 8px;\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\n    color: white;\n  }\n  .levels svg {\n    color: white;\n    font-size: 12px;\n  }\n  .levels button {\n    background: black;\n    width: 24px;\n    height: 24px;\n    border: 1px solid white;\n    outline: none;\n    margin: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n  }\n  .levels button:hover {\n    background: #505050;\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\n  }\n  .levels button:active {\n    outline: none;\n    border: none;\n    scale: 0.9;\n  }\n  .levels button.selected {\n    color: black;\n    background: #bbb;\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\n  }\n  .levels h4 {\n    margin: 0;\n    padding: 0;\n  }\n  .level {\n    display: flex;\n  }\n  button.link {\n    outline: none;\n    border: none;\n  }\n  .link:hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n`;\n\nexport default function Levels() {\n  const state = useContext(Context);\n  return <div className={classes.levels}>\n    <h4>Levels</h4>\n    {state.maps[state.selection.mapIndex].levels.map((level, i) => <div key={i} className={classes.level}>\n      <button\n        className={classNames(classes.link, state.selection.levelIndex === i && classes.selected)}\n        onClick={() => state.selectLevel(i)}>\n        {i}\n      </button>\n      <button onClick={() => state.removeLevel(i)}><FontAwesomeIcon icon={faMinus} /></button>\n    </div>)}\n    <button onClick={() => state.addLevel()}><FontAwesomeIcon icon={faPlus} /></button>\n  </div>;\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React from 'react';\nimport { css } from 'astroturf';\nimport {\n  faTimes,\n} from '@fortawesome/free-solid-svg-icons'\n\nconst classes = css`\n  .modal {\n    position: fixed;\n    z-index: 1000;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background-color: rgba(0, 0, 0, 0.4);\n  }\n\n  .modalContent {\n    position: relative;\n    background-color: #373737;\n    color: #fff;\n    margin: 64px auto;\n    padding: 0 20px 20px 20px;\n    border: 1px solid #888;\n    border-radius: 8px;\n    width: 60%;\n  }\n\n  .modalContent button {\n    outline: none;\n    border: none;\n    background-color: transparent;\n    color: #fff;\n    font-size: 24px;\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    text-decoration: none;\n    cursor: pointer;\n  }\n`;\n\nexport default function Modal(props: React.PropsWithChildren<{ open: boolean, toggle: () => void }>) {\n  return <div className={classes.modal} style={{ display: props.open ? 'block' : 'none' }}>\n    <div className={classes.modalContent}>\n      <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n        <button onClick={props.toggle}><FontAwesomeIcon icon={faTimes} /></button>\n      </div>\n      {props.children}\n    </div>\n  </div>;\n}","import React, { useContext, useState } from 'react';\nimport { css } from 'astroturf';\nimport { useHistory } from \"react-router-dom\";\n\nimport Modal from './Modal';\nimport { DS } from './design_system';\nimport { Context } from './State';\n\nconst classes = css`\n  .menubar {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    background: #373737;\n    padding: 2px;\n    width: 100%;\n  }\n  .title {\n    color: white;\n    margin: 8px 24px 8px 24px;\n  }\n  .debugMenu {\n    margin-left: auto;\n    margin-right: 24px;\n  }\n  label {\n    color: white;\n  }\n  .mapLink:hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n`;\n\nfunction MapSelector(props: { onSelect: (map: number) => void }) {\n  const appState = useContext(Context);\n  return <div>\n    <h2>Maps</h2>\n    <div>{\n      appState.maps.map((map, i) => <div key={i}>\n        <h4\n          className={classes.mapLink}\n          onClick={() => props.onSelect(i)}>\n          {map.name}\n        </h4>\n      </div>)\n    }</div>\n  </div>\n}\n\nexport default function Menubar() {\n  const appState = useContext(Context);\n  const history = useHistory();\n  const [tmpName, setTmpName] = useState<string | undefined>(undefined);\n  const updateTmpName = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setTmpName(event.target.value);\n  }\n  const name = tmpName === undefined ? appState.maps[appState.selection.mapIndex].name : tmpName;\n  const [showLoadModal, setShowLoadModal] = useState(false);\n  const selectMap = (i: number) => {\n    appState.setSelection({\n      mapIndex: i,\n      levelIndex: 0,\n      featureIndex: undefined,\n      geometryIndex: undefined,\n    });\n    setShowLoadModal(false);\n  }\n  const [lastSelection, setLastSelection] = useState(appState.selection);\n  if (appState.selection.mapIndex !== lastSelection.mapIndex || appState.selection.mapIndex !== lastSelection.mapIndex) {\n    setLastSelection(appState.selection);\n    setTmpName(undefined);\n  }\n  return <React.Fragment>\n    <div className={classes.menubar}>\n      <span className={classes.title}>RPG.ai</span>\n      <input className={DS.input} value={name} onChange={updateTmpName} />\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.save(name || ''); }}>\n        Save\n      </button>\n      {appState.maps.length > 1 && <button\n        className={DS.buttonSmall}\n        onClick={() => { setShowLoadModal(true); }}>\n        Load\n      </button>}\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.newMap(); }}>\n        New\n      </button>\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.undo(); }}>\n        Undo\n      </button>\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.redo(); }}>\n        Redo\n      </button>\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { history.push('/print'); }}>\n        Print\n      </button>\n      <button\n        className={DS.buttonSmall}\n        onClick={() => { appState.toggleWelcome(); }}>\n        Help\n      </button>\n      {appState.debug &&\n        <button\n          className={DS.buttonSmall}\n          onClick={() => { appState.reset(); }}>\n          Clear\n      </button>}\n      <div className={classes.debugMenu}>\n        <label>Debug</label>\n        <input\n          type=\"checkbox\"\n          checked={appState.debug}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) => appState.setDebug(event.target.checked)} />\n      </div>\n    </div>\n    {showLoadModal && <Modal open={showLoadModal} toggle={() => setShowLoadModal(!showLoadModal)}>\n      <MapSelector onSelect={selectMap} />\n    </Modal>}\n  </React.Fragment>;\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { useContext } from 'react';\nimport { css } from 'astroturf';\nimport {\n  faMapMarkerAlt,\n} from '@fortawesome/free-solid-svg-icons'\n\nimport { Context } from './State';\n\nconst classes = css`\n  .navigation {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    padding: 8px;\n    z-index: 1;\n  }\n  .navigation svg {\n    color: #505050;\n    font-size: 24px;\n  }\n  .navigation button {\n    background: transparent;\n    outline: none;\n    border: none; \n    display: flex;\n    margin: 2px;\n    align-items: center;\n    justify-content: center;\n    width: 24px;\n    height: 24px;\n  }\n  .navigation button:hover svg {\n    color: #000;\n  }\n`;\n\nexport default function Navigation() {\n  const state = useContext(Context);\n  return <div className={classes.navigation}>\n    <button onClick={() => state.setZoom(1, [0, 0])}><FontAwesomeIcon icon={faMapMarkerAlt} /></button>\n  </div>;\n}","import React, { useContext } from 'react';\nimport { css } from 'astroturf';\nimport marked from 'marked';\nimport { sanitize } from 'dompurify';\n\nimport Canvas from './Canvas';\nimport { Context, Level } from './State';\n\nconst classes = css`\n  .print {\n    display: flex;\n    flex-direction: column;\n    font-family: Helvetica serif;\n  }\n  .page {\n    width: 8in;\n    height: 10.5in;\n    display: flex;\n    flex-direction: column;\n    margin-left: auto;\n    margin-right: auto;\n    border-bottom: 1px solid black;\n    padding: 0.25in;\n  }\n  @media print {\n    .page {\n      border-bottom: none !important;\n    }\n  }\n  .pages {\n    width: 8in;\n    display: flex;\n    flex-direction: column;\n    margin-left: auto;\n    margin-right: auto;\n    padding: 0.25in;\n  }\n  .canvasWrapper {\n    flex-grow: 1;\n  }\n`;\n\nexport default function PrintLayout() {\n  const appState = useContext(Context);\n  const map = appState.maps[appState.selection.mapIndex];\n  let levels: Level[] = [];\n  map.levels.forEach((level, i) => {\n    levels.push({\n      ...level,\n      features: level.features.filter(feature => feature.properties.name),\n    })\n  });\n  return <div className={classes.print}>\n    <div className={classes.page}>\n      <h2>{map.name}</h2>\n      <div dangerouslySetInnerHTML={{ __html: sanitize(marked(map.description || '')) }} />\n      <div className={classes.canvasWrapper}>\n        <Canvas mode=\"print\" />\n      </div>\n    </div>\n    <div className={classes.pages}>\n      {levels.map((level, i) => <div key={i}>\n        <h2>{level.name}</h2>\n        <div dangerouslySetInnerHTML={{ __html: sanitize(marked(level.description || '')) }} />\n        {level.features.map((feature, j) => <div key={j}>\n          <h3>{`${i + 1}.${j + 1} ${feature.properties.name}`}</h3>\n          <div dangerouslySetInnerHTML={{ __html: sanitize(marked(feature.properties.description || '')) }} />\n        </div>)}\n      </div>)}\n    </div>\n  </div>;\n}","import {\n  IconDefinition,\n  IconLookup,\n  IconName\n} from '@fortawesome/fontawesome-svg-core';\n\nexport const textIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'text' as IconName,\n  icon: [\n    448,\n    512,\n    [],\n    'none',\n    'M432 32a16 16 0 0 1 16 16v96a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16v-32H264v304h40a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H144a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h40V112H64v32a16 16 0 0 1-16 16H16a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16z'\n  ]\n};\n\nexport const stairsIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'stairs' as IconName,\n  icon: [\n    100,\n    100,\n    [],\n    'none',\n    'M 88.894187,13.349653 H 75.858354 67.310207 v 8.548146 13.036436 H 54.274372 45.726226 v 8.548149 13.035835 H 32.689789 24.141641 v 8.548147 13.035835 H 2.557659 v 8.548146 h 30.13213 V 78.1022 65.066366 H 54.274372 V 56.518219 43.482384 H 75.858354 V 34.934235 21.897799 h 13.035833 8.548154 v -8.548146 z',\n  ]\n};\n\nexport const statueIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'statue' as IconName,\n  icon: [\n    100,\n    100,\n    [],\n    'none',\n    'M 50.000001,0.87620926 C 53.837858,11.917235 57.675715,22.958261 61.513572,33.999287 c 11.686603,0.238155 23.373206,0.47631 35.059809,0.714465 -9.314677,7.061883 -18.629353,14.123767 -27.94403,21.18565 3.38486,11.188214 6.76972,22.376428 10.15458,33.564642 C 69.189287,82.787502 59.594644,76.11096 50,69.434418 40.405356,76.110959 30.810711,82.787501 21.216067,89.464042 24.600928,78.275829 27.985788,67.087615 31.370649,55.899402 22.055973,48.837518 12.741296,41.775633 3.4266201,34.713749 15.113223,34.475595 26.799825,34.237441 38.486428,33.999287 42.324286,22.958261 46.162143,11.917235 50.000001,0.87620926 Z'\n  ]\n}\n\nexport const columnIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'column' as IconName,\n  icon: [\n    100,\n    100,\n    [],\n    'none',\n    'M 99.307838,50.000002 C 99.676865,71.680786 83.863735,92.30908 62.849037,97.645153 43.43672,103.02916 21.169043,95.169716 9.7285742,78.512925 -1.6384271,62.63998 -2.3896164,39.964144 8.336037,23.568937 18.693791,7.0444626 39.349174,-2.2666802 58.573467,1.4133904 77.242915,4.6178118 93.377617,19.344785 97.783979,37.839728 c 1.009833,3.969178 1.527479,8.064294 1.523859,12.160274 z'\n  ]\n}\n\nexport const stalacmiteIcon: IconDefinition & IconLookup = {\n  prefix: 'fab',\n  iconName: 'stalacmite' as IconName,\n  icon: [\n    100,\n    100,\n    [],\n    'none',\n    'm 74.415659,92.321351 c -4.943641,0.08102 -9.841762,-1.089484 -14.790343,-0.658213 -3.565886,-0.471723 -7.22558,0.729371 -9.905688,3.089052 -1.962324,1.335386 -5.447033,1.324308 -6.094083,1.821715 -3.85956,0.399841 -7.750871,0.28678 -11.573283,0.679078 -2.618647,-0.623551 -6.036085,-0.489443 -8.075905,-1.732656 1.155957,-3.724279 4.94719,-5.230686 7.705191,-7.514488 2.969895,-1.745463 3.119779,-6.066341 3.390628,-9.173885 0.977271,-3.506623 0.968227,-6.763139 0.834314,-10.383359 0.215923,-3.830242 -0.1664,-7.549928 0.655209,-11.170453 0.846053,-3.59887 2.294525,-6.963584 3.511139,-10.460921 0.866289,-3.295106 0.609567,-7.081046 1.683639,-10.061072 1.42479,-3.266581 3.711094,-6.049776 5.124971,-9.287309 1.837583,-3.091687 3.916701,-6.009869 3.773832,-9.893974 0.571828,-4.55039 1.017447,-9.2261117 1.445585,-13.7209267 3.030585,-2.95287215 6.303553,0.1796971 8.022745,2.5391129 3.780486,-0.6640017 2.841131,5.3726878 4.064949,7.7612308 0.861812,3.528943 1.440482,7.099871 1.327164,10.73674 -0.02487,3.466809 0.535472,6.773821 1.338634,10.143058 1.921669,3.216066 -0.39964,6.716109 0.466581,10.116214 -0.08226,4.045679 1.089512,8.062286 2.357768,11.873417 3.207109,1.44481 4.605866,4.867853 4.700711,8.604547 -0.214383,4.020444 0.705194,8.095625 -0.21518,12.020218 -0.141146,3.376494 0.09043,6.94965 1.137373,9.996727 1.650808,1.264756 0.198735,3.557255 -0.885951,4.676147 z',\n  ]\n}","import React from 'react';\nimport { css } from 'astroturf';\nimport { faCaretLeft, faDoorClosed, faSquare, faVectorSquare } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { statueIcon } from './icons/custom_icons';\n\nconst classes = css`\n  .welcomePage {\n    display: flex;\n    flex-direction: column;\n  }\n  .welcomePage a {\n    color: white;\n  }\n  .welcomePage li {\n    padding: 4px;\n  }\n  .footer {\n    font-size: 16px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n`;\n\nexport default function Welcome() {\n  return <div className={classes.welcomePage}>\n    <h2>Welcome to the RPG.ai Mapmaker</h2>\n    <h3>Quick Start</h3>\n    <ul>\n      <li>Select the Wall tool (<FontAwesomeIcon icon={faSquare} />) to build walls</li>\n      <li>Select the Rect tool (<FontAwesomeIcon icon={faVectorSquare} />) for rectangular areas</li>\n      <li>Place Decorations (<FontAwesomeIcon icon={statueIcon} />) and Doors (<FontAwesomeIcon icon={faDoorClosed} />) </li>\n      <li>Select and Annotate your areas (checkout the Drawer <FontAwesomeIcon icon={faCaretLeft} /> on the right)</li>\n      <li>Click \"Print\" and print your map as a PDF</li>\n    </ul>\n    <h3>Support</h3>\n    <ul>\n      <li>File bugs at <a href=\"https://github.com/etherealmachine/rpg-ai/issues\">Github Issues</a></li>\n      <li>If you like the project, or want more features, support development on <a href=\"https://www.patreon.com/etherealmachine\">Patreon</a></li>\n    </ul>\n    <p className={classes.footer}>Developed by <a href=\"https://github.com/etherealmachine\">@etherealmachine</a>, Copyright 2020</p>\n  </div>;\n}","import React, { useEffect, useRef, useState } from 'react';\nimport { createPopper } from '@popperjs/core';\nimport { css } from 'astroturf';\n\nconst classes = css`\n  .tooltip {\n    color: white;\n    background: black;\n    border-radius: 4px;\n    padding: 8px;\n  }\n`;\n\nexport default function Tooltip(props: React.PropsWithChildren<{ tooltip: string }>) {\n  const parentRef = useRef<HTMLDivElement>(null);\n  const hoverRef = useRef<HTMLDivElement>(null);\n  const tooltipRef = useRef<HTMLSpanElement>(null);\n  const [shown, setShown] = useState(false);\n  const show = () => {\n    setShown(true);\n  };\n  const hide = () => {\n    setShown(false);\n  }\n  useEffect(() => {\n    if (parentRef.current && tooltipRef.current) {\n      createPopper(parentRef.current, tooltipRef.current, {\n        placement: 'right',\n        modifiers: [\n          {\n            name: 'offset',\n            options: {\n              offset: [0, 20],\n            },\n          },\n        ],\n      });\n    }\n    if (hoverRef.current) {\n      hoverRef.current.addEventListener('mouseenter', show);\n      hoverRef.current.addEventListener('mouseleave', hide);\n    }\n  }, [parentRef, tooltipRef]);\n  return <div ref={parentRef}>\n    <span\n      ref={tooltipRef}\n      style={shown ? {} : { visibility: 'hidden' }}\n      className={classes.tooltip}>\n      {props.tooltip}\n    </span>\n    <div ref={hoverRef}>\n      {props.children}\n    </div>\n  </div>;\n}","import React from 'react';\nimport { css } from 'astroturf';\n\nconst classes = css`\n  .toggle {\n    position: relative;\n    display: inline-block;\n    width: 100%;\n    height: 34px;\n  }\n\n  .toggle input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  .slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    -webkit-transition: .4s;\n    transition: .4s;\n    border-radius: 34px;\n  }\n\n  .slider:before {\n    position: absolute;\n    content: \"\";\n    height: 26px;\n    width: 26px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    -webkit-transition: .4s;\n    transition: .4s;\n    border-radius: 50%;\n  }\n\n  .toggle input:checked + .slider {\n    background-color: #2196F3;\n  }\n\n  .toggle input:focus + .slider {\n    box-shadow: 0 0 1px #2196F3;\n  }\n\n  .toggle input:checked + .slider:before {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }\n`;\n\nexport default function Toggle(props: { toggled: boolean, onToggle: () => void }) {\n  return <label className={classes.toggle}>\n    <input type=\"checkbox\" checked={props.toggled} onChange={props.onToggle} />\n    <span className={classes.slider}></span>\n  </label>;\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { useContext } from 'react';\nimport {\n  faMousePointer,\n  faVectorSquare,\n  faDrawPolygon,\n  IconDefinition,\n  faDoorClosed,\n  faSquare,\n  faBrush,\n  faStrikethrough,\n  faExclamationTriangle,\n} from '@fortawesome/free-solid-svg-icons'\n\nimport { DS } from './design_system';\nimport { Context, ToolName } from './State';\nimport Tooltip from './Tooltip';\nimport Toggle from './Toggle';\nimport { columnIcon, stairsIcon, stalacmiteIcon, statueIcon } from './icons/custom_icons';\nimport { faCircle } from '@fortawesome/free-regular-svg-icons';\n\ninterface Button {\n  icon?: IconDefinition\n  tooltip: string,\n  options?: { [key: string]: Button }\n}\n\nconst buttons: { [key in ToolName]: Button } = {\n  'pointer': { icon: faMousePointer, tooltip: 'Select' },\n  'walls': { icon: faSquare, tooltip: 'Walls' },\n  'stairs': { icon: stairsIcon, tooltip: 'Stairs' },\n  'doors': {\n    tooltip: 'Doors', options: {\n      'normal': { icon: faDoorClosed, tooltip: 'Normal Door' },\n      'secret': { icon: faStrikethrough, tooltip: 'Secret Door' },\n    }\n  },\n  'decoration': {\n    tooltip: 'Decorations', options: {\n      'statue': { icon: statueIcon, tooltip: 'Statue' },\n      'column': { icon: columnIcon, tooltip: 'Column' },\n      'stalacmite': { icon: stalacmiteIcon, tooltip: 'Stalacmite' },\n    }\n  },\n  'brush': { icon: faBrush, tooltip: 'Paint' },\n  'rect': { icon: faVectorSquare, tooltip: 'Rectangle' },\n  'polygon': { icon: faDrawPolygon, tooltip: 'Polygon' },\n  'ellipse': { icon: faCircle, tooltip: 'Circle/Ellipse' },\n};\n\nexport default function Toolbar() {\n  const state = useContext(Context);\n  const handleButtonClick = (tool: ToolName) => () => {\n    state.setSelectedTool(tool);\n  };\n  const toggleGridSteps = () => {\n    state.setGridSteps(state.gridSteps === 1 ? 2 : 1);\n  };\n  const isOptionSelected = (tool: ToolName, option: string) => {\n    if (state.tools[tool].hasOwnProperty('subtype')) {\n      return (state.tools[tool] as any).subtype === option;\n    }\n    return false;\n  };\n  const handleOptionClick = (tool: ToolName, option: string) => () => {\n    state.setToolOption(tool, option);\n  };\n  const iconFor = (tool: ToolName) => {\n    const button = buttons[tool];\n    if (button.options) return button.options[(state.tools[tool] as any).subtype].icon || faExclamationTriangle;\n    return button.icon || faExclamationTriangle;\n  }\n  return <div className={DS.toolbar} style={{ position: 'absolute', top: '50px', left: '24px' }}>\n    {Object.entries(state.tools).map(([name, spec]) => <Tooltip key={name} tooltip={buttons[name as ToolName].tooltip}>\n      <React.Fragment>\n        <button\n          className={spec.selected ? DS.selected : ''}\n          disabled={spec.disabled}\n          onClick={handleButtonClick(name as ToolName)}>\n          <FontAwesomeIcon icon={iconFor(name as ToolName)} />\n        </button>\n        {spec.selected && buttons[name as ToolName].options && <div className={DS.toolbar}>\n          {Object.entries(buttons[name as ToolName].options || {}).map(([optionName, optionSpec]) => <Tooltip key={optionName} tooltip={optionSpec.tooltip}>\n            <button className={isOptionSelected(name as ToolName, optionName) ? DS.selected : ''}\n              onClick={handleOptionClick(name as ToolName, optionName)}>\n              <FontAwesomeIcon icon={optionSpec.icon || faExclamationTriangle} />\n            </button>\n          </Tooltip>)}\n        </div>}\n      </React.Fragment>\n    </Tooltip>)}\n    <Toggle toggled={state.gridSteps === 2} onToggle={toggleGridSteps} />\n  </div>;\n}","import { Dispatch, SetStateAction, useState } from \"react\";\n\nfunction isObject(i: any) {\n  return (i && typeof i === 'object' && !Array.isArray(i));\n}\n\nfunction inflate(target: any, ...objs: any[]): any {\n  if (!objs.length) return target;\n  const obj = objs.shift();\n  if (isObject(target) && isObject(obj)) {\n    for (const key in obj) {\n      if (isObject(obj[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        inflate(target[key], obj[key]);\n      } else {\n        if (Object.isFrozen(target)) {\n          target = unfreeze(target);\n        }\n        Object.assign(target, { [key]: obj[key] });\n      }\n    }\n  }\n  return inflate(target, ...objs);\n}\n\nfunction unfreeze(o: any) {\n  let oo: any = undefined;\n  if (o instanceof Array) {\n    oo = []; const clone = (v: any) => { oo.push(v) };\n    o.forEach(clone);\n  } else if (o instanceof String) {\n    oo = o;\n  } else if (typeof o == 'object') {\n    oo = {};\n    for (var property in o) { oo[property] = o[property]; }\n  }\n  return oo;\n}\n\nexport function useLocalStorageState<T>(key: string, initial: T): [T, Dispatch<SetStateAction<T>>] {\n  const fromLocalStorage = window.localStorage.getItem(key);\n  if (fromLocalStorage !== null) inflate(initial, JSON.parse(fromLocalStorage));\n  const [state, setState] = useState<T>(initial);\n  return [state, (newState: any) => {\n    window.localStorage.setItem(key, JSON.stringify(newState));\n    setState(newState);\n  }];\n}","/*\n  RPG.ai brings Table Top Role Playing Games to the next level\n\n  RPG.ai lets you easily draw beautiful maps full of NPCs, object, and areas for players to explore.\n*/\nimport React, { useState } from 'react';\nimport { css } from 'astroturf';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from \"react-router-dom\";\n\nimport Canvas from './Canvas';\nimport Drawer from './Drawer';\nimport Levels from './Levels';\nimport Menubar from './Menubar';\nimport Modal from './Modal';\nimport Navigation from './Navigation';\nimport PrintLayout from './PrintLayout';\nimport Welcome from './Welcome';\nimport Toolbar from './Toolbar';\nimport { Context, State } from './State';\nimport { useLocalStorageState } from './Persistence';\n\nconst classes = css`\n  .app {\n    width: 100vw;\n    height: 100vh;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n  }\n  .canvasWrapper {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n  }\n`;\n\nexport default function App() {\n  const [i, setCount] = useState(0);\n  const [state, setState] = useLocalStorageState('AppState', new State());\n  state.setState = (newState: State) => {\n    setState(newState);\n    setCount(i + 1);\n  };\n  (window as any).app = state;\n  document.title = state.maps[state.selection.mapIndex].name || 'RPG.ai';\n  return <Router>\n    <Switch>\n      <Route path=\"/print\">\n        <div className={classes.app}>\n          <Context.Provider value={state}>\n            <PrintLayout />\n          </Context.Provider>\n        </div>\n      </Route>\n      <Route path=\"/\">\n        <div className={classes.app} style={{ overflow: 'hidden' }}>\n          <Context.Provider value={state}>\n            <Menubar />\n            <div className={classes.canvasWrapper}>\n              <Modal open={state.showWelcome} toggle={state.toggleWelcome.bind(state)}><Welcome /></Modal>\n              <Canvas mode='edit' />\n              <Drawer />\n              <Toolbar />\n              <Levels />\n              <Navigation />\n            </div>\n          </Context.Provider>\n        </div>\n      </Route>\n    </Switch>\n  </Router>;\n}","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}